{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{useAuth}from'../context/AuthContext';import{useNavigate}from'react-router-dom';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus,faCheck,faTimes,faMoneyBillWave,faHistory,faCalculator}from'@fortawesome/free-solid-svg-icons';// Ajoutez après les imports FontAwesome, avant le hook useWindowSize\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const safeFormatNumber=value=>{if(value===null||value===undefined||isNaN(value)){return'0';}return value.toLocaleString();};// --- HOOK POUR LA RESPONSIVITÉ ---\nconst useWindowSize=()=>{const[size,setSize]=useState([window.innerWidth]);useEffect(()=>{const handleResize=()=>setSize([window.innerWidth]);window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);return{width:size[0]};};// --- INTERFACES ADAPTÉES À L'API DJANGO ---\n// --- CONSTANTES ---\nconst MOBILE_BREAKPOINT=768;const API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'http://127.0.0.1:8000/api';// --- SERVICE DE LOGIQUE MÉTIER SELON LA CHARTE FRIENDLY BANKS ---\nconst LoanService={getMaxLoanAmount:berryPoints=>{if(berryPoints>=10&&berryPoints<=100)return 60000;if(berryPoints>100&&berryPoints<=199)return 120000;if(berryPoints>=200&&berryPoints<=499)return 300000;if(berryPoints>=500)return 500000;return 0;},getInterestRate:amount=>{if(amount>0&&amount<40000)return 10;if(amount>=40000&&amount<100000)return 8;if(amount>=100000)return 6;return 0;},calculateTotalToRepay:(amount,interestRate)=>{return amount*(1+interestRate/100);},getStatusDisplayName:status=>{const statusMap={'pending':'En attente','approved':'Approuvé','rejected':'Rejeté','repaid':'Remboursé'};return statusMap[status]||status;},getPaymentTypeDisplayName:type=>{const typeMap={'partial':'Remboursement partiel','interest_only':'Intérêts uniquement','full':'Remboursement complet'};return typeMap[type]||type;}};// --- COMPOSANT PRINCIPAL ---\nconst Loans=()=>{var _loanStats$activeLoan,_loanStats$repaidAmou,_loanDetails$maxAmoun,_loanDetails$totalToR,_selectedLoanForRepay,_selectedLoanForRepay2,_selectedLoanForRepay3,_selectedLoanForRepay4,_selectedLoanForRepay5,_repaymentCalculation,_repaymentCalculation2;const{user,hasPermission}=useAuth();const navigate=useNavigate();// --- ÉTATS PRÊTS ---\nconst[loans,setLoans]=useState([]);const[members,setMembers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isLoanModalOpen,setIsLoanModalOpen]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);const[formError,setFormError]=useState('');// --- ÉTATS REMBOURSEMENTS ---\nconst[repayments,setRepayments]=useState([]);const[isRepaymentModalOpen,setIsRepaymentModalOpen]=useState(false);const[selectedLoanForRepayment,setSelectedLoanForRepayment]=useState(null);const[activeTab,setActiveTab]=useState('loans');const initialLoanFormState={member:0,amount:5000,justification:'',guarantors:[]};const initialRepaymentFormState={loan_request:0,amount:0,payment_type:'partial',notes:''};const[newLoanRequest,setNewLoanRequest]=useState(initialLoanFormState);const[newRepayment,setNewRepayment]=useState(initialRepaymentFormState);const[guarantor1Id,setGuarantor1Id]=useState(0);const[guarantor2Id,setGuarantor2Id]=useState(0);// --- CALCULS MEMOIZÉS ---\nconst selectedMember=useMemo(()=>{return members.find(m=>m.id===newLoanRequest.member);},[newLoanRequest.member,members]);const loanDetails=useMemo(()=>{if(!selectedMember)return null;const maxAmount=LoanService.getMaxLoanAmount(selectedMember.berry_score);const interestRate=LoanService.getInterestRate(newLoanRequest.amount);const totalToRepay=LoanService.calculateTotalToRepay(newLoanRequest.amount,interestRate);let error='';if(newLoanRequest.amount>maxAmount){error=`Le montant dépasse votre plafond de prêt de ${safeFormatNumber(maxAmount)} XAF.`;}return{maxAmount,interestRate,totalToRepay,error};},[newLoanRequest.amount,selectedMember]);const repaymentCalculations=useMemo(()=>{if(!selectedLoanForRepayment)return null;const loan=selectedLoanForRepayment;const amount=newRepayment.amount;if(amount<=0)return null;let capitalAmount=0;let interestAmount=0;let error='';if(amount>loan.remaining_balance){error=`Le montant dépasse le solde restant (${safeFormatNumber(loan.remaining_balance)} XAF)`;}else if(newRepayment.payment_type==='interest_only'){if(amount>loan.remaining_interest){error=`Le montant dépasse les intérêts restants (${safeFormatNumber(loan.remaining_interest)} XAF)`;}else{interestAmount=amount;capitalAmount=0;}}else{// Remboursement partiel ou complet\nif(amount<=loan.remaining_interest){interestAmount=amount;capitalAmount=0;}else{interestAmount=loan.remaining_interest;capitalAmount=amount-loan.remaining_interest;// Vérifier le minimum de 10% du capital pour les remboursements de capital\nif(capitalAmount>0&&capitalAmount<loan.minimum_monthly_payment&&loan.remaining_capital>loan.minimum_monthly_payment){error=`Le remboursement de capital doit être d'au moins ${safeFormatNumber(loan.minimum_monthly_payment)} XAF (10% du capital restant)`;}}}return{capitalAmount,interestAmount,error};},[newRepayment.amount,newRepayment.payment_type,selectedLoanForRepayment]);const loanStats=useMemo(()=>({pendingCount:loans.filter(l=>l.status==='pending').length,activeLoanAmount:loans.filter(l=>l.status==='approved').reduce((sum,l)=>{var _l$remaining_balance;return sum+((_l$remaining_balance=l.remaining_balance)!==null&&_l$remaining_balance!==void 0?_l$remaining_balance:0);},0),repaidAmount:loans.reduce((sum,l)=>{var _l$total_repaid;return sum+((_l$total_repaid=l.total_repaid)!==null&&_l$total_repaid!==void 0?_l$total_repaid:0);},0)}),[loans]);// --- FONCTIONS API ---\nconst fetchLoans=async()=>{try{setLoading(true);setError(null);const response=await fetch(`${API_BASE_URL}/loan-requests/`,{headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`,'Content-Type':'application/json'}});if(!response.ok){throw new Error(`Erreur HTTP: ${response.status}`);}const data=await response.json();setLoans(data);}catch(err){setError(err instanceof Error?err.message:'Erreur lors du chargement des prêts');console.error('Erreur lors du chargement des prêts:',err);}finally{setLoading(false);}};const fetchRepayments=async()=>{try{const response=await fetch(`${API_BASE_URL}/loan-repayments/`,{headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`,'Content-Type':'application/json'}});if(!response.ok){throw new Error(`Erreur HTTP: ${response.status}`);}const data=await response.json();setRepayments(data);}catch(err){console.error('Erreur lors du chargement des remboursements:',err);}};const fetchMembers=async()=>{try{const response=await fetch(`${API_BASE_URL}/members/`,{headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`,'Content-Type':'application/json'}});if(!response.ok){throw new Error(`Erreur HTTP: ${response.status}`);}const data=await response.json();setMembers(data);}catch(err){console.error('Erreur lors du chargement des membres:',err);}};// Charger les données au montage du composant\nuseEffect(()=>{if(user!==null&&user!==void 0&&user.token){fetchLoans();fetchRepayments();fetchMembers();}},[user===null||user===void 0?void 0:user.token]);const{width}=useWindowSize();const isMobile=width<MOBILE_BREAKPOINT;// --- VÉRIFICATION DES PERMISSIONS ---\nif(!hasPermission('view_loans')){return/*#__PURE__*/_jsx(\"div\",{style:styles.page,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.errorContainer,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Acc\\xE8s refus\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Vous n'avez pas la permission de consulter les pr\\xEAts.\"})]})});}// --- GESTIONNAIRES D'ÉVÉNEMENTS PRÊTS ---\nconst handleOpenLoanModal=()=>{if(!hasPermission('add_loan_requests')){alert(\"Vous n'avez pas la permission de faire une demande de prêt.\");return;}const currentMember=members.find(m=>m.user.id===parseInt((user===null||user===void 0?void 0:user.id)||'0'));setNewLoanRequest({...initialLoanFormState,member:(currentMember===null||currentMember===void 0?void 0:currentMember.id)||0});setGuarantor1Id(0);setGuarantor2Id(0);setFormError('');setIsLoanModalOpen(true);};const handleStatusUpdate=async(id,status)=>{if(!hasPermission('approve_loans')){alert(\"Vous n'avez pas la permission d'approuver des prêts.\");return;}try{const response=await fetch(`${API_BASE_URL}/loan-requests/${id}/`,{method:'PATCH',headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`,'Content-Type':'application/json'},body:JSON.stringify({status})});if(!response.ok){throw new Error('Erreur lors de la mise à jour du statut');}await fetchLoans();alert(`Prêt ${status==='approved'?'approuvé':'rejeté'} avec succès`);}catch(err){console.error('Erreur lors de la mise à jour:',err);alert('Erreur lors de la mise à jour du statut');}};const handleSaveLoanRequest=async()=>{if(!selectedMember||!loanDetails||!newLoanRequest.justification||!guarantor1Id||!guarantor2Id){setFormError(\"Veuillez remplir tous les champs.\");return;}if(loanDetails.error){setFormError(loanDetails.error);return;}if(guarantor1Id===guarantor2Id||guarantor1Id===selectedMember.id||guarantor2Id===selectedMember.id){setFormError(\"Veuillez choisir deux avaliseurs distincts et différents de vous-même.\");return;}setIsSubmitting(true);setFormError('');try{const loanData={member:newLoanRequest.member,amount:newLoanRequest.amount,justification:newLoanRequest.justification,guarantors:[guarantor1Id,guarantor2Id],interest_rate:loanDetails.interestRate};const response=await fetch(`${API_BASE_URL}/loan-requests/`,{method:'POST',headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`,'Content-Type':'application/json'},body:JSON.stringify(loanData)});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Erreur lors de la création de la demande');}await fetchLoans();setIsLoanModalOpen(false);alert('Demande de prêt soumise avec succès !');}catch(err){setFormError(err instanceof Error?err.message:'Erreur lors de la création');console.error('Erreur lors de la création:',err);}finally{setIsSubmitting(false);}};// --- GESTIONNAIRES D'ÉVÉNEMENTS REMBOURSEMENTS ---\nconst handleOpenRepaymentModal=loan=>{var _loan$minimum_monthly;if(!hasPermission('add_repayments')&&!hasPermission('manage_loans')){alert(\"Vous n'avez pas la permission d'effectuer des remboursements.\");return;}if(loan.status!=='approved'){alert(\"Seuls les prêts approuvés peuvent faire l'objet de remboursements.\");return;}setSelectedLoanForRepayment(loan);setNewRepayment({...initialRepaymentFormState,loan_request:loan.id,amount:(_loan$minimum_monthly=loan.minimum_monthly_payment)!==null&&_loan$minimum_monthly!==void 0?_loan$minimum_monthly:0});setFormError('');setIsRepaymentModalOpen(true);};const handleSaveRepayment=async()=>{if(!selectedLoanForRepayment||!repaymentCalculations||repaymentCalculations.error){setFormError((repaymentCalculations===null||repaymentCalculations===void 0?void 0:repaymentCalculations.error)||\"Veuillez vérifier les données saisies.\");return;}if(newRepayment.amount<=0){setFormError(\"Le montant doit être positif.\");return;}setIsSubmitting(true);setFormError('');try{const repaymentData={loan_request:newRepayment.loan_request,amount:newRepayment.amount,payment_type:newRepayment.payment_type,notes:newRepayment.notes,capital_amount:repaymentCalculations.capitalAmount,interest_amount:repaymentCalculations.interestAmount};const response=await fetch(`${API_BASE_URL}/loan-repayments/`,{method:'POST',headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`,'Content-Type':'application/json'},body:JSON.stringify(repaymentData)});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Erreur lors de la création du remboursement');}await fetchLoans();await fetchRepayments();setIsRepaymentModalOpen(false);alert('Remboursement effectué avec succès !');}catch(err){setFormError(err instanceof Error?err.message:'Erreur lors du remboursement');console.error('Erreur lors du remboursement:',err);}finally{setIsSubmitting(false);}};const getMemberName=memberId=>{const member=members.find(m=>m.id===memberId);return member?`${member.user.first_name} ${member.user.last_name}`:'Membre inconnu';};const getGuarantorNames=guarantorIds=>{return guarantorIds.map(id=>getMemberName(id)).join(', ');};// --- PERMISSIONS D'AFFICHAGE ---\nconst canViewStats=hasPermission('view_reports')||hasPermission('approve_loans');const canAddLoans=hasPermission('add_loan_requests');const canApproveLoans=hasPermission('approve_loans');const canAddRepayments=hasPermission('add_repayments')||hasPermission('manage_loans');// --- AFFICHAGE DE L'ERREUR ---\nif(error&&!loading){return/*#__PURE__*/_jsx(\"div\",{style:styles.page,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.errorContainer,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Erreur de chargement\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchLoans,style:styles.button,children:\"R\\xE9essayer\"})]})});}// --- RENDU PRINCIPAL ---\nreturn/*#__PURE__*/_jsxs(\"div\",{style:styles.page,children:[/*#__PURE__*/_jsxs(\"header\",{style:styles.header,children:[/*#__PURE__*/_jsxs(\"h2\",{style:styles.headerTitle,children:[\"Gestion des Pr\\xEAts & Remboursements\",loading&&/*#__PURE__*/_jsx(\"span\",{style:styles.loadingText,children:\" (Chargement...)\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),style:{...styles.button,backgroundColor:'#6b7280'},children:\"\\u2190 Retour\"})]}),canViewStats&&/*#__PURE__*/_jsxs(\"section\",{style:styles.statSection,children:[/*#__PURE__*/_jsx(StatCard,{title:\"Solde des Pr\\xEAts Actifs\",value:`${((_loanStats$activeLoan=loanStats.activeLoanAmount)!==null&&_loanStats$activeLoan!==void 0?_loanStats$activeLoan:0).toLocaleString()} XAF`}),/*#__PURE__*/_jsx(StatCard,{title:\"Demandes en Attente\",value:loanStats.pendingCount}),/*#__PURE__*/_jsx(StatCard,{title:\"Total Rembours\\xE9\",value:`${((_loanStats$repaidAmou=loanStats.repaidAmount)!==null&&_loanStats$repaidAmou!==void 0?_loanStats$repaidAmou:0).toLocaleString()} XAF`})]}),/*#__PURE__*/_jsxs(\"section\",{style:styles.tabSection,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('loans'),style:{...styles.tabButton,...(activeTab==='loans'?styles.activeTab:styles.inactiveTab)},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faMoneyBillWave,style:{marginRight:'8px'}}),\"Pr\\xEAts\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setActiveTab('repayments'),style:{...styles.tabButton,...(activeTab==='repayments'?styles.activeTab:styles.inactiveTab)},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faHistory,style:{marginRight:'8px'}}),\"Remboursements\"]})]}),activeTab==='loans'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"section\",{style:styles.controlsSection,children:canAddLoans&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleOpenLoanModal,style:styles.button,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPlus,style:{marginRight:'8px'}}),\"Faire une Demande de Pr\\xEAt\"]})}),loading?/*#__PURE__*/_jsx(\"div\",{style:styles.loadingContainer,children:/*#__PURE__*/_jsx(\"p\",{children:\"Chargement des pr\\xEAts...\"})}):loans.length===0?/*#__PURE__*/_jsxs(\"div\",{style:styles.emptyState,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Aucune demande de pr\\xEAt trouv\\xE9e.\"}),canAddLoans&&/*#__PURE__*/_jsx(\"p\",{children:\"Commencez par faire votre premi\\xE8re demande !\"})]}):isMobile?/*#__PURE__*/_jsx(MobileLoanList,{loans:loans,members:members,hasPermission:hasPermission,onStatusUpdate:handleStatusUpdate,onRepayment:handleOpenRepaymentModal,getMemberName:getMemberName,getGuarantorNames:getGuarantorNames,canAddRepayments:canAddRepayments}):/*#__PURE__*/_jsx(DesktopLoanTable,{loans:loans,members:members,hasPermission:hasPermission,onStatusUpdate:handleStatusUpdate,onRepayment:handleOpenRepaymentModal,getMemberName:getMemberName,getGuarantorNames:getGuarantorNames,canAddRepayments:canAddRepayments})]}):/*#__PURE__*/_jsx(RepaymentSection,{repayments:repayments,loading:loading,isMobile:isMobile}),!canAddLoans&&!canAddRepayments&&/*#__PURE__*/_jsx(\"div\",{style:styles.permissionInfo,children:/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Information :\"}),\" Vous pouvez consulter les pr\\xEAts et remboursements mais pas en effectuer. Contactez le Comit\\xE9 de Gestion pour plus d'informations.\"]})}),isLoanModalOpen&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modalContent,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.modalTitle,children:\"Nouvelle Demande de Pr\\xEAt\"}),formError&&/*#__PURE__*/_jsx(\"p\",{style:styles.formError,children:formError}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalForm,children:[hasPermission('create_loan_for_others')?/*#__PURE__*/_jsxs(ModalSelect,{label:\"Membre demandeur\",value:newLoanRequest.member,onChange:e=>setNewLoanRequest({...newLoanRequest,member:parseInt(e.target.value)}),disabled:isSubmitting,children:[/*#__PURE__*/_jsx(\"option\",{value:0,disabled:true,children:\"S\\xE9lectionner un membre...\"}),members.map(m=>/*#__PURE__*/_jsxs(\"option\",{value:m.id,children:[m.user.first_name,\" \",m.user.last_name,\" (\",m.berry_score,\" pts Berry)\"]},m.id))]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.modalLabel,children:\"Membre demandeur\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.disabledInput,children:selectedMember?`${selectedMember.user.first_name} ${selectedMember.user.last_name}`:'Membre Actuel'})]}),selectedMember&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ModalInput,{label:\"Montant souhait\\xE9 (XAF)\",type:\"number\",step:\"1000\",value:newLoanRequest.amount,onChange:e=>setNewLoanRequest({...newLoanRequest,amount:parseFloat(e.target.value)||0}),disabled:isSubmitting}),loanDetails&&/*#__PURE__*/_jsxs(\"div\",{style:styles.loanDetailsBox,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Plafond de pr\\xEAt: \",/*#__PURE__*/_jsxs(\"strong\",{children:[((_loanDetails$maxAmoun=loanDetails.maxAmount)!==null&&_loanDetails$maxAmoun!==void 0?_loanDetails$maxAmoun:0).toLocaleString(),\" XAF\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Taux d'int\\xE9r\\xEAt: \",/*#__PURE__*/_jsxs(\"strong\",{children:[loanDetails.interestRate,\"%\"]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total \\xE0 rembourser: \",/*#__PURE__*/_jsxs(\"strong\",{children:[((_loanDetails$totalToR=loanDetails.totalToRepay)!==null&&_loanDetails$totalToR!==void 0?_loanDetails$totalToR:0).toLocaleString(),\" XAF\"]})]}),loanDetails.error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'#ef4444'},children:loanDetails.error})]}),/*#__PURE__*/_jsx(ModalTextarea,{label:\"Motif de la demande (urgence av\\xE9r\\xE9e)\",value:newLoanRequest.justification,onChange:e=>setNewLoanRequest({...newLoanRequest,justification:e.target.value}),placeholder:\"D\\xE9crivez pr\\xE9cis\\xE9ment la nature de votre urgence...\",disabled:isSubmitting}),/*#__PURE__*/_jsxs(ModalSelect,{label:\"Avaliseur / Garant 1\",value:guarantor1Id,onChange:e=>setGuarantor1Id(parseInt(e.target.value)),disabled:isSubmitting,children:[/*#__PURE__*/_jsx(\"option\",{value:0,disabled:true,children:\"S\\xE9lectionner...\"}),members.filter(m=>m.id!==newLoanRequest.member).map(m=>/*#__PURE__*/_jsxs(\"option\",{value:m.id,children:[m.user.first_name,\" \",m.user.last_name]},m.id))]}),/*#__PURE__*/_jsxs(ModalSelect,{label:\"Avaliseur / Garant 2\",value:guarantor2Id,onChange:e=>setGuarantor2Id(parseInt(e.target.value)),disabled:isSubmitting,children:[/*#__PURE__*/_jsx(\"option\",{value:0,disabled:true,children:\"S\\xE9lectionner...\"}),members.filter(m=>m.id!==newLoanRequest.member).map(m=>/*#__PURE__*/_jsxs(\"option\",{value:m.id,children:[m.user.first_name,\" \",m.user.last_name]},m.id))]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalActions,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsLoanModalOpen(false),style:{...styles.button,backgroundColor:'#6b7280'},disabled:isSubmitting,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveLoanRequest,style:styles.button,disabled:isSubmitting,children:isSubmitting?'Soumission...':'Soumettre la Demande'})]})]})}),isRepaymentModalOpen&&selectedLoanForRepayment&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modalContent,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.modalTitle,children:\"Effectuer un Remboursement\"}),formError&&/*#__PURE__*/_jsx(\"p\",{style:styles.formError,children:formError}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalForm,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.loanInfoBox,children:[/*#__PURE__*/_jsxs(\"h4\",{children:[\"Informations du Pr\\xEAt #\",selectedLoanForRepayment.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Emprunteur :\"}),\" \",selectedLoanForRepayment.member_name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Montant initial :\"}),\" \",((_selectedLoanForRepay=selectedLoanForRepayment.amount)!==null&&_selectedLoanForRepay!==void 0?_selectedLoanForRepay:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Solde restant :\"}),\" \",((_selectedLoanForRepay2=selectedLoanForRepayment.remaining_balance)!==null&&_selectedLoanForRepay2!==void 0?_selectedLoanForRepay2:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Capital restant :\"}),\" \",((_selectedLoanForRepay3=selectedLoanForRepayment.remaining_capital)!==null&&_selectedLoanForRepay3!==void 0?_selectedLoanForRepay3:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Int\\xE9r\\xEAts restants :\"}),\" \",((_selectedLoanForRepay4=selectedLoanForRepayment.remaining_interest)!==null&&_selectedLoanForRepay4!==void 0?_selectedLoanForRepay4:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Paiement minimum :\"}),\" \",((_selectedLoanForRepay5=selectedLoanForRepayment.minimum_monthly_payment)!==null&&_selectedLoanForRepay5!==void 0?_selectedLoanForRepay5:0).toLocaleString(),\" XAF\"]})]}),/*#__PURE__*/_jsxs(ModalSelect,{label:\"Type de remboursement\",value:newRepayment.payment_type,onChange:e=>setNewRepayment({...newRepayment,payment_type:e.target.value}),disabled:isSubmitting,children:[/*#__PURE__*/_jsx(\"option\",{value:\"partial\",children:\"Remboursement partiel\"}),/*#__PURE__*/_jsx(\"option\",{value:\"interest_only\",children:\"Int\\xE9r\\xEAts uniquement\"}),/*#__PURE__*/_jsx(\"option\",{value:\"full\",children:\"Remboursement complet\"})]}),/*#__PURE__*/_jsx(ModalInput,{label:\"Montant \\xE0 rembourser (XAF)\",type:\"number\",step:\"100\",value:newRepayment.amount,onChange:e=>setNewRepayment({...newRepayment,amount:parseFloat(e.target.value)||0}),disabled:isSubmitting}),repaymentCalculations&&/*#__PURE__*/_jsxs(\"div\",{style:styles.calculationBox,children:[/*#__PURE__*/_jsxs(\"h4\",{children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCalculator}),\" R\\xE9partition du remboursement :\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Capital :\"}),\" \",((_repaymentCalculation=repaymentCalculations.capitalAmount)!==null&&_repaymentCalculation!==void 0?_repaymentCalculation:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Int\\xE9r\\xEAts :\"}),\" \",((_repaymentCalculation2=repaymentCalculations.interestAmount)!==null&&_repaymentCalculation2!==void 0?_repaymentCalculation2:0).toLocaleString(),\" XAF\"]}),repaymentCalculations.error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'#ef4444'},children:repaymentCalculations.error})]}),/*#__PURE__*/_jsx(ModalTextarea,{label:\"Notes (optionnel)\",value:newRepayment.notes,onChange:e=>setNewRepayment({...newRepayment,notes:e.target.value}),placeholder:\"Notes sur ce remboursement...\",disabled:isSubmitting})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalActions,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsRepaymentModalOpen(false),style:{...styles.button,backgroundColor:'#6b7280'},disabled:isSubmitting,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveRepayment,style:styles.button,disabled:isSubmitting||(repaymentCalculations!==null&&repaymentCalculations!==void 0&&repaymentCalculations.error?true:false),children:isSubmitting?'Traitement...':'Effectuer le Remboursement'})]})]})})]});};// --- COMPOSANTS SPÉCIALISÉS ---\n// Section Remboursements\nconst RepaymentSection=_ref=>{let{repayments,loading,isMobile}=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{marginBottom:'16px',color:'#1f2937'},children:\"Historique des Remboursements\"}),loading?/*#__PURE__*/_jsx(\"div\",{style:styles.loadingContainer,children:/*#__PURE__*/_jsx(\"p\",{children:\"Chargement des remboursements...\"})}):repayments.length===0?/*#__PURE__*/_jsx(\"div\",{style:styles.emptyState,children:/*#__PURE__*/_jsx(\"p\",{children:\"Aucun remboursement enregistr\\xE9.\"})}):isMobile?/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'16px'},children:repayments.map(repayment=>{var _repayment$amount,_repayment$capital_am,_repayment$interest_a;return/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCard,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardHeader,children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'bold'},children:[\"Pr\\xEAt #\",repayment.loan_request,\" - \",repayment.loan_member_name]}),/*#__PURE__*/_jsx(\"span\",{style:{...styles.chip,backgroundColor:'#dcfce7',color:'#166534'},children:LoanService.getPaymentTypeDisplayName(repayment.payment_type)})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardBody,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Montant:\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[((_repayment$amount=repayment.amount)!==null&&_repayment$amount!==void 0?_repayment$amount:0).toLocaleString(),\" XAF\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Capital:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[((_repayment$capital_am=repayment.capital_amount)!==null&&_repayment$capital_am!==void 0?_repayment$capital_am:0).toLocaleString(),\" XAF\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Int\\xE9r\\xEAts:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[((_repayment$interest_a=repayment.interest_amount)!==null&&_repayment$interest_a!==void 0?_repayment$interest_a:0).toLocaleString(),\" XAF\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Date:\"}),/*#__PURE__*/_jsx(\"span\",{children:new Date(repayment.date).toLocaleDateString('fr-FR')})]}),repayment.processed_by_name&&/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Trait\\xE9 par:\"}),/*#__PURE__*/_jsx(\"span\",{children:repayment.processed_by_name})]})]})]},repayment.id);})}):/*#__PURE__*/_jsx(\"div\",{style:styles.tableContainer,children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Pr\\xEAt\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Emprunteur\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Montant\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Capital\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Int\\xE9r\\xEAts\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Trait\\xE9 par\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:repayments.map(repayment=>{var _repayment$amount2,_repayment$capital_am2,_repayment$interest_a2;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[\"#\",repayment.loan_request]}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:repayment.loan_member_name}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[((_repayment$amount2=repayment.amount)!==null&&_repayment$amount2!==void 0?_repayment$amount2:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[((_repayment$capital_am2=repayment.capital_amount)!==null&&_repayment$capital_am2!==void 0?_repayment$capital_am2:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[((_repayment$interest_a2=repayment.interest_amount)!==null&&_repayment$interest_a2!==void 0?_repayment$interest_a2:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsx(\"span\",{style:{...styles.chip,backgroundColor:'#dcfce7',color:'#166534'},children:LoanService.getPaymentTypeDisplayName(repayment.payment_type)})}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:new Date(repayment.date).toLocaleDateString('fr-FR')}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:repayment.processed_by_name||'-'})]},repayment.id);})})]})})]});};// --- VUES DESKTOP & MOBILE POUR LES PRÊTS ---\nconst DesktopLoanTable=_ref2=>{let{loans,members,hasPermission,onStatusUpdate,onRepayment,getMemberName,getGuarantorNames,canAddRepayments}=_ref2;return/*#__PURE__*/_jsx(\"div\",{style:styles.tableContainer,children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Membre\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Montant\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Solde\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Progression\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loans.map(loan=>{var _loan$total_amount_wi,_loan$total_repaid,_loan$amount,_loan$remaining_balan;const totalToRepay=(_loan$total_amount_wi=loan.total_amount_with_interest)!==null&&_loan$total_amount_wi!==void 0?_loan$total_amount_wi:0;const totalRepaid=(_loan$total_repaid=loan.total_repaid)!==null&&_loan$total_repaid!==void 0?_loan$total_repaid:0;const progressPercentage=totalToRepay>0?(totalRepaid/totalToRepay*100).toFixed(1):\"0.0\";return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:loan.member_name}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[((_loan$amount=loan.amount)!==null&&_loan$amount!==void 0?_loan$amount:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:loan.status==='approved'?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[((_loan$remaining_balan=loan.remaining_balance)!==null&&_loan$remaining_balan!==void 0?_loan$remaining_balan:0).toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#6b7280'},children:[\"sur \",totalToRepay.toLocaleString(),\" XAF\"]})]}):loan.status==='repaid'?'0 XAF':'-'}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:(loan.status==='approved'||loan.status==='repaid')&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'100px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:'#e5e7eb',borderRadius:'4px',height:'8px',overflow:'hidden'},children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:loan.is_fully_repaid?'#22c55e':'#3b82f6',height:'100%',width:`${progressPercentage}%`,transition:'width 0.3s ease'}})}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',marginTop:'2px',textAlign:'center'},children:[progressPercentage,\"%\"]})]})}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsx(StatusChip,{status:LoanService.getStatusDisplayName(loan.status)})}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px',flexWrap:'wrap'},children:[loan.status==='pending'&&hasPermission('approve_loans')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onStatusUpdate(loan.id,'approved'),style:{...styles.actionButton,backgroundColor:'#22c55e'},title:\"Approuver\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCheck})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onStatusUpdate(loan.id,'rejected'),style:{...styles.actionButton,backgroundColor:'#ef4444'},title:\"Rejeter\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes})})]}),loan.status==='approved'&&!loan.is_fully_repaid&&canAddRepayments&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRepayment(loan),style:{...styles.actionButton,backgroundColor:'#3b82f6'},title:\"Rembourser\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faMoneyBillWave})})]})})]},loan.id);})})]})});};const MobileLoanList=_ref3=>{let{loans,members,hasPermission,onStatusUpdate,onRepayment,getMemberName,getGuarantorNames,canAddRepayments}=_ref3;return/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'16px'},children:loans.map(loan=>{var _loan$total_amount_wi2,_loan$total_repaid2,_loan$amount2,_loan$remaining_balan2;const totalToRepay=(_loan$total_amount_wi2=loan.total_amount_with_interest)!==null&&_loan$total_amount_wi2!==void 0?_loan$total_amount_wi2:0;const totalRepaid=(_loan$total_repaid2=loan.total_repaid)!==null&&_loan$total_repaid2!==void 0?_loan$total_repaid2:0;const progressPercentage=totalToRepay>0?(totalRepaid/totalToRepay*100).toFixed(1):\"0.0\";return/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCard,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardHeader,children:[/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'bold',color:'#1f2937'},children:loan.member_name}),/*#__PURE__*/_jsx(StatusChip,{status:LoanService.getStatusDisplayName(loan.status)})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardBody,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Montant initial:\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[((_loan$amount2=loan.amount)!==null&&_loan$amount2!==void 0?_loan$amount2:0).toLocaleString(),\" XAF\"]})]}),(loan.status==='approved'||loan.status==='repaid')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Solde restant:\"}),/*#__PURE__*/_jsxs(\"strong\",{style:{color:loan.is_fully_repaid?'#22c55e':'#ef4444'},children:[((_loan$remaining_balan2=loan.remaining_balance)!==null&&_loan$remaining_balan2!==void 0?_loan$remaining_balan2:0).toLocaleString(),\" XAF\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Progression:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[progressPercentage,\"% rembours\\xE9\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardFooter,children:[loan.status==='pending'&&hasPermission('approve_loans')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onStatusUpdate(loan.id,'approved'),style:{...styles.button,flex:1,backgroundColor:'#22c55e'},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCheck,style:{marginRight:'8px'}}),\"Approuver\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onStatusUpdate(loan.id,'rejected'),style:{...styles.button,flex:1,backgroundColor:'#ef4444'},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes,style:{marginRight:'8px'}}),\"Rejeter\"]})]}),loan.status==='approved'&&!loan.is_fully_repaid&&canAddRepayments&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onRepayment(loan),style:{...styles.button,flex:1,backgroundColor:'#3b82f6'},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faMoneyBillWave,style:{marginRight:'8px'}}),\"Rembourser\"]})]})]},loan.id);})});};// --- SOUS-COMPOSANTS & STYLES ---\nconst StatCard=_ref4=>{let{title,value}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{style:{...styles.card,flex:'1 1 250px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h4\",{style:styles.statTitle,children:title}),/*#__PURE__*/_jsx(\"p\",{style:styles.statValue,children:value})]});};const StatusChip=_ref5=>{let{status}=_ref5;const statusColors={'En attente':{backgroundColor:'#fef3c7',color:'#92400e'},'Approuvé':{backgroundColor:'#dcfce7',color:'#166534'},'Rejeté':{backgroundColor:'#fee2e2',color:'#991b1b'},'Remboursé':{backgroundColor:'#e0e7ff',color:'#3730a3'}};return/*#__PURE__*/_jsx(\"span\",{style:{...styles.chip,...statusColors[status]},children:status});};const ModalInput=_ref6=>{let{label,...props}=_ref6;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.modalLabel,children:label}),/*#__PURE__*/_jsx(\"input\",{style:styles.modalInput,...props})]});};const ModalSelect=_ref7=>{let{label,children,...props}=_ref7;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.modalLabel,children:label}),/*#__PURE__*/_jsx(\"select\",{style:styles.modalInput,...props,children:children})]});};const ModalTextarea=_ref8=>{let{label,...props}=_ref8;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.modalLabel,children:label}),/*#__PURE__*/_jsx(\"textarea\",{style:{...styles.modalInput,height:'80px'},...props})]});};const styles={page:{fontFamily:'Arial, sans-serif',padding:'16px',backgroundColor:'#f3f4f6',minHeight:'100vh'},header:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'24px',flexWrap:'wrap',gap:'16px'},headerTitle:{fontSize:'24px',fontWeight:'bold',color:'#1f2937',margin:0},loadingText:{fontSize:'16px',fontWeight:'normal',color:'#6b7280'},errorContainer:{textAlign:'center',padding:'40px',backgroundColor:'white',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)'},loadingContainer:{textAlign:'center',padding:'40px'},emptyState:{textAlign:'center',padding:'40px',backgroundColor:'white',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)'},statSection:{display:'flex',gap:'16px',flexWrap:'wrap',marginBottom:'24px'},card:{backgroundColor:'white',padding:'16px',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)'},statTitle:{margin:0,color:'#4b5563',fontSize:'14px',fontWeight:'600'},statValue:{margin:'8px 0 0 0',color:'#1e3a8a',fontSize:'22px',fontWeight:'bold'},// Styles des onglets\ntabSection:{display:'flex',marginBottom:'24px',backgroundColor:'white',borderRadius:'12px',overflow:'hidden',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)'},tabButton:{flex:1,padding:'12px 24px',border:'none',fontSize:'14px',fontWeight:'600',cursor:'pointer',transition:'all 0.2s',display:'flex',alignItems:'center',justifyContent:'center'},activeTab:{backgroundColor:'#3b82f6',color:'white'},inactiveTab:{backgroundColor:'white',color:'#6b7280'},controlsSection:{marginBottom:'24px'},button:{padding:'10px 16px',backgroundColor:'#2563eb',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'600',display:'flex',alignItems:'center',justifyContent:'center',transition:'background-color 0.2s',fontSize:'14px'},permissionInfo:{backgroundColor:'#e0f2fe',padding:'12px',borderRadius:'8px',marginTop:'16px',border:'1px solid #0891b2'},tableContainer:{backgroundColor:'white',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)',overflowX:'auto'},table:{width:'100%',borderCollapse:'collapse'},th:{padding:'12px 16px',textAlign:'left',fontSize:'14px',color:'#4b5563',backgroundColor:'#f9fafb',borderBottom:'1px solid #e5e7eb',fontWeight:'600'},td:{padding:'12px 16px',fontSize:'14px',color:'#374151',borderBottom:'1px solid #e5e7eb',verticalAlign:'middle'},chip:{padding:'4px 12px',borderRadius:'9999px',fontWeight:'600',fontSize:'12px'},actionButton:{padding:'8px 12px',border:'none',borderRadius:'6px',color:'white',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'14px',fontWeight:'bold'},// Styles des modals\nmodalOverlay:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0, 0, 0, 0.6)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:1000,padding:'16px'},modalContent:{backgroundColor:'white',padding:'24px',borderRadius:'12px',width:'100%',maxWidth:'600px',boxShadow:'0 8px 16px rgba(0, 0, 0, 0.2)',maxHeight:'90vh',display:'flex',flexDirection:'column'},modalTitle:{fontSize:'22px',fontWeight:'bold',marginBottom:'24px',color:'#1f2937',flexShrink:0,textAlign:'center'},modalForm:{flexGrow:1,overflowY:'auto',paddingRight:'12px',marginRight:'-12px',display:'flex',flexDirection:'column',gap:'16px'},modalLabel:{display:'block',marginBottom:'8px',fontWeight:'600',color:'#374151',fontSize:'14px'},modalInput:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'8px',boxSizing:'border-box',fontSize:'16px'},disabledInput:{width:'100%',padding:'10px',border:'1px solid #e5e7eb',backgroundColor:'#f9fafb',color:'#6b7280',borderRadius:'8px',boxSizing:'border-box',fontSize:'16px'},modalActions:{display:'flex',justifyContent:'flex-end',gap:'12px',marginTop:'24px',flexShrink:0},formError:{color:'#ef4444',backgroundColor:'#fee2e2',padding:'10px',borderRadius:'8px',textAlign:'center',marginBottom:'16px'},// Styles spécifiques aux remboursements\nloanDetailsBox:{backgroundColor:'#f3f4f6',padding:'12px',borderRadius:'8px',fontSize:'14px',lineHeight:1.6,borderLeft:'4px solid #3b82f6'},loanInfoBox:{backgroundColor:'#f0f9ff',padding:'16px',borderRadius:'8px',fontSize:'14px',lineHeight:1.6,borderLeft:'4px solid #0ea5e9'},calculationBox:{backgroundColor:'#f0fdf4',padding:'12px',borderRadius:'8px',fontSize:'14px',lineHeight:1.6,borderLeft:'4px solid #22c55e'},// Styles mobile\nmobileCard:{backgroundColor:'white',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)',overflow:'hidden'},mobileCardHeader:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'12px 16px',backgroundColor:'#f9fafb',borderBottom:'1px solid #e5e7eb'},mobileCardBody:{padding:'16px',display:'flex',flexDirection:'column',gap:'10px'},mobileCardRow:{display:'flex',justifyContent:'space-between',fontSize:'14px'},mobileCardFooter:{padding:'12px 16px',backgroundColor:'#f9fafb',borderTop:'1px solid #e5e7eb',display:'flex',gap:'12px'}};export default Loans;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useAuth","useNavigate","FontAwesomeIcon","faPlus","faCheck","faTimes","faMoneyBillWave","faHistory","faCalculator","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","safeFormatNumber","value","undefined","isNaN","toLocaleString","useWindowSize","size","setSize","window","innerWidth","handleResize","addEventListener","removeEventListener","width","MOBILE_BREAKPOINT","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","LoanService","getMaxLoanAmount","berryPoints","getInterestRate","amount","calculateTotalToRepay","interestRate","getStatusDisplayName","status","statusMap","getPaymentTypeDisplayName","type","typeMap","Loans","_loanStats$activeLoan","_loanStats$repaidAmou","_loanDetails$maxAmoun","_loanDetails$totalToR","_selectedLoanForRepay","_selectedLoanForRepay2","_selectedLoanForRepay3","_selectedLoanForRepay4","_selectedLoanForRepay5","_repaymentCalculation","_repaymentCalculation2","user","hasPermission","navigate","loans","setLoans","members","setMembers","loading","setLoading","error","setError","isLoanModalOpen","setIsLoanModalOpen","isSubmitting","setIsSubmitting","formError","setFormError","repayments","setRepayments","isRepaymentModalOpen","setIsRepaymentModalOpen","selectedLoanForRepayment","setSelectedLoanForRepayment","activeTab","setActiveTab","initialLoanFormState","member","justification","guarantors","initialRepaymentFormState","loan_request","payment_type","notes","newLoanRequest","setNewLoanRequest","newRepayment","setNewRepayment","guarantor1Id","setGuarantor1Id","guarantor2Id","setGuarantor2Id","selectedMember","find","m","id","loanDetails","maxAmount","berry_score","totalToRepay","repaymentCalculations","loan","capitalAmount","interestAmount","remaining_balance","remaining_interest","minimum_monthly_payment","remaining_capital","loanStats","pendingCount","filter","l","length","activeLoanAmount","reduce","sum","_l$remaining_balance","repaidAmount","_l$total_repaid","total_repaid","fetchLoans","response","fetch","headers","token","ok","Error","data","json","err","message","console","fetchRepayments","fetchMembers","isMobile","style","styles","page","children","errorContainer","handleOpenLoanModal","alert","currentMember","parseInt","handleStatusUpdate","method","body","JSON","stringify","handleSaveLoanRequest","loanData","interest_rate","errorData","handleOpenRepaymentModal","_loan$minimum_monthly","handleSaveRepayment","repaymentData","capital_amount","interest_amount","getMemberName","memberId","first_name","last_name","getGuarantorNames","guarantorIds","map","join","canViewStats","canAddLoans","canApproveLoans","canAddRepayments","onClick","button","header","headerTitle","loadingText","backgroundColor","statSection","StatCard","title","tabSection","tabButton","inactiveTab","icon","marginRight","controlsSection","loadingContainer","emptyState","MobileLoanList","onStatusUpdate","onRepayment","DesktopLoanTable","RepaymentSection","permissionInfo","modalOverlay","modalContent","modalTitle","modalForm","ModalSelect","label","onChange","e","target","disabled","modalLabel","disabledInput","ModalInput","step","parseFloat","loanDetailsBox","color","ModalTextarea","placeholder","modalActions","loanInfoBox","member_name","calculationBox","_ref","marginBottom","display","flexDirection","gap","repayment","_repayment$amount","_repayment$capital_am","_repayment$interest_a","mobileCard","mobileCardHeader","fontWeight","loan_member_name","chip","mobileCardBody","mobileCardRow","Date","date","toLocaleDateString","processed_by_name","tableContainer","table","th","_repayment$amount2","_repayment$capital_am2","_repayment$interest_a2","td","_ref2","_loan$total_amount_wi","_loan$total_repaid","_loan$amount","_loan$remaining_balan","total_amount_with_interest","totalRepaid","progressPercentage","toFixed","fontSize","borderRadius","height","overflow","is_fully_repaid","transition","marginTop","textAlign","StatusChip","flexWrap","actionButton","_ref3","_loan$total_amount_wi2","_loan$total_repaid2","_loan$amount2","_loan$remaining_balan2","mobileCardFooter","flex","_ref4","card","statTitle","statValue","_ref5","statusColors","_ref6","props","modalInput","_ref7","_ref8","fontFamily","padding","minHeight","justifyContent","alignItems","margin","boxShadow","border","cursor","overflowX","borderCollapse","borderBottom","verticalAlign","position","top","left","right","bottom","zIndex","maxWidth","maxHeight","flexShrink","flexGrow","overflowY","paddingRight","boxSizing","lineHeight","borderLeft","borderTop"],"sources":["D:/Projects/FriendlyBanks/frontend/src/components/Loans.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, ReactNode, InputHTMLAttributes, SelectHTMLAttributes, TextareaHTMLAttributes, ChangeEvent } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faCheck, faTimes, faMoneyBillWave, faHistory, faCalculator } from '@fortawesome/free-solid-svg-icons';\r\n\r\n// Ajoutez après les imports FontAwesome, avant le hook useWindowSize\r\nconst safeFormatNumber = (value: number | undefined | null): string => {\r\n  if (value === null || value === undefined || isNaN(value)) {\r\n    return '0';\r\n  }\r\n  return value.toLocaleString();\r\n};\r\n\r\n// --- HOOK POUR LA RESPONSIVITÉ ---\r\nconst useWindowSize = () => {\r\n  const [size, setSize] = useState([window.innerWidth]);\r\n  useEffect(() => {\r\n    const handleResize = () => setSize([window.innerWidth]);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n  return { width: size[0] };\r\n};\r\n\r\n// --- INTERFACES ADAPTÉES À L'API DJANGO ---\r\ninterface ApiLoanRequest {\r\n  id: number;\r\n  member: number;\r\n  member_name: string;\r\n  amount: number;\r\n  justification: string;\r\n  date_requested: string;\r\n  status: 'pending' | 'approved' | 'rejected' | 'repaid';\r\n  interest_rate: number;\r\n  repayment_due_date: string | null;\r\n  guarantors: number[];\r\n  guarantor_names: string[];\r\n  \r\n  // Champs calculés pour le remboursement\r\n  total_amount_with_interest: number;\r\n  total_repaid: number;\r\n  remaining_balance: number;\r\n  capital_repaid: number;\r\n  interest_repaid: number;\r\n  remaining_capital: number;\r\n  remaining_interest: number;\r\n  is_fully_repaid: boolean;\r\n  minimum_monthly_payment: number;\r\n  repayments: ApiLoanRepayment[];\r\n}\r\n\r\ninterface ApiLoanRepayment {\r\n  id: number;\r\n  loan_request: number;\r\n  amount: number;\r\n  capital_amount: number;\r\n  interest_amount: number;\r\n  payment_type: 'partial' | 'interest_only' | 'full';\r\n  date: string;\r\n  notes: string;\r\n  processed_by_name: string;\r\n  loan_member_name: string;\r\n}\r\n\r\ninterface ApiMember {\r\n  id: number;\r\n  user: {\r\n    id: number;\r\n    username: string;\r\n    email: string;\r\n    first_name: string;\r\n    last_name: string;\r\n    role: string;\r\n  };\r\n  berry_score: number;\r\n  shares: number;\r\n}\r\n\r\ninterface LoanFormData {\r\n  member: number;\r\n  amount: number;\r\n  justification: string;\r\n  guarantors: number[];\r\n}\r\n\r\ninterface RepaymentFormData {\r\n  loan_request: number;\r\n  amount: number;\r\n  payment_type: 'partial' | 'interest_only' | 'full';\r\n  notes: string;\r\n}\r\n\r\n// --- CONSTANTES ---\r\nconst MOBILE_BREAKPOINT = 768;\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://127.0.0.1:8000/api';\r\n\r\n// --- SERVICE DE LOGIQUE MÉTIER SELON LA CHARTE FRIENDLY BANKS ---\r\nconst LoanService = {\r\n  getMaxLoanAmount: (berryPoints: number) => {\r\n    if (berryPoints >= 10 && berryPoints <= 100) return 60000;\r\n    if (berryPoints > 100 && berryPoints <= 199) return 120000;\r\n    if (berryPoints >= 200 && berryPoints <= 499) return 300000;\r\n    if (berryPoints >= 500) return 500000;\r\n    return 0;\r\n  },\r\n  \r\n  getInterestRate: (amount: number) => {\r\n    if (amount > 0 && amount < 40000) return 10;\r\n    if (amount >= 40000 && amount < 100000) return 8;\r\n    if (amount >= 100000) return 6;\r\n    return 0;\r\n  },\r\n\r\n  calculateTotalToRepay: (amount: number, interestRate: number) => {\r\n    return amount * (1 + interestRate / 100);\r\n  },\r\n\r\n  getStatusDisplayName: (status: string) => {\r\n    const statusMap: { [key: string]: string } = {\r\n      'pending': 'En attente',\r\n      'approved': 'Approuvé',\r\n      'rejected': 'Rejeté',\r\n      'repaid': 'Remboursé'\r\n    };\r\n    return statusMap[status] || status;\r\n  },\r\n\r\n  getPaymentTypeDisplayName: (type: string) => {\r\n    const typeMap: { [key: string]: string } = {\r\n      'partial': 'Remboursement partiel',\r\n      'interest_only': 'Intérêts uniquement',\r\n      'full': 'Remboursement complet'\r\n    };\r\n    return typeMap[type] || type;\r\n  }\r\n};\r\n\r\n// --- COMPOSANT PRINCIPAL ---\r\nconst Loans: React.FC = () => {\r\n  const { user, hasPermission } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  // --- ÉTATS PRÊTS ---\r\n  const [loans, setLoans] = useState<ApiLoanRequest[]>([]);\r\n  const [members, setMembers] = useState<ApiMember[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isLoanModalOpen, setIsLoanModalOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [formError, setFormError] = useState('');\r\n  \r\n  // --- ÉTATS REMBOURSEMENTS ---\r\n  const [repayments, setRepayments] = useState<ApiLoanRepayment[]>([]);\r\n  const [isRepaymentModalOpen, setIsRepaymentModalOpen] = useState(false);\r\n  const [selectedLoanForRepayment, setSelectedLoanForRepayment] = useState<ApiLoanRequest | null>(null);\r\n  const [activeTab, setActiveTab] = useState<'loans' | 'repayments'>('loans');\r\n  \r\n  const initialLoanFormState: LoanFormData = {\r\n    member: 0,\r\n    amount: 5000,\r\n    justification: '',\r\n    guarantors: []\r\n  };\r\n  \r\n  const initialRepaymentFormState: RepaymentFormData = {\r\n    loan_request: 0,\r\n    amount: 0,\r\n    payment_type: 'partial',\r\n    notes: ''\r\n  };\r\n  \r\n  const [newLoanRequest, setNewLoanRequest] = useState(initialLoanFormState);\r\n  const [newRepayment, setNewRepayment] = useState(initialRepaymentFormState);\r\n  const [guarantor1Id, setGuarantor1Id] = useState<number>(0);\r\n  const [guarantor2Id, setGuarantor2Id] = useState<number>(0);\r\n\r\n  // --- CALCULS MEMOIZÉS ---\r\n  const selectedMember = useMemo(() => {\r\n    return members.find(m => m.id === newLoanRequest.member);\r\n  }, [newLoanRequest.member, members]);\r\n  \r\n  const loanDetails = useMemo(() => {\r\n    if (!selectedMember) return null;\r\n    \r\n    const maxAmount = LoanService.getMaxLoanAmount(selectedMember.berry_score);\r\n    const interestRate = LoanService.getInterestRate(newLoanRequest.amount);\r\n    const totalToRepay = LoanService.calculateTotalToRepay(newLoanRequest.amount, interestRate);\r\n    \r\n    let error = '';\r\n    if (newLoanRequest.amount > maxAmount) {\r\n      error = `Le montant dépasse votre plafond de prêt de ${safeFormatNumber(maxAmount)} XAF.`;\r\n    }\r\n    \r\n    return { maxAmount, interestRate, totalToRepay, error };\r\n  }, [newLoanRequest.amount, selectedMember]);\r\n\r\n  const repaymentCalculations = useMemo(() => {\r\n    if (!selectedLoanForRepayment) return null;\r\n    \r\n    const loan = selectedLoanForRepayment;\r\n    const amount = newRepayment.amount;\r\n    \r\n    if (amount <= 0) return null;\r\n    \r\n    let capitalAmount = 0;\r\n    let interestAmount = 0;\r\n    let error = '';\r\n    \r\n    if (amount > loan.remaining_balance) {\r\n      error = `Le montant dépasse le solde restant (${safeFormatNumber(loan.remaining_balance)} XAF)`;\r\n    } else if (newRepayment.payment_type === 'interest_only') {\r\n      if (amount > loan.remaining_interest) {\r\n        error = `Le montant dépasse les intérêts restants (${safeFormatNumber(loan.remaining_interest)} XAF)`;\r\n      } else {\r\n        interestAmount = amount;\r\n        capitalAmount = 0;\r\n      }\r\n    } else {\r\n      // Remboursement partiel ou complet\r\n      if (amount <= loan.remaining_interest) {\r\n        interestAmount = amount;\r\n        capitalAmount = 0;\r\n      } else {\r\n        interestAmount = loan.remaining_interest;\r\n        capitalAmount = amount - loan.remaining_interest;\r\n        \r\n        // Vérifier le minimum de 10% du capital pour les remboursements de capital\r\n        if (capitalAmount > 0 && capitalAmount < loan.minimum_monthly_payment && loan.remaining_capital > loan.minimum_monthly_payment) {\r\n          error = `Le remboursement de capital doit être d'au moins ${safeFormatNumber(loan.minimum_monthly_payment)} XAF (10% du capital restant)`;\r\n        }\r\n      }\r\n    }\r\n    \r\n    return { capitalAmount, interestAmount, error };\r\n  }, [newRepayment.amount, newRepayment.payment_type, selectedLoanForRepayment]);\r\n\r\n  const loanStats = useMemo(() => ({\r\n    pendingCount: loans.filter(l => l.status === 'pending').length,\r\n    activeLoanAmount: loans.filter(l => l.status === 'approved').reduce((sum, l) => sum + (l.remaining_balance ?? 0), 0),\r\n    repaidAmount: loans.reduce((sum, l) => sum + (l.total_repaid ?? 0), 0),\r\n  }), [loans]);\r\n  \r\n  // --- FONCTIONS API ---\r\n  const fetchLoans = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const response = await fetch(`${API_BASE_URL}/loan-requests/`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${user?.token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Erreur HTTP: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setLoans(data);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Erreur lors du chargement des prêts');\r\n      console.error('Erreur lors du chargement des prêts:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const fetchRepayments = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/loan-repayments/`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${user?.token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Erreur HTTP: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setRepayments(data);\r\n    } catch (err) {\r\n      console.error('Erreur lors du chargement des remboursements:', err);\r\n    }\r\n  };\r\n\r\n  const fetchMembers = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/members/`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${user?.token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Erreur HTTP: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setMembers(data);\r\n    } catch (err) {\r\n      console.error('Erreur lors du chargement des membres:', err);\r\n    }\r\n  };\r\n\r\n  // Charger les données au montage du composant\r\n  useEffect(() => {\r\n    if (user?.token) {\r\n      fetchLoans();\r\n      fetchRepayments();\r\n      fetchMembers();\r\n    }\r\n  }, [user?.token]);\r\n\r\n  const { width } = useWindowSize();\r\n  const isMobile = width < MOBILE_BREAKPOINT;\r\n\r\n  // --- VÉRIFICATION DES PERMISSIONS ---\r\n  if (!hasPermission('view_loans')) {\r\n    return (\r\n      <div style={styles.page}>\r\n        <div style={styles.errorContainer}>\r\n          <h3>Accès refusé</h3>\r\n          <p>Vous n'avez pas la permission de consulter les prêts.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- GESTIONNAIRES D'ÉVÉNEMENTS PRÊTS ---\r\n  const handleOpenLoanModal = () => {\r\n    if (!hasPermission('add_loan_requests')) {\r\n      alert(\"Vous n'avez pas la permission de faire une demande de prêt.\");\r\n      return;\r\n    }\r\n\r\n    const currentMember = members.find(m => m.user.id === parseInt(user?.id || '0'));\r\n    setNewLoanRequest({\r\n      ...initialLoanFormState,\r\n      member: currentMember?.id || 0\r\n    });\r\n    setGuarantor1Id(0);\r\n    setGuarantor2Id(0);\r\n    setFormError('');\r\n    setIsLoanModalOpen(true);\r\n  };\r\n\r\n  const handleStatusUpdate = async (id: number, status: 'approved' | 'rejected') => {\r\n    if (!hasPermission('approve_loans')) {\r\n      alert(\"Vous n'avez pas la permission d'approuver des prêts.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/loan-requests/${id}/`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Authorization': `Bearer ${user?.token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ status }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Erreur lors de la mise à jour du statut');\r\n      }\r\n\r\n      await fetchLoans();\r\n      alert(`Prêt ${status === 'approved' ? 'approuvé' : 'rejeté'} avec succès`);\r\n      \r\n    } catch (err) {\r\n      console.error('Erreur lors de la mise à jour:', err);\r\n      alert('Erreur lors de la mise à jour du statut');\r\n    }\r\n  };\r\n\r\n  const handleSaveLoanRequest = async () => {\r\n    if (!selectedMember || !loanDetails || !newLoanRequest.justification || !guarantor1Id || !guarantor2Id) {\r\n      setFormError(\"Veuillez remplir tous les champs.\");\r\n      return;\r\n    }\r\n    \r\n    if (loanDetails.error) {\r\n      setFormError(loanDetails.error);\r\n      return;\r\n    }\r\n    \r\n    if (guarantor1Id === guarantor2Id || guarantor1Id === selectedMember.id || guarantor2Id === selectedMember.id) {\r\n      setFormError(\"Veuillez choisir deux avaliseurs distincts et différents de vous-même.\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setFormError('');\r\n\r\n    try {\r\n      const loanData = {\r\n        member: newLoanRequest.member,\r\n        amount: newLoanRequest.amount,\r\n        justification: newLoanRequest.justification,\r\n        guarantors: [guarantor1Id, guarantor2Id],\r\n        interest_rate: loanDetails.interestRate\r\n      };\r\n\r\n      const response = await fetch(`${API_BASE_URL}/loan-requests/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${user?.token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(loanData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Erreur lors de la création de la demande');\r\n      }\r\n\r\n      await fetchLoans();\r\n      setIsLoanModalOpen(false);\r\n      alert('Demande de prêt soumise avec succès !');\r\n      \r\n    } catch (err) {\r\n      setFormError(err instanceof Error ? err.message : 'Erreur lors de la création');\r\n      console.error('Erreur lors de la création:', err);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // --- GESTIONNAIRES D'ÉVÉNEMENTS REMBOURSEMENTS ---\r\n  const handleOpenRepaymentModal = (loan: ApiLoanRequest) => {\r\n    if (!hasPermission('add_repayments') && !hasPermission('manage_loans')) {\r\n      alert(\"Vous n'avez pas la permission d'effectuer des remboursements.\");\r\n      return;\r\n    }\r\n\r\n    if (loan.status !== 'approved') {\r\n      alert(\"Seuls les prêts approuvés peuvent faire l'objet de remboursements.\");\r\n      return;\r\n    }\r\n\r\n    setSelectedLoanForRepayment(loan);\r\n    setNewRepayment({\r\n      ...initialRepaymentFormState,\r\n      loan_request: loan.id,\r\n      amount: loan.minimum_monthly_payment ?? 0\r\n    });\r\n    setFormError('');\r\n    setIsRepaymentModalOpen(true);\r\n  };\r\n\r\n  const handleSaveRepayment = async () => {\r\n    if (!selectedLoanForRepayment || !repaymentCalculations || repaymentCalculations.error) {\r\n      setFormError(repaymentCalculations?.error || \"Veuillez vérifier les données saisies.\");\r\n      return;\r\n    }\r\n\r\n    if (newRepayment.amount <= 0) {\r\n      setFormError(\"Le montant doit être positif.\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    setFormError('');\r\n\r\n    try {\r\n      const repaymentData = {\r\n        loan_request: newRepayment.loan_request,\r\n        amount: newRepayment.amount,\r\n        payment_type: newRepayment.payment_type,\r\n        notes: newRepayment.notes,\r\n        capital_amount: repaymentCalculations.capitalAmount,\r\n        interest_amount: repaymentCalculations.interestAmount\r\n      };\r\n\r\n      const response = await fetch(`${API_BASE_URL}/loan-repayments/`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${user?.token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(repaymentData),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Erreur lors de la création du remboursement');\r\n      }\r\n\r\n      await fetchLoans();\r\n      await fetchRepayments();\r\n      setIsRepaymentModalOpen(false);\r\n      alert('Remboursement effectué avec succès !');\r\n      \r\n    } catch (err) {\r\n      setFormError(err instanceof Error ? err.message : 'Erreur lors du remboursement');\r\n      console.error('Erreur lors du remboursement:', err);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const getMemberName = (memberId: number) => {\r\n    const member = members.find(m => m.id === memberId);\r\n    return member ? `${member.user.first_name} ${member.user.last_name}` : 'Membre inconnu';\r\n  };\r\n\r\n  const getGuarantorNames = (guarantorIds: number[]) => {\r\n    return guarantorIds.map(id => getMemberName(id)).join(', ');\r\n  };\r\n\r\n  // --- PERMISSIONS D'AFFICHAGE ---\r\n  const canViewStats = hasPermission('view_reports') || hasPermission('approve_loans');\r\n  const canAddLoans = hasPermission('add_loan_requests');\r\n  const canApproveLoans = hasPermission('approve_loans');\r\n  const canAddRepayments = hasPermission('add_repayments') || hasPermission('manage_loans');\r\n\r\n  // --- AFFICHAGE DE L'ERREUR ---\r\n  if (error && !loading) {\r\n    return (\r\n      <div style={styles.page}>\r\n        <div style={styles.errorContainer}>\r\n          <h3>Erreur de chargement</h3>\r\n          <p>{error}</p>\r\n          <button onClick={fetchLoans} style={styles.button}>\r\n            Réessayer\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- RENDU PRINCIPAL ---\r\n  return (\r\n    <div style={styles.page}>\r\n      <header style={styles.header}>\r\n        <h2 style={styles.headerTitle}>\r\n          Gestion des Prêts & Remboursements\r\n          {loading && <span style={styles.loadingText}> (Chargement...)</span>}\r\n        </h2>\r\n        <button onClick={() => navigate('/')} style={{...styles.button, backgroundColor: '#6b7280'}}>\r\n          ← Retour\r\n        </button>\r\n      </header>\r\n      \r\n      {canViewStats && (\r\n        <section style={styles.statSection}>\r\n          <StatCard title=\"Solde des Prêts Actifs\" value={`${(loanStats.activeLoanAmount ?? 0).toLocaleString()} XAF`} />\r\n          <StatCard title=\"Demandes en Attente\" value={loanStats.pendingCount} />\r\n          <StatCard title=\"Total Remboursé\" value={`${(loanStats.repaidAmount ?? 0).toLocaleString()} XAF`} />\r\n        </section>\r\n      )}\r\n\r\n      {/* Onglets */}\r\n      <section style={styles.tabSection}>\r\n        <button \r\n          onClick={() => setActiveTab('loans')} \r\n          style={{\r\n            ...styles.tabButton, \r\n            ...(activeTab === 'loans' ? styles.activeTab : styles.inactiveTab)\r\n          }}\r\n        >\r\n          <FontAwesomeIcon icon={faMoneyBillWave} style={{ marginRight: '8px' }} />\r\n          Prêts\r\n        </button>\r\n        <button \r\n          onClick={() => setActiveTab('repayments')} \r\n          style={{\r\n            ...styles.tabButton, \r\n            ...(activeTab === 'repayments' ? styles.activeTab : styles.inactiveTab)\r\n          }}\r\n        >\r\n          <FontAwesomeIcon icon={faHistory} style={{ marginRight: '8px' }} />\r\n          Remboursements\r\n        </button>\r\n      </section>\r\n\r\n      {/* Contenu des onglets */}\r\n      {activeTab === 'loans' ? (\r\n        <>\r\n          <section style={styles.controlsSection}>\r\n            {canAddLoans && (\r\n              <button onClick={handleOpenLoanModal} style={styles.button}>\r\n                <FontAwesomeIcon icon={faPlus} style={{ marginRight: '8px' }} />\r\n                Faire une Demande de Prêt\r\n              </button>\r\n            )}\r\n          </section>\r\n\r\n          {loading ? (\r\n            <div style={styles.loadingContainer}>\r\n              <p>Chargement des prêts...</p>\r\n            </div>\r\n          ) : loans.length === 0 ? (\r\n            <div style={styles.emptyState}>\r\n              <p>Aucune demande de prêt trouvée.</p>\r\n              {canAddLoans && <p>Commencez par faire votre première demande !</p>}\r\n            </div>\r\n          ) : (\r\n            isMobile ? (\r\n              <MobileLoanList \r\n                loans={loans} \r\n                members={members}\r\n                hasPermission={hasPermission} \r\n                onStatusUpdate={handleStatusUpdate} \r\n                onRepayment={handleOpenRepaymentModal}\r\n                getMemberName={getMemberName}\r\n                getGuarantorNames={getGuarantorNames}\r\n                canAddRepayments={canAddRepayments}\r\n              />\r\n            ) : (\r\n              <DesktopLoanTable \r\n                loans={loans} \r\n                members={members}\r\n                hasPermission={hasPermission} \r\n                onStatusUpdate={handleStatusUpdate} \r\n                onRepayment={handleOpenRepaymentModal}\r\n                getMemberName={getMemberName}\r\n                getGuarantorNames={getGuarantorNames}\r\n                canAddRepayments={canAddRepayments}\r\n              />\r\n            )\r\n          )}\r\n        </>\r\n      ) : (\r\n        <RepaymentSection \r\n          repayments={repayments}\r\n          loading={loading}\r\n          isMobile={isMobile}\r\n        />\r\n      )}\r\n\r\n      {/* Informations sur les permissions */}\r\n      {!canAddLoans && !canAddRepayments && (\r\n        <div style={styles.permissionInfo}>\r\n          <p>\r\n            <strong>Information :</strong> Vous pouvez consulter les prêts et remboursements mais pas en effectuer. \r\n            Contactez le Comité de Gestion pour plus d'informations.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal Demande de Prêt */}\r\n      {isLoanModalOpen && (\r\n        <div style={styles.modalOverlay}>\r\n          <div style={styles.modalContent}>\r\n            <h3 style={styles.modalTitle}>Nouvelle Demande de Prêt</h3>\r\n            {formError && <p style={styles.formError}>{formError}</p>}\r\n            \r\n            <div style={styles.modalForm}>\r\n              {hasPermission('create_loan_for_others') ? (\r\n                <ModalSelect \r\n                  label=\"Membre demandeur\" \r\n                  value={newLoanRequest.member} \r\n                  onChange={(e: ChangeEvent<HTMLSelectElement>) => setNewLoanRequest({\r\n                    ...newLoanRequest, \r\n                    member: parseInt(e.target.value)\r\n                  })}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  <option value={0} disabled>Sélectionner un membre...</option>\r\n                  {members.map(m => (\r\n                    <option key={m.id} value={m.id}>\r\n                      {m.user.first_name} {m.user.last_name} ({m.berry_score} pts Berry)\r\n                    </option>\r\n                  ))}\r\n                </ModalSelect>\r\n              ) : (\r\n                <div>\r\n                  <label style={styles.modalLabel}>Membre demandeur</label>\r\n                  <div style={styles.disabledInput}>\r\n                    {selectedMember ? `${selectedMember.user.first_name} ${selectedMember.user.last_name}` : 'Membre Actuel'}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {selectedMember && (\r\n                <>\r\n                  <ModalInput \r\n                    label=\"Montant souhaité (XAF)\" \r\n                    type=\"number\" \r\n                    step=\"1000\" \r\n                    value={newLoanRequest.amount} \r\n                    onChange={(e: ChangeEvent<HTMLInputElement>) => setNewLoanRequest({\r\n                      ...newLoanRequest, \r\n                      amount: parseFloat(e.target.value) || 0\r\n                    })}\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  \r\n                  {loanDetails && (\r\n                    <div style={styles.loanDetailsBox}>\r\n                      <p>Plafond de prêt: <strong>{(loanDetails.maxAmount ?? 0).toLocaleString()} XAF</strong></p>\r\n                      <p>Taux d'intérêt: <strong>{loanDetails.interestRate}%</strong></p>\r\n                      <p>Total à rembourser: <strong>{(loanDetails.totalToRepay ?? 0).toLocaleString()} XAF</strong></p>\r\n                      {loanDetails.error && <p style={{color: '#ef4444'}}>{loanDetails.error}</p>}\r\n                    </div>\r\n                  )}\r\n                  \r\n                  <ModalTextarea \r\n                    label=\"Motif de la demande (urgence avérée)\" \r\n                    value={newLoanRequest.justification} \r\n                    onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setNewLoanRequest({\r\n                      ...newLoanRequest, \r\n                      justification: e.target.value\r\n                    })}\r\n                    placeholder=\"Décrivez précisément la nature de votre urgence...\"\r\n                    disabled={isSubmitting}\r\n                  />\r\n                  \r\n                  <ModalSelect \r\n                    label=\"Avaliseur / Garant 1\" \r\n                    value={guarantor1Id} \r\n                    onChange={(e: ChangeEvent<HTMLSelectElement>) => setGuarantor1Id(parseInt(e.target.value))}\r\n                    disabled={isSubmitting}\r\n                  >\r\n                    <option value={0} disabled>Sélectionner...</option>\r\n                    {members.filter(m => m.id !== newLoanRequest.member).map(m => (\r\n                      <option key={m.id} value={m.id}>\r\n                        {m.user.first_name} {m.user.last_name}\r\n                      </option>\r\n                    ))}\r\n                  </ModalSelect>\r\n                  \r\n                  <ModalSelect \r\n                    label=\"Avaliseur / Garant 2\" \r\n                    value={guarantor2Id} \r\n                    onChange={(e: ChangeEvent<HTMLSelectElement>) => setGuarantor2Id(parseInt(e.target.value))}\r\n                    disabled={isSubmitting}\r\n                  >\r\n                    <option value={0} disabled>Sélectionner...</option>\r\n                    {members.filter(m => m.id !== newLoanRequest.member).map(m => (\r\n                      <option key={m.id} value={m.id}>\r\n                        {m.user.first_name} {m.user.last_name}\r\n                      </option>\r\n                    ))}\r\n                  </ModalSelect>\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            <div style={styles.modalActions}>\r\n              <button \r\n                onClick={() => setIsLoanModalOpen(false)} \r\n                style={{...styles.button, backgroundColor: '#6b7280'}}\r\n                disabled={isSubmitting}\r\n              >\r\n                Annuler\r\n              </button>\r\n              <button \r\n                onClick={handleSaveLoanRequest} \r\n                style={styles.button}\r\n                disabled={isSubmitting}\r\n              >\r\n                {isSubmitting ? 'Soumission...' : 'Soumettre la Demande'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal Remboursement */}\r\n      {isRepaymentModalOpen && selectedLoanForRepayment && (\r\n        <div style={styles.modalOverlay}>\r\n          <div style={styles.modalContent}>\r\n            <h3 style={styles.modalTitle}>Effectuer un Remboursement</h3>\r\n            {formError && <p style={styles.formError}>{formError}</p>}\r\n            \r\n            <div style={styles.modalForm}>\r\n              <div style={styles.loanInfoBox}>\r\n                <h4>Informations du Prêt #{selectedLoanForRepayment.id}</h4>\r\n                <p><strong>Emprunteur :</strong> {selectedLoanForRepayment.member_name}</p>\r\n                <p><strong>Montant initial :</strong> {(selectedLoanForRepayment.amount ?? 0).toLocaleString()} XAF</p>\r\n                <p><strong>Solde restant :</strong> {(selectedLoanForRepayment.remaining_balance ?? 0).toLocaleString()} XAF</p>\r\n                <p><strong>Capital restant :</strong> {(selectedLoanForRepayment.remaining_capital ?? 0).toLocaleString()} XAF</p>\r\n                <p><strong>Intérêts restants :</strong> {(selectedLoanForRepayment.remaining_interest ?? 0).toLocaleString()} XAF</p>\r\n                <p><strong>Paiement minimum :</strong> {(selectedLoanForRepayment.minimum_monthly_payment ?? 0).toLocaleString()} XAF</p>\r\n              </div>\r\n\r\n              <ModalSelect \r\n                label=\"Type de remboursement\" \r\n                value={newRepayment.payment_type} \r\n                onChange={(e: ChangeEvent<HTMLSelectElement>) => setNewRepayment({\r\n                  ...newRepayment, \r\n                  payment_type: e.target.value as 'partial' | 'interest_only' | 'full'\r\n                })}\r\n                disabled={isSubmitting}\r\n              >\r\n                <option value=\"partial\">Remboursement partiel</option>\r\n                <option value=\"interest_only\">Intérêts uniquement</option>\r\n                <option value=\"full\">Remboursement complet</option>\r\n              </ModalSelect>\r\n\r\n              <ModalInput \r\n                label=\"Montant à rembourser (XAF)\" \r\n                type=\"number\" \r\n                step=\"100\" \r\n                value={newRepayment.amount} \r\n                onChange={(e: ChangeEvent<HTMLInputElement>) => setNewRepayment({\r\n                  ...newRepayment, \r\n                  amount: parseFloat(e.target.value) || 0\r\n                })}\r\n                disabled={isSubmitting}\r\n              />\r\n\r\n              {repaymentCalculations && (\r\n                <div style={styles.calculationBox}>\r\n                  <h4><FontAwesomeIcon icon={faCalculator} /> Répartition du remboursement :</h4>\r\n                  <p><strong>Capital :</strong> {(repaymentCalculations.capitalAmount ?? 0).toLocaleString()} XAF</p>\r\n                  <p><strong>Intérêts :</strong> {(repaymentCalculations.interestAmount ?? 0).toLocaleString()} XAF</p>\r\n                  {repaymentCalculations.error && (\r\n                    <p style={{color: '#ef4444'}}>{repaymentCalculations.error}</p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              <ModalTextarea \r\n                label=\"Notes (optionnel)\" \r\n                value={newRepayment.notes} \r\n                onChange={(e: ChangeEvent<HTMLTextAreaElement>) => setNewRepayment({\r\n                  ...newRepayment, \r\n                  notes: e.target.value\r\n                })}\r\n                placeholder=\"Notes sur ce remboursement...\"\r\n                disabled={isSubmitting}\r\n              />\r\n            </div>\r\n\r\n            <div style={styles.modalActions}>\r\n              <button \r\n                onClick={() => setIsRepaymentModalOpen(false)} \r\n                style={{...styles.button, backgroundColor: '#6b7280'}}\r\n                disabled={isSubmitting}\r\n              >\r\n                Annuler\r\n              </button>\r\n              <button \r\n                onClick={handleSaveRepayment} \r\n                style={styles.button}\r\n                disabled={isSubmitting || (repaymentCalculations?.error ? true : false)}\r\n              >\r\n                {isSubmitting ? 'Traitement...' : 'Effectuer le Remboursement'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- COMPOSANTS SPÉCIALISÉS ---\r\n\r\n// Section Remboursements\r\nconst RepaymentSection: React.FC<{\r\n  repayments: ApiLoanRepayment[];\r\n  loading: boolean;\r\n  isMobile: boolean;\r\n}> = ({ repayments, loading, isMobile }) => (\r\n  <div>\r\n    <h3 style={{marginBottom: '16px', color: '#1f2937'}}>Historique des Remboursements</h3>\r\n    \r\n    {loading ? (\r\n      <div style={styles.loadingContainer}>\r\n        <p>Chargement des remboursements...</p>\r\n      </div>\r\n    ) : repayments.length === 0 ? (\r\n      <div style={styles.emptyState}>\r\n        <p>Aucun remboursement enregistré.</p>\r\n      </div>\r\n    ) : isMobile ? (\r\n      <div style={{display: 'flex', flexDirection: 'column', gap: '16px'}}>\r\n        {repayments.map(repayment => (\r\n          <div key={repayment.id} style={styles.mobileCard}>\r\n            <div style={styles.mobileCardHeader}>\r\n              <span style={{fontWeight: 'bold'}}>\r\n                Prêt #{repayment.loan_request} - {repayment.loan_member_name}\r\n              </span>\r\n              <span style={{...styles.chip, backgroundColor: '#dcfce7', color: '#166534'}}>\r\n                {LoanService.getPaymentTypeDisplayName(repayment.payment_type)}\r\n              </span>\r\n            </div>\r\n            <div style={styles.mobileCardBody}>\r\n              <div style={styles.mobileCardRow}>\r\n                <span>Montant:</span> \r\n                <strong>{(repayment.amount ?? 0).toLocaleString()} XAF</strong>\r\n              </div>\r\n              <div style={styles.mobileCardRow}>\r\n                <span>Capital:</span> \r\n                <span>{(repayment.capital_amount ?? 0).toLocaleString()} XAF</span>\r\n              </div>\r\n              <div style={styles.mobileCardRow}>\r\n                <span>Intérêts:</span> \r\n                <span>{(repayment.interest_amount ?? 0).toLocaleString()} XAF</span>\r\n              </div>\r\n              <div style={styles.mobileCardRow}>\r\n                <span>Date:</span> \r\n                <span>{new Date(repayment.date).toLocaleDateString('fr-FR')}</span>\r\n              </div>\r\n              {repayment.processed_by_name && (\r\n                <div style={styles.mobileCardRow}>\r\n                  <span>Traité par:</span> \r\n                  <span>{repayment.processed_by_name}</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    ) : (\r\n      <div style={styles.tableContainer}>\r\n        <table style={styles.table}>\r\n          <thead>\r\n            <tr>\r\n              <th style={styles.th}>Prêt</th>\r\n              <th style={styles.th}>Emprunteur</th>\r\n              <th style={styles.th}>Montant</th>\r\n              <th style={styles.th}>Capital</th>\r\n              <th style={styles.th}>Intérêts</th>\r\n              <th style={styles.th}>Type</th>\r\n              <th style={styles.th}>Date</th>\r\n              <th style={styles.th}>Traité par</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {repayments.map(repayment => (\r\n              <tr key={repayment.id}>\r\n                <td style={styles.td}>#{repayment.loan_request}</td>\r\n                <td style={styles.td}>{repayment.loan_member_name}</td>\r\n                <td style={styles.td}>{(repayment.amount ?? 0).toLocaleString()} XAF</td>\r\n                <td style={styles.td}>{(repayment.capital_amount ?? 0).toLocaleString()} XAF</td>\r\n                <td style={styles.td}>{(repayment.interest_amount ?? 0).toLocaleString()} XAF</td>\r\n                <td style={styles.td}>\r\n                  <span style={{...styles.chip, backgroundColor: '#dcfce7', color: '#166534'}}>\r\n                    {LoanService.getPaymentTypeDisplayName(repayment.payment_type)}\r\n                  </span>\r\n                </td>\r\n                <td style={styles.td}>{new Date(repayment.date).toLocaleDateString('fr-FR')}</td>\r\n                <td style={styles.td}>{repayment.processed_by_name || '-'}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// --- VUES DESKTOP & MOBILE POUR LES PRÊTS ---\r\ninterface TableProps {\r\n  loans: ApiLoanRequest[];\r\n  members: ApiMember[];\r\n  hasPermission: any;\r\n  onStatusUpdate: (id: number, status: 'approved' | 'rejected') => void;\r\n  onRepayment: (loan: ApiLoanRequest) => void;\r\n  getMemberName: (id: number) => string;\r\n  getGuarantorNames: (ids: number[]) => string;\r\n  canAddRepayments: boolean;\r\n}\r\n\r\nconst DesktopLoanTable: React.FC<TableProps> = ({ \r\n  loans, \r\n  members, \r\n  hasPermission, \r\n  onStatusUpdate, \r\n  onRepayment,\r\n  getMemberName, \r\n  getGuarantorNames,\r\n  canAddRepayments\r\n}) => (\r\n  <div style={styles.tableContainer}>\r\n    <table style={styles.table}>\r\n      <thead>\r\n        <tr>\r\n          <th style={styles.th}>Membre</th>\r\n          <th style={styles.th}>Montant</th>\r\n          <th style={styles.th}>Solde</th>\r\n          <th style={styles.th}>Progression</th>\r\n          <th style={styles.th}>Statut</th>\r\n          <th style={styles.th}>Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {loans.map(loan => {\r\n          const totalToRepay = loan.total_amount_with_interest ?? 0;\r\n          const totalRepaid = loan.total_repaid ?? 0;\r\n          const progressPercentage = totalToRepay > 0 ? ((totalRepaid / totalToRepay) * 100).toFixed(1) : \"0.0\";\r\n          \r\n          return (\r\n            <tr key={loan.id}>\r\n              <td style={styles.td}>{loan.member_name}</td>\r\n              <td style={styles.td}>{(loan.amount ?? 0).toLocaleString()} XAF</td>\r\n              <td style={styles.td}>\r\n                {loan.status === 'approved' ? (\r\n                  <div>\r\n                    <div>{(loan.remaining_balance ?? 0).toLocaleString()} XAF</div>\r\n                    <div style={{fontSize: '12px', color: '#6b7280'}}>\r\n                      sur {(totalToRepay).toLocaleString()} XAF\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  loan.status === 'repaid' ? '0 XAF' : '-'\r\n                )}\r\n              </td>\r\n              <td style={styles.td}>\r\n                {(loan.status === 'approved' || loan.status === 'repaid') && (\r\n                  <div style={{width: '100px'}}>\r\n                    <div style={{\r\n                      backgroundColor: '#e5e7eb',\r\n                      borderRadius: '4px',\r\n                      height: '8px',\r\n                      overflow: 'hidden'\r\n                    }}>\r\n                      <div style={{\r\n                        backgroundColor: loan.is_fully_repaid ? '#22c55e' : '#3b82f6',\r\n                        height: '100%',\r\n                        width: `${progressPercentage}%`,\r\n                        transition: 'width 0.3s ease'\r\n                      }} />\r\n                    </div>\r\n                    <div style={{fontSize: '12px', marginTop: '2px', textAlign: 'center'}}>\r\n                      {progressPercentage}%\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </td>\r\n              <td style={styles.td}>\r\n                <StatusChip status={LoanService.getStatusDisplayName(loan.status)} />\r\n              </td>\r\n              <td style={styles.td}>\r\n                <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\r\n                  {loan.status === 'pending' && hasPermission('approve_loans') && (\r\n                    <>\r\n                      <button \r\n                        onClick={() => onStatusUpdate(loan.id, 'approved')} \r\n                        style={{...styles.actionButton, backgroundColor: '#22c55e'}} \r\n                        title=\"Approuver\"\r\n                      >\r\n                        <FontAwesomeIcon icon={faCheck} />\r\n                      </button>\r\n                      <button \r\n                        onClick={() => onStatusUpdate(loan.id, 'rejected')} \r\n                        style={{...styles.actionButton, backgroundColor: '#ef4444'}} \r\n                        title=\"Rejeter\"\r\n                      >\r\n                        <FontAwesomeIcon icon={faTimes} />\r\n                      </button>\r\n                    </>\r\n                  )}\r\n                  {loan.status === 'approved' && !loan.is_fully_repaid && canAddRepayments && (\r\n                    <button \r\n                      onClick={() => onRepayment(loan)} \r\n                      style={{...styles.actionButton, backgroundColor: '#3b82f6'}} \r\n                      title=\"Rembourser\"\r\n                    >\r\n                      <FontAwesomeIcon icon={faMoneyBillWave} />\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          );\r\n        })}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n);\r\n\r\nconst MobileLoanList: React.FC<TableProps> = ({ \r\n  loans, \r\n  members, \r\n  hasPermission, \r\n  onStatusUpdate, \r\n  onRepayment,\r\n  getMemberName, \r\n  getGuarantorNames,\r\n  canAddRepayments\r\n}) => (\r\n  <div style={{display: 'flex', flexDirection: 'column', gap: '16px'}}>\r\n    {loans.map(loan => {\r\n      const totalToRepay = loan.total_amount_with_interest ?? 0;\r\n      const totalRepaid = loan.total_repaid ?? 0;\r\n      const progressPercentage = totalToRepay > 0 ? ((totalRepaid / totalToRepay) * 100).toFixed(1) : \"0.0\";\r\n      \r\n      return (\r\n        <div key={loan.id} style={styles.mobileCard}>\r\n          <div style={styles.mobileCardHeader}>\r\n            <span style={{fontWeight: 'bold', color: '#1f2937'}}>\r\n              {loan.member_name}\r\n            </span>\r\n            <StatusChip status={LoanService.getStatusDisplayName(loan.status)} />\r\n          </div>\r\n          <div style={styles.mobileCardBody}>\r\n            <div style={styles.mobileCardRow}>\r\n              <span>Montant initial:</span> \r\n              <strong>{(loan.amount ?? 0).toLocaleString()} XAF</strong>\r\n            </div>\r\n            {(loan.status === 'approved' || loan.status === 'repaid') && (\r\n              <>\r\n                <div style={styles.mobileCardRow}>\r\n                  <span>Solde restant:</span> \r\n                  <strong style={{color: loan.is_fully_repaid ? '#22c55e' : '#ef4444'}}>\r\n                    {(loan.remaining_balance ?? 0).toLocaleString()} XAF\r\n                  </strong>\r\n                </div>\r\n                <div style={styles.mobileCardRow}>\r\n                  <span>Progression:</span> \r\n                  <span>{progressPercentage}% remboursé</span>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n          \r\n          <div style={styles.mobileCardFooter}>\r\n            {loan.status === 'pending' && hasPermission('approve_loans') && (\r\n              <>\r\n                <button \r\n                  onClick={() => onStatusUpdate(loan.id, 'approved')} \r\n                  style={{...styles.button, flex: 1, backgroundColor: '#22c55e'}}\r\n                >\r\n                  <FontAwesomeIcon icon={faCheck} style={{marginRight: '8px'}}/> \r\n                  Approuver\r\n                </button>\r\n                <button \r\n                  onClick={() => onStatusUpdate(loan.id, 'rejected')} \r\n                  style={{...styles.button, flex: 1, backgroundColor: '#ef4444'}}\r\n                >\r\n                  <FontAwesomeIcon icon={faTimes} style={{marginRight: '8px'}}/> \r\n                  Rejeter\r\n                </button>\r\n              </>\r\n            )}\r\n            {loan.status === 'approved' && !loan.is_fully_repaid && canAddRepayments && (\r\n              <button \r\n                onClick={() => onRepayment(loan)} \r\n                style={{...styles.button, flex: 1, backgroundColor: '#3b82f6'}}\r\n              >\r\n                <FontAwesomeIcon icon={faMoneyBillWave} style={{marginRight: '8px'}}/> \r\n                Rembourser\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    })}\r\n  </div>\r\n);\r\n\r\n// --- SOUS-COMPOSANTS & STYLES ---\r\nconst StatCard: React.FC<{ title: string; value: string | number }> = ({ title, value }) => (\r\n  <div style={{...styles.card, flex: '1 1 250px', textAlign: 'center' }}>\r\n    <h4 style={styles.statTitle}>{title}</h4>\r\n    <p style={styles.statValue}>{value}</p>\r\n  </div>\r\n);\r\n\r\nconst StatusChip: React.FC<{ status: string }> = ({ status }) => { \r\n  const statusColors: { [key: string]: { backgroundColor: string; color: string } } = {\r\n    'En attente': { backgroundColor: '#fef3c7', color: '#92400e' },\r\n    'Approuvé': { backgroundColor: '#dcfce7', color: '#166534' },\r\n    'Rejeté': { backgroundColor: '#fee2e2', color: '#991b1b' },\r\n    'Remboursé': { backgroundColor: '#e0e7ff', color: '#3730a3' }\r\n  };\r\n  \r\n  return (\r\n    <span style={{ ...styles.chip, ...statusColors[status] }}>\r\n      {status}\r\n    </span>\r\n  ); \r\n};\r\n\r\ninterface ModalInputProps extends InputHTMLAttributes<HTMLInputElement> { \r\n  label: string; \r\n}\r\nconst ModalInput: React.FC<ModalInputProps> = ({ label, ...props }) => (\r\n  <div>\r\n    <label style={styles.modalLabel}>{label}</label>\r\n    <input style={styles.modalInput} {...props} />\r\n  </div>\r\n);\r\n\r\ninterface ModalSelectProps extends SelectHTMLAttributes<HTMLSelectElement> { \r\n  label: string; \r\n  children: ReactNode; \r\n}\r\nconst ModalSelect: React.FC<ModalSelectProps> = ({ label, children, ...props }) => (\r\n  <div>\r\n    <label style={styles.modalLabel}>{label}</label>\r\n    <select style={styles.modalInput} {...props}>{children}</select>\r\n  </div>\r\n);\r\n\r\ninterface ModalTextareaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> { \r\n  label: string; \r\n}\r\nconst ModalTextarea: React.FC<ModalTextareaProps> = ({ label, ...props }) => (\r\n  <div>\r\n    <label style={styles.modalLabel}>{label}</label>\r\n    <textarea style={{...styles.modalInput, height: '80px'}} {...props} />\r\n  </div>\r\n);\r\n\r\nconst styles: { [key: string]: React.CSSProperties } = {\r\n  page: { fontFamily: 'Arial, sans-serif', padding: '16px', backgroundColor: '#f3f4f6', minHeight: '100vh' },\r\n  header: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px', flexWrap: 'wrap', gap: '16px' },\r\n  headerTitle: { fontSize: '24px', fontWeight: 'bold', color: '#1f2937', margin: 0 },\r\n  loadingText: { fontSize: '16px', fontWeight: 'normal', color: '#6b7280' },\r\n  errorContainer: { textAlign: 'center', padding: '40px', backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  loadingContainer: { textAlign: 'center', padding: '40px' },\r\n  emptyState: { textAlign: 'center', padding: '40px', backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  statSection: { display: 'flex', gap: '16px', flexWrap: 'wrap', marginBottom: '24px' },\r\n  card: { backgroundColor: 'white', padding: '16px', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  statTitle: { margin: 0, color: '#4b5563', fontSize: '14px', fontWeight: '600' },\r\n  statValue: { margin: '8px 0 0 0', color: '#1e3a8a', fontSize: '22px', fontWeight: 'bold' },\r\n  \r\n  // Styles des onglets\r\n  tabSection: { display: 'flex', marginBottom: '24px', backgroundColor: 'white', borderRadius: '12px', overflow: 'hidden', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  tabButton: { flex: 1, padding: '12px 24px', border: 'none', fontSize: '14px', fontWeight: '600', cursor: 'pointer', transition: 'all 0.2s', display: 'flex', alignItems: 'center', justifyContent: 'center' },\r\n  activeTab: { backgroundColor: '#3b82f6', color: 'white' },\r\n  inactiveTab: { backgroundColor: 'white', color: '#6b7280' },\r\n  \r\n  controlsSection: { marginBottom: '24px' },\r\n  button: { padding: '10px 16px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600', display: 'flex', alignItems: 'center', justifyContent: 'center', transition: 'background-color 0.2s', fontSize: '14px' },\r\n  permissionInfo: { backgroundColor: '#e0f2fe', padding: '12px', borderRadius: '8px', marginTop: '16px', border: '1px solid #0891b2' },\r\n  tableContainer: { backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)', overflowX: 'auto' },\r\n  table: { width: '100%', borderCollapse: 'collapse' },\r\n  th: { padding: '12px 16px', textAlign: 'left', fontSize: '14px', color: '#4b5563', backgroundColor: '#f9fafb', borderBottom: '1px solid #e5e7eb', fontWeight: '600' },\r\n  td: { padding: '12px 16px', fontSize: '14px', color: '#374151', borderBottom: '1px solid #e5e7eb', verticalAlign: 'middle' },\r\n  chip: { padding: '4px 12px', borderRadius: '9999px', fontWeight: '600', fontSize: '12px' },\r\n  actionButton: { padding: '8px 12px', border: 'none', borderRadius: '6px', color: 'white', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '14px', fontWeight: 'bold' },\r\n  \r\n  // Styles des modals\r\n  modalOverlay: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0, 0, 0, 0.6)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 1000, padding: '16px' },\r\n  modalContent: { backgroundColor: 'white', padding: '24px', borderRadius: '12px', width: '100%', maxWidth: '600px', boxShadow: '0 8px 16px rgba(0, 0, 0, 0.2)', maxHeight: '90vh', display: 'flex', flexDirection: 'column' },\r\n  modalTitle: { fontSize: '22px', fontWeight: 'bold', marginBottom: '24px', color: '#1f2937', flexShrink: 0, textAlign: 'center' },\r\n  modalForm: { flexGrow: 1, overflowY: 'auto', paddingRight: '12px', marginRight: '-12px', display: 'flex', flexDirection: 'column', gap: '16px' },\r\n  modalLabel: { display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151', fontSize: '14px' },\r\n  modalInput: { width: '100%', padding: '10px', border: '1px solid #d1d5db', borderRadius: '8px', boxSizing: 'border-box', fontSize: '16px' },\r\n  disabledInput: { width: '100%', padding: '10px', border: '1px solid #e5e7eb', backgroundColor: '#f9fafb', color: '#6b7280', borderRadius: '8px', boxSizing: 'border-box', fontSize: '16px' },\r\n  modalActions: { display: 'flex', justifyContent: 'flex-end', gap: '12px', marginTop: '24px', flexShrink: 0 },\r\n  formError: { color: '#ef4444', backgroundColor: '#fee2e2', padding: '10px', borderRadius: '8px', textAlign: 'center', marginBottom: '16px' },\r\n  \r\n  // Styles spécifiques aux remboursements\r\n  loanDetailsBox: { backgroundColor: '#f3f4f6', padding: '12px', borderRadius: '8px', fontSize: '14px', lineHeight: 1.6, borderLeft: '4px solid #3b82f6'},\r\n  loanInfoBox: { backgroundColor: '#f0f9ff', padding: '16px', borderRadius: '8px', fontSize: '14px', lineHeight: 1.6, borderLeft: '4px solid #0ea5e9' },\r\n  calculationBox: { backgroundColor: '#f0fdf4', padding: '12px', borderRadius: '8px', fontSize: '14px', lineHeight: 1.6, borderLeft: '4px solid #22c55e' },\r\n  \r\n  // Styles mobile\r\n  mobileCard: { backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)', overflow: 'hidden'},\r\n  mobileCardHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '12px 16px', backgroundColor: '#f9fafb', borderBottom: '1px solid #e5e7eb'},\r\n  mobileCardBody: { padding: '16px', display: 'flex', flexDirection: 'column', gap: '10px' },\r\n  mobileCardRow: { display: 'flex', justifyContent: 'space-between', fontSize: '14px' },\r\n  mobileCardFooter: { padding: '12px 16px', backgroundColor: '#f9fafb', borderTop: '1px solid #e5e7eb', display: 'flex', gap: '12px' },\r\n};\r\n\r\nexport default Loans;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}