{"ast":null,"code":"// src/components/Members.tsx - VERSION CONNECTÉE À L'API DJANGO\nimport React,{useState,useEffect,useMemo}from'react';import{useAuth}from'../context/AuthContext';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus,faPen,faTrash,faRefresh}from'@fortawesome/free-solid-svg-icons';// --- HOOK POUR LA RESPONSIVITÉ ---\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const useWindowSize=()=>{const[size,setSize]=useState([window.innerWidth]);useEffect(()=>{const handleResize=()=>setSize([window.innerWidth]);window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);return{width:size[0]};};// --- INTERFACES ADAPTÉES À VOTRE API DJANGO ---\n// Interface pour le formulaire (création/modification)\nconst MOBILE_BREAKPOINT=1024;const API_BASE_URL='http://172.30.240.1:8000/api';// --- COMPOSANT PRINCIPAL ---\nconst Members=()=>{const{user,hasPermission,getRoleDisplayName}=useAuth();const{width}=useWindowSize();const isMobile=width<MOBILE_BREAKPOINT;// États\nconst[members,setMembers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[searchTerm,setSearchTerm]=useState('');const[roleFilter,setRoleFilter]=useState('');const[statusFilter,setStatusFilter]=useState('');const[isModalOpen,setModalOpen]=useState(false);const[editingMember,setEditingMember]=useState(null);const[formErrors,setFormErrors]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);// --- FONCTIONS API ---\nconst fetchMembers=async()=>{try{setLoading(true);setError(null);const response=await fetch(`${API_BASE_URL}/members/`,{headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`,'Content-Type':'application/json'}});if(!response.ok){throw new Error(`Erreur HTTP: ${response.status}`);}const data=await response.json();setMembers(data);}catch(err){setError(err instanceof Error?err.message:'Erreur lors du chargement des membres');console.error('Erreur lors du chargement des membres:',err);}finally{setLoading(false);}};// Charger les membres au montage du composant\nuseEffect(()=>{if(user!==null&&user!==void 0&&user.token){fetchMembers();}},[user===null||user===void 0?void 0:user.token]);// --- FILTRAGE DES MEMBRES ---\nconst filteredMembers=useMemo(()=>{return members.filter(m=>{const fullName=`${m.user.first_name} ${m.user.last_name}`.toLowerCase();return fullName.includes(searchTerm.toLowerCase());}).filter(m=>roleFilter?m.user.role===roleFilter.toLowerCase():true);// Note: Le statut n'est pas encore dans votre modèle Django, donc on l'ignore pour l'instant\n},[members,searchTerm,roleFilter]);// --- GESTION DU MODAL ---\nconst openModal=function(){let member=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!hasPermission('manage_members')&&!hasPermission('create_members')){alert(\"Action non autorisée. Vous n'avez pas les permissions pour gérer les membres.\");return;}if(member){// Vérification pour la modification\nif(!hasPermission('edit_members')){alert(\"Vous n'avez pas la permission de modifier les membres.\");return;}setEditingMember({id:member.id,// Ajouter l'ID pour l'édition\nfirstName:member.user.first_name,lastName:member.user.last_name,email:member.user.email,phone:'',// Pas encore dans votre modèle\nrole:member.user.role});}else{// Vérification pour la création\nif(!hasPermission('create_members')){alert(\"Vous n'avez pas la permission de créer de nouveaux membres.\");return;}setEditingMember({firstName:'',lastName:'',email:'',phone:'',role:'member'});}setFormErrors({});setModalOpen(true);};const closeModal=()=>{setModalOpen(false);setEditingMember(null);setFormErrors({});setIsSubmitting(false);};// --- CRÉATION/MODIFICATION D'UN MEMBRE ---\nconst handleSave=async e=>{e.preventDefault();if(!editingMember)return;setIsSubmitting(true);setFormErrors({});try{// Validation côté client\nconst errors={};if(!editingMember.firstName.trim())errors.firstName='Prénom requis';if(!editingMember.lastName.trim())errors.lastName='Nom requis';if(!editingMember.email.trim())errors.email='Email requis';if(!editingMember.role)errors.role='Rôle requis';// Vérifier l'unicité de l'email côté client (seulement pour création)\nif(!editingMember.id){const emailExists=members.some(m=>m.user.email.toLowerCase()===editingMember.email.toLowerCase());if(emailExists){errors.email='Cet email est déjà utilisé par un autre membre';}}if(Object.keys(errors).length>0){setFormErrors(errors);return;}let response;if(editingMember.id){// MODIFICATION D'UN MEMBRE EXISTANT\nresponse=await fetch(`${API_BASE_URL}/members/${editingMember.id}/update-role/`,{method:'PUT',headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`,'Content-Type':'application/json'},body:JSON.stringify({firstName:editingMember.firstName,lastName:editingMember.lastName,role:editingMember.role})});}else{// CRÉATION D'UN NOUVEAU MEMBRE\nresponse=await fetch(`${API_BASE_URL}/members/create-with-credentials/`,{method:'POST',headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`,'Content-Type':'application/json'},body:JSON.stringify(editingMember)});}if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||`Erreur lors de ${editingMember.id?'la modification':'la création'} du membre`);}const result=await response.json();// Actualiser la liste des membres\nawait fetchMembers();if(editingMember.id){alert('Membre modifié avec succès !');}else{alert(`Membre créé avec succès ! Mot de passe généré: ${result.generated_password}`);}closeModal();}catch(err){setError(err instanceof Error?err.message:'Erreur lors de la sauvegarde');console.error('Erreur lors de la sauvegarde:',err);}finally{setIsSubmitting(false);}};// --- SUPPRESSION D'UN MEMBRE ---\nconst handleDelete=async memberId=>{if(!hasPermission('delete_members')){alert(\"Vous n'avez pas la permission de supprimer des membres.\");return;}if(!window.confirm('Êtes-vous sûr de vouloir supprimer ce membre ?')){return;}try{const response=await fetch(`${API_BASE_URL}/members/${memberId}/`,{method:'DELETE',headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`}});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Erreur lors de la suppression');}// Actualiser la liste\nawait fetchMembers();alert('Membre supprimé avec succès');}catch(err){setError(err instanceof Error?err.message:'Erreur lors de la suppression');console.error('Erreur lors de la suppression:',err);}};// --- GESTION DES CHAMPS DU FORMULAIRE ---\nconst handleInputChange=(field,value)=>{if(editingMember){setEditingMember(prev=>prev?{...prev,[field]:value}:null);}};// --- VÉRIFICATION DES PERMISSIONS ---\nif(!hasPermission('view_members')){return/*#__PURE__*/_jsx(\"div\",{style:styles.page,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.errorContainer,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Acc\\xE8s refus\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Vous n'avez pas la permission de consulter la liste des membres.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Votre r\\xF4le actuel : \",/*#__PURE__*/_jsx(\"strong\",{children:user!==null&&user!==void 0&&user.role?getRoleDisplayName(user.role):'Non défini'})]})]})});}// --- AFFICHAGE DE L'ERREUR ---\nif(error&&!loading){return/*#__PURE__*/_jsx(\"div\",{style:styles.page,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.errorContainer,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Erreur de chargement\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsxs(\"button\",{onClick:fetchMembers,style:styles.button,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faRefresh,style:{marginRight:'8px'}}),\"R\\xE9essayer\"]})]})});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{style:styles.header,children:[/*#__PURE__*/_jsxs(\"h2\",{style:styles.headerTitle,children:[\"Gestion des Membres\",loading&&/*#__PURE__*/_jsx(\"span\",{style:styles.loadingText,children:\" (Chargement...)\"})]}),hasPermission('create_members')&&/*#__PURE__*/_jsxs(\"div\",{style:styles.headerActions,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:fetchMembers,style:{...styles.button,backgroundColor:'#6b7280'},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faRefresh,style:{marginRight:'8px'}}),\"Actualiser\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>openModal(),style:styles.button,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPlus,style:{marginRight:'8px'}}),\"Ajouter un Membre\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.controlsSection,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Rechercher par nom...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:styles.searchInput}),/*#__PURE__*/_jsxs(\"select\",{value:roleFilter,onChange:e=>setRoleFilter(e.target.value),style:styles.filterSelect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Tous les r\\xF4les\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Administrateur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"president\",children:\"Pr\\xE9sident\"}),/*#__PURE__*/_jsx(\"option\",{value:\"treasurer\",children:\"Tr\\xE9sorier\"}),/*#__PURE__*/_jsx(\"option\",{value:\"secrecom\",children:\"S\\xE9cr\\xE9com\"}),/*#__PURE__*/_jsx(\"option\",{value:\"censeur\",children:\"Censeur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"accountant\",children:\"Comptable\"}),/*#__PURE__*/_jsx(\"option\",{value:\"member\",children:\"Membre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"guest\",children:\"Invit\\xE9\"})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{style:styles.loadingContainer,children:/*#__PURE__*/_jsx(\"p\",{children:\"Chargement des membres...\"})}):filteredMembers.length===0?/*#__PURE__*/_jsxs(\"div\",{style:styles.emptyState,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Aucun membre trouv\\xE9.\"}),members.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"Commencez par ajouter votre premier membre !\"})]}):isMobile?/*#__PURE__*/_jsx(MobileMemberList,{members:filteredMembers,onEdit:openModal,onDelete:handleDelete,hasPermission:hasPermission}):/*#__PURE__*/_jsx(DesktopMemberTable,{members:filteredMembers,onEdit:openModal,onDelete:handleDelete,hasPermission:hasPermission}),isModalOpen&&editingMember&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modalContent,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.modalTitle,children:editingMember.id?'Modifier le Membre':'Ajouter un Nouveau Membre'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSave,style:styles.modalForm,children:[/*#__PURE__*/_jsx(ModalInput,{label:\"Pr\\xE9nom\",value:editingMember.firstName,onChange:e=>handleInputChange('firstName',e.target.value),error:formErrors.firstName,disabled:isSubmitting}),/*#__PURE__*/_jsx(ModalInput,{label:\"Nom\",value:editingMember.lastName,onChange:e=>handleInputChange('lastName',e.target.value),error:formErrors.lastName,disabled:isSubmitting}),/*#__PURE__*/_jsx(ModalInput,{label:\"Email\",type:\"email\",value:editingMember.email,onChange:e=>handleInputChange('email',e.target.value),error:formErrors.email,disabled:isSubmitting||!!editingMember.id// Désactiver email en modification\n}),/*#__PURE__*/_jsxs(ModalSelect,{label:\"R\\xF4le\",value:editingMember.role,onChange:e=>handleInputChange('role',e.target.value),error:formErrors.role,disabled:isSubmitting,children:[/*#__PURE__*/_jsx(\"option\",{value:\"member\",children:\"Membre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"president\",children:\"Pr\\xE9sident\"}),/*#__PURE__*/_jsx(\"option\",{value:\"treasurer\",children:\"Tr\\xE9sorier\"}),/*#__PURE__*/_jsx(\"option\",{value:\"secrecom\",children:\"S\\xE9cr\\xE9com\"}),/*#__PURE__*/_jsx(\"option\",{value:\"censeur\",children:\"Censeur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"accountant\",children:\"Comptable\"}),/*#__PURE__*/_jsx(\"option\",{value:\"guest\",children:\"Invit\\xE9\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalActions,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:closeModal,style:{...styles.button,backgroundColor:'#6b7280'},disabled:isSubmitting,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:styles.button,disabled:isSubmitting,children:isSubmitting?editingMember.id?'Modification...':'Création...':editingMember.id?'Modifier le Membre':'Créer le Membre'})]})]})]})})]});};// --- COMPOSANTS D'AFFICHAGE ---\nconst DesktopMemberTable=_ref=>{let{members,onEdit,onDelete,hasPermission}=_ref;return/*#__PURE__*/_jsx(\"div\",{style:styles.tableContainer,children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Nom\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"R\\xF4le\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Points Berry\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Parts\"}),(hasPermission('edit_members')||hasPermission('delete_members'))&&/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:members.map(member=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold'},children:[member.user.first_name,\" \",member.user.last_name]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'12px',color:'#6b7280'},children:[\"ID: \",member.id]})]}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:member.user.email}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsx(RoleChip,{role:member.user.role})}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold',fontSize:'16px'},children:member.berry_score}),/*#__PURE__*/_jsx(LevelChip,{score:member.berry_score})]}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:member.shares}),(hasPermission('edit_members')||hasPermission('delete_members'))&&/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'8px'},children:[hasPermission('edit_members')&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onEdit(member),style:{...styles.actionButton,backgroundColor:'#3b82f6'},title:\"Modifier\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPen})}),hasPermission('delete_members')&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(member.id),style:{...styles.actionButton,backgroundColor:'#ef4444'},title:\"Supprimer\",children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash})})]})})]},member.id))})]})});};const MobileMemberList=_ref2=>{let{members,onEdit,onDelete,hasPermission}=_ref2;return/*#__PURE__*/_jsx(\"div\",{style:styles.mobileList,children:members.map(member=>/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCard,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.mobileCardHeader,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{style:styles.mobileCardTitle,children:[member.user.first_name,\" \",member.user.last_name]}),/*#__PURE__*/_jsx(RoleChip,{role:member.user.role})]})}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardBody,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Points Berry:\"}),/*#__PURE__*/_jsx(\"strong\",{children:member.berry_score})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Niveau:\"}),/*#__PURE__*/_jsx(LevelChip,{score:member.berry_score})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Parts:\"}),/*#__PURE__*/_jsx(\"span\",{children:member.shares})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardRow,children:[/*#__PURE__*/_jsx(\"span\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"span\",{children:member.user.email})]})]}),(hasPermission('edit_members')||hasPermission('delete_members'))&&/*#__PURE__*/_jsxs(\"div\",{style:styles.mobileCardFooter,children:[hasPermission('edit_members')&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onEdit(member),style:{...styles.button,flex:1},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPen,style:{marginRight:'8px'}}),\"Modifier\"]}),hasPermission('delete_members')&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onDelete(member.id),style:{...styles.button,flex:1,backgroundColor:'#ef4444'},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash,style:{marginRight:'8px'}}),\"Supprimer\"]})]})]},member.id))});};// --- SOUS-COMPOSANTS ---\nconst RoleChip=_ref3=>{let{role}=_ref3;const roleColors={'admin':'#dbeafe','president':'#dcfce7','treasurer':'#fef3c7','secrecom':'#e5e7eb','censeur':'#f3e8ff','accountant':'#d1fae5','member':'#f3f4f6','guest':'#e5e7eb'};const roleLabels={'admin':'Admin','president':'Président','treasurer':'Trésorier','secrecom':'Sécrécom','censeur':'Censeur','accountant':'Comptable','member':'Membre','guest':'Invité'};return/*#__PURE__*/_jsx(\"span\",{style:{...styles.chip,backgroundColor:roleColors[role]||'#e5e7eb',color:'#374151'},children:roleLabels[role]||role});};const LevelChip=_ref4=>{let{score}=_ref4;const getLevel=score=>{if(score>=400)return{level:'Platinum',color:'#f3e8ff'};if(score>=200)return{level:'Gold',color:'#fef3c7'};if(score>=100)return{level:'Silver',color:'#f1f5f9'};return{level:'Bronze',color:'#fef2f2'};};const{level,color}=getLevel(score);return/*#__PURE__*/_jsx(\"span\",{style:{...styles.chip,backgroundColor:color,color:'#374151'},children:level});};// --- COMPOSANTS DE FORMULAIRE ---\nconst ModalInput=_ref5=>{let{label,error,...props}=_ref5;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.modalLabel,children:label}),/*#__PURE__*/_jsx(\"input\",{style:{...styles.modalInput,...(error&&styles.inputError)},...props}),error&&/*#__PURE__*/_jsx(\"p\",{style:styles.errorMessage,children:error})]});};const ModalSelect=_ref6=>{let{label,error,children,...props}=_ref6;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.modalLabel,children:label}),/*#__PURE__*/_jsx(\"select\",{style:{...styles.modalInput,...(error&&styles.inputError)},...props,children:children}),error&&/*#__PURE__*/_jsx(\"p\",{style:styles.errorMessage,children:error})]});};// --- STYLES ---\nconst styles={page:{fontFamily:'Arial, sans-serif',padding:'16px',backgroundColor:'#f3f4f6',minHeight:'100vh'},header:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'24px',flexWrap:'wrap',gap:'16px'},headerTitle:{fontSize:'24px',fontWeight:'bold',color:'#1f2937',margin:0},headerActions:{display:'flex',gap:'12px'},loadingText:{fontSize:'16px',fontWeight:'normal',color:'#6b7280'},controlsSection:{display:'flex',gap:'16px',marginBottom:'24px',flexWrap:'wrap'},searchInput:{padding:'10px 12px',border:'1px solid #d1d5db',borderRadius:'8px',flexGrow:1,minWidth:'200px'},filterSelect:{padding:'10px 12px',border:'1px solid #d1d5db',borderRadius:'8px',backgroundColor:'white'},button:{padding:'10px 16px',backgroundColor:'#2563eb',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'600',display:'flex',alignItems:'center',justifyContent:'center',transition:'background-color 0.2s',fontSize:'14px'},errorContainer:{textAlign:'center',padding:'40px',backgroundColor:'white',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)'},loadingContainer:{textAlign:'center',padding:'40px'},emptyState:{textAlign:'center',padding:'40px',backgroundColor:'white',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)'},tableContainer:{backgroundColor:'white',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)',overflowX:'auto'},table:{width:'100%',borderCollapse:'collapse'},th:{padding:'12px 16px',textAlign:'left',fontSize:'14px',color:'#4b5563',backgroundColor:'#f9fafb',borderBottom:'1px solid #e5e7eb',fontWeight:'600'},td:{padding:'12px 16px',fontSize:'14px',color:'#374151',borderBottom:'1px solid #e5e7eb',verticalAlign:'middle'},chip:{padding:'4px 10px',borderRadius:'9999px',fontWeight:'600',fontSize:'12px',display:'inline-block'},actionButton:{width:'32px',height:'32px',border:'none',borderRadius:'50%',color:'white',cursor:'pointer',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'14px'},modalOverlay:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0, 0, 0, 0.6)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:1000,padding:'16px'},modalContent:{backgroundColor:'white',padding:'24px',borderRadius:'12px',width:'100%',maxWidth:'500px',boxShadow:'0 8px 16px rgba(0, 0, 0, 0.2)',maxHeight:'90vh',display:'flex',flexDirection:'column'},modalTitle:{fontSize:'22px',fontWeight:'bold',marginBottom:'24px',color:'#1f2937',flexShrink:0,textAlign:'center'},modalForm:{flexGrow:1,overflowY:'auto',paddingRight:'12px',marginRight:'-12px',display:'flex',flexDirection:'column',gap:'16px'},modalLabel:{display:'block',marginBottom:'8px',fontWeight:'600',color:'#374151',fontSize:'14px'},modalInput:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'8px',boxSizing:'border-box',fontSize:'16px'},modalActions:{display:'flex',justifyContent:'flex-end',gap:'12px',marginTop:'24px',flexShrink:0,borderTop:'1px solid #e5e7eb',paddingTop:'16px'},inputError:{borderColor:'#ef4444'},errorMessage:{color:'#ef4444',fontSize:'12px',marginTop:'4px'},mobileList:{display:'flex',flexDirection:'column',gap:'16px'},mobileCard:{backgroundColor:'white',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)',overflow:'hidden'},mobileCardHeader:{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'12px 16px',backgroundColor:'#f9fafb',borderBottom:'1px solid #e5e7eb'},mobileCardTitle:{fontWeight:'bold',color:'#1f2937'},mobileCardBody:{padding:'16px',display:'flex',flexDirection:'column',gap:'10px'},mobileCardRow:{display:'flex',justifyContent:'space-between',fontSize:'14px',alignItems:'center'},mobileCardFooter:{padding:'12px 16px',backgroundColor:'#f9fafb',borderTop:'1px solid #e5e7eb',display:'flex',gap:'12px'}};export default Members;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useAuth","FontAwesomeIcon","faPlus","faPen","faTrash","faRefresh","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","useWindowSize","size","setSize","window","innerWidth","handleResize","addEventListener","removeEventListener","width","MOBILE_BREAKPOINT","API_BASE_URL","Members","user","hasPermission","getRoleDisplayName","isMobile","members","setMembers","loading","setLoading","error","setError","searchTerm","setSearchTerm","roleFilter","setRoleFilter","statusFilter","setStatusFilter","isModalOpen","setModalOpen","editingMember","setEditingMember","formErrors","setFormErrors","isSubmitting","setIsSubmitting","fetchMembers","response","fetch","headers","token","ok","Error","status","data","json","err","message","console","filteredMembers","filter","m","fullName","first_name","last_name","toLowerCase","includes","role","openModal","member","arguments","length","undefined","alert","id","firstName","lastName","email","phone","closeModal","handleSave","e","preventDefault","errors","trim","emailExists","some","Object","keys","method","body","JSON","stringify","errorData","result","generated_password","handleDelete","memberId","confirm","handleInputChange","field","value","prev","style","styles","page","children","errorContainer","onClick","button","icon","marginRight","header","headerTitle","loadingText","headerActions","backgroundColor","controlsSection","type","placeholder","onChange","target","searchInput","filterSelect","loadingContainer","emptyState","MobileMemberList","onEdit","onDelete","DesktopMemberTable","modalOverlay","modalContent","modalTitle","onSubmit","modalForm","ModalInput","label","disabled","ModalSelect","modalActions","_ref","tableContainer","table","th","map","td","fontWeight","fontSize","color","RoleChip","berry_score","LevelChip","score","shares","display","gap","actionButton","title","_ref2","mobileList","mobileCard","mobileCardHeader","mobileCardTitle","mobileCardBody","mobileCardRow","mobileCardFooter","flex","_ref3","roleColors","roleLabels","chip","_ref4","getLevel","level","_ref5","props","modalLabel","modalInput","inputError","errorMessage","_ref6","fontFamily","padding","minHeight","justifyContent","alignItems","marginBottom","flexWrap","margin","border","borderRadius","flexGrow","minWidth","cursor","transition","textAlign","boxShadow","overflowX","borderCollapse","borderBottom","verticalAlign","height","position","top","left","right","bottom","zIndex","maxWidth","maxHeight","flexDirection","flexShrink","overflowY","paddingRight","boxSizing","marginTop","borderTop","paddingTop","borderColor","overflow"],"sources":["D:/Projects/FriendlyBanks/frontend/src/components/Members.tsx"],"sourcesContent":["// src/components/Members.tsx - VERSION CONNECTÉE À L'API DJANGO\r\n\r\nimport React, { useState, useEffect, useMemo, ReactNode, InputHTMLAttributes, SelectHTMLAttributes } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faPen, faTrash, faRefresh } from '@fortawesome/free-solid-svg-icons';\r\n\r\n// --- HOOK POUR LA RESPONSIVITÉ ---\r\nconst useWindowSize = () => {\r\n    const [size, setSize] = useState([window.innerWidth]);\r\n    useEffect(() => {\r\n        const handleResize = () => setSize([window.innerWidth]);\r\n        window.addEventListener('resize', handleResize);\r\n        return () => window.removeEventListener('resize', handleResize);\r\n    }, []);\r\n    return { width: size[0] };\r\n};\r\n\r\n// --- INTERFACES ADAPTÉES À VOTRE API DJANGO ---\r\ninterface ApiUser {\r\n  id: number;\r\n  username: string;\r\n  email: string;\r\n  role: string;\r\n  first_name: string;\r\n  last_name: string;\r\n}\r\n\r\ninterface ApiMember {\r\n  id: number;\r\n  user: ApiUser;\r\n  berry_score: number;\r\n  shares: number;\r\n}\r\n\r\n// Interface pour le formulaire (création/modification)\r\ninterface MemberFormData {\r\n  id?: number; // Optionnel, présent seulement lors de l'édition\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n  phone: string;\r\n  role: string;\r\n}\r\n\r\ntype MemberStatus = 'Actif' | 'Suspendu' | 'Exclu';\r\nconst MOBILE_BREAKPOINT = 1024;\r\nconst API_BASE_URL = 'http://172.30.240.1:8000/api';\r\n\r\n// --- COMPOSANT PRINCIPAL ---\r\nconst Members: React.FC = () => {\r\n  const { user, hasPermission, getRoleDisplayName } = useAuth();\r\n  const { width } = useWindowSize();\r\n  const isMobile = width < MOBILE_BREAKPOINT;\r\n\r\n  // États\r\n  const [members, setMembers] = useState<ApiMember[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [roleFilter, setRoleFilter] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('');\r\n  const [isModalOpen, setModalOpen] = useState(false);\r\n  const [editingMember, setEditingMember] = useState<MemberFormData | null>(null);\r\n  const [formErrors, setFormErrors] = useState<{ [key: string]: string }>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  // --- FONCTIONS API ---\r\n  const fetchMembers = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const response = await fetch(`${API_BASE_URL}/members/`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${user?.token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`Erreur HTTP: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setMembers(data);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Erreur lors du chargement des membres');\r\n      console.error('Erreur lors du chargement des membres:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Charger les membres au montage du composant\r\n  useEffect(() => {\r\n    if (user?.token) {\r\n      fetchMembers();\r\n    }\r\n  }, [user?.token]);\r\n\r\n  // --- FILTRAGE DES MEMBRES ---\r\n  const filteredMembers = useMemo(() => {\r\n    return members\r\n      .filter(m => {\r\n        const fullName = `${m.user.first_name} ${m.user.last_name}`.toLowerCase();\r\n        return fullName.includes(searchTerm.toLowerCase());\r\n      })\r\n      .filter(m => (roleFilter ? m.user.role === roleFilter.toLowerCase() : true))\r\n      // Note: Le statut n'est pas encore dans votre modèle Django, donc on l'ignore pour l'instant\r\n  }, [members, searchTerm, roleFilter]);\r\n\r\n  // --- GESTION DU MODAL ---\r\n  const openModal = (member: ApiMember | null = null) => {\r\n    if (!hasPermission('manage_members') && !hasPermission('create_members')) {\r\n      alert(\"Action non autorisée. Vous n'avez pas les permissions pour gérer les membres.\");\r\n      return;\r\n    }\r\n    \r\n    if (member) {\r\n      // Vérification pour la modification\r\n      if (!hasPermission('edit_members')) {\r\n        alert(\"Vous n'avez pas la permission de modifier les membres.\");\r\n        return;\r\n      }\r\n      \r\n      setEditingMember({\r\n        id: member.id, // Ajouter l'ID pour l'édition\r\n        firstName: member.user.first_name,\r\n        lastName: member.user.last_name,\r\n        email: member.user.email,\r\n        phone: '', // Pas encore dans votre modèle\r\n        role: member.user.role,\r\n      });\r\n    } else {\r\n      // Vérification pour la création\r\n      if (!hasPermission('create_members')) {\r\n        alert(\"Vous n'avez pas la permission de créer de nouveaux membres.\");\r\n        return;\r\n      }\r\n      \r\n      setEditingMember({\r\n        firstName: '',\r\n        lastName: '',\r\n        email: '',\r\n        phone: '',\r\n        role: 'member',\r\n      });\r\n    }\r\n    \r\n    setFormErrors({});\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n    setEditingMember(null);\r\n    setFormErrors({});\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  // --- CRÉATION/MODIFICATION D'UN MEMBRE ---\r\n  const handleSave = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    if (!editingMember) return;\r\n\r\n    setIsSubmitting(true);\r\n    setFormErrors({});\r\n\r\n    try {\r\n      // Validation côté client\r\n      const errors: { [key: string]: string } = {};\r\n      if (!editingMember.firstName.trim()) errors.firstName = 'Prénom requis';\r\n      if (!editingMember.lastName.trim()) errors.lastName = 'Nom requis';\r\n      if (!editingMember.email.trim()) errors.email = 'Email requis';\r\n      if (!editingMember.role) errors.role = 'Rôle requis';\r\n\r\n      // Vérifier l'unicité de l'email côté client (seulement pour création)\r\n      if (!editingMember.id) {\r\n        const emailExists = members.some(m => \r\n          m.user.email.toLowerCase() === editingMember.email.toLowerCase()\r\n        );\r\n        if (emailExists) {\r\n          errors.email = 'Cet email est déjà utilisé par un autre membre';\r\n        }\r\n      }\r\n\r\n      if (Object.keys(errors).length > 0) {\r\n        setFormErrors(errors);\r\n        return;\r\n      }\r\n\r\n      let response;\r\n      \r\n      if (editingMember.id) {\r\n        // MODIFICATION D'UN MEMBRE EXISTANT\r\n        response = await fetch(`${API_BASE_URL}/members/${editingMember.id}/update-role/`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Authorization': `Bearer ${user?.token}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            firstName: editingMember.firstName,\r\n            lastName: editingMember.lastName,\r\n            role: editingMember.role,\r\n          }),\r\n        });\r\n      } else {\r\n        // CRÉATION D'UN NOUVEAU MEMBRE\r\n        response = await fetch(`${API_BASE_URL}/members/create-with-credentials/`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Authorization': `Bearer ${user?.token}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(editingMember),\r\n        });\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || `Erreur lors de ${editingMember.id ? 'la modification' : 'la création'} du membre`);\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      // Actualiser la liste des membres\r\n      await fetchMembers();\r\n      \r\n      if (editingMember.id) {\r\n        alert('Membre modifié avec succès !');\r\n      } else {\r\n        alert(`Membre créé avec succès ! Mot de passe généré: ${result.generated_password}`);\r\n      }\r\n      \r\n      closeModal();\r\n      \r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Erreur lors de la sauvegarde');\r\n      console.error('Erreur lors de la sauvegarde:', err);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // --- SUPPRESSION D'UN MEMBRE ---\r\n  const handleDelete = async (memberId: number) => {\r\n    if (!hasPermission('delete_members')) {\r\n      alert(\"Vous n'avez pas la permission de supprimer des membres.\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm('Êtes-vous sûr de vouloir supprimer ce membre ?')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/members/${memberId}/`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${user?.token}`,\r\n        },\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || 'Erreur lors de la suppression');\r\n      }\r\n\r\n      // Actualiser la liste\r\n      await fetchMembers();\r\n      alert('Membre supprimé avec succès');\r\n      \r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Erreur lors de la suppression');\r\n      console.error('Erreur lors de la suppression:', err);\r\n    }\r\n  };\r\n\r\n  // --- GESTION DES CHAMPS DU FORMULAIRE ---\r\n  const handleInputChange = (field: keyof MemberFormData, value: string) => {\r\n    if (editingMember) {\r\n      setEditingMember(prev => prev ? { ...prev, [field]: value } : null);\r\n    }\r\n  };\r\n\r\n  // --- VÉRIFICATION DES PERMISSIONS ---\r\n  if (!hasPermission('view_members')) {\r\n    return (\r\n      <div style={styles.page}>\r\n        <div style={styles.errorContainer}>\r\n          <h3>Accès refusé</h3>\r\n          <p>Vous n'avez pas la permission de consulter la liste des membres.</p>\r\n          <p>Votre rôle actuel : <strong>{user?.role ? getRoleDisplayName(user.role as any) : 'Non défini'}</strong></p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- AFFICHAGE DE L'ERREUR ---\r\n  if (error && !loading) {\r\n    return (\r\n      <div style={styles.page}>\r\n        <div style={styles.errorContainer}>\r\n          <h3>Erreur de chargement</h3>\r\n          <p>{error}</p>\r\n          <button onClick={fetchMembers} style={styles.button}>\r\n            <FontAwesomeIcon icon={faRefresh} style={{ marginRight: '8px' }} />\r\n            Réessayer\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <header style={styles.header}>\r\n        <h2 style={styles.headerTitle}>\r\n          Gestion des Membres\r\n          {loading && <span style={styles.loadingText}> (Chargement...)</span>}\r\n        </h2>\r\n        {hasPermission('create_members') && (\r\n          <div style={styles.headerActions}>\r\n            <button onClick={fetchMembers} style={{...styles.button, backgroundColor: '#6b7280'}}>\r\n              <FontAwesomeIcon icon={faRefresh} style={{ marginRight: '8px' }} />\r\n              Actualiser\r\n            </button>\r\n            <button onClick={() => openModal()} style={styles.button}>\r\n              <FontAwesomeIcon icon={faPlus} style={{ marginRight: '8px' }} />\r\n              Ajouter un Membre\r\n            </button>\r\n          </div>\r\n        )}\r\n      </header>\r\n      \r\n      <div style={styles.controlsSection}>\r\n        <input \r\n          type=\"text\" \r\n          placeholder=\"Rechercher par nom...\" \r\n          value={searchTerm} \r\n          onChange={e => setSearchTerm(e.target.value)} \r\n          style={styles.searchInput} \r\n        />\r\n        <select \r\n          value={roleFilter} \r\n          onChange={e => setRoleFilter(e.target.value)} \r\n          style={styles.filterSelect}\r\n        >\r\n          <option value=\"\">Tous les rôles</option>\r\n          <option value=\"admin\">Administrateur</option>\r\n          <option value=\"president\">Président</option>\r\n          <option value=\"treasurer\">Trésorier</option>\r\n          <option value=\"secrecom\">Sécrécom</option>\r\n          <option value=\"censeur\">Censeur</option>\r\n          <option value=\"accountant\">Comptable</option>\r\n          <option value=\"member\">Membre</option>\r\n          <option value=\"guest\">Invité</option>\r\n        </select>\r\n      </div>\r\n\r\n      {loading ? (\r\n        <div style={styles.loadingContainer}>\r\n          <p>Chargement des membres...</p>\r\n        </div>\r\n      ) : filteredMembers.length === 0 ? (\r\n        <div style={styles.emptyState}>\r\n          <p>Aucun membre trouvé.</p>\r\n          {members.length === 0 && (\r\n            <p>Commencez par ajouter votre premier membre !</p>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        isMobile ? \r\n          <MobileMemberList members={filteredMembers} onEdit={openModal} onDelete={handleDelete} hasPermission={hasPermission} /> : \r\n          <DesktopMemberTable members={filteredMembers} onEdit={openModal} onDelete={handleDelete} hasPermission={hasPermission} />\r\n      )}\r\n\r\n      {isModalOpen && editingMember && (\r\n        <div style={styles.modalOverlay}>\r\n          <div style={styles.modalContent}>\r\n            <h3 style={styles.modalTitle}>\r\n              {editingMember.id ? 'Modifier le Membre' : 'Ajouter un Nouveau Membre'}\r\n            </h3>\r\n            <form onSubmit={handleSave} style={styles.modalForm}>\r\n              <ModalInput \r\n                label=\"Prénom\" \r\n                value={editingMember.firstName} \r\n                onChange={(e) => handleInputChange('firstName', e.target.value)} \r\n                error={formErrors.firstName}\r\n                disabled={isSubmitting}\r\n              />\r\n              <ModalInput \r\n                label=\"Nom\" \r\n                value={editingMember.lastName} \r\n                onChange={(e) => handleInputChange('lastName', e.target.value)} \r\n                error={formErrors.lastName}\r\n                disabled={isSubmitting}\r\n              />\r\n              <ModalInput \r\n                label=\"Email\" \r\n                type=\"email\" \r\n                value={editingMember.email} \r\n                onChange={(e) => handleInputChange('email', e.target.value)} \r\n                error={formErrors.email}\r\n                disabled={isSubmitting || !!editingMember.id} // Désactiver email en modification\r\n              />\r\n              <ModalSelect \r\n                label=\"Rôle\" \r\n                value={editingMember.role} \r\n                onChange={(e) => handleInputChange('role', e.target.value)} \r\n                error={formErrors.role}\r\n                disabled={isSubmitting}\r\n              >\r\n                <option value=\"member\">Membre</option>\r\n                <option value=\"president\">Président</option>\r\n                <option value=\"treasurer\">Trésorier</option>\r\n                <option value=\"secrecom\">Sécrécom</option>\r\n                <option value=\"censeur\">Censeur</option>\r\n                <option value=\"accountant\">Comptable</option>\r\n                <option value=\"guest\">Invité</option>\r\n              </ModalSelect>\r\n              \r\n              <div style={styles.modalActions}>\r\n                <button \r\n                  type=\"button\" \r\n                  onClick={closeModal} \r\n                  style={{...styles.button, backgroundColor: '#6b7280'}}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  Annuler\r\n                </button>\r\n                <button \r\n                  type=\"submit\" \r\n                  style={styles.button}\r\n                  disabled={isSubmitting}\r\n                >\r\n                  {isSubmitting ? \r\n                    (editingMember.id ? 'Modification...' : 'Création...') : \r\n                    (editingMember.id ? 'Modifier le Membre' : 'Créer le Membre')\r\n                  }\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\n// --- COMPOSANTS D'AFFICHAGE ---\r\nconst DesktopMemberTable: React.FC<{\r\n  members: ApiMember[], \r\n  onEdit: (m: ApiMember) => void, \r\n  onDelete: (id: number) => void, \r\n  hasPermission: any\r\n}> = ({ members, onEdit, onDelete, hasPermission }) => (\r\n  <div style={styles.tableContainer}>\r\n    <table style={styles.table}>\r\n      <thead>\r\n        <tr>\r\n          <th style={styles.th}>Nom</th>\r\n          <th style={styles.th}>Email</th>\r\n          <th style={styles.th}>Rôle</th>\r\n          <th style={styles.th}>Points Berry</th>\r\n          <th style={styles.th}>Parts</th>\r\n          {(hasPermission('edit_members') || hasPermission('delete_members')) && <th style={styles.th}>Actions</th>}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {members.map(member => (\r\n          <tr key={member.id}>\r\n            <td style={styles.td}>\r\n              <div style={{fontWeight: 'bold'}}>\r\n                {member.user.first_name} {member.user.last_name}\r\n              </div>\r\n              <div style={{fontSize: '12px', color: '#6b7280'}}>\r\n                ID: {member.id}\r\n              </div>\r\n            </td>\r\n            <td style={styles.td}>{member.user.email}</td>\r\n            <td style={styles.td}>\r\n              <RoleChip role={member.user.role} />\r\n            </td>\r\n            <td style={styles.td}>\r\n              <div style={{fontWeight: 'bold', fontSize: '16px'}}>\r\n                {member.berry_score}\r\n              </div>\r\n              <LevelChip score={member.berry_score} />\r\n            </td>\r\n            <td style={styles.td}>{member.shares}</td>\r\n            {(hasPermission('edit_members') || hasPermission('delete_members')) && (\r\n              <td style={styles.td}>\r\n                <div style={{display: 'flex', gap: '8px'}}>\r\n                  {hasPermission('edit_members') && (\r\n                    <button \r\n                      onClick={() => onEdit(member)} \r\n                      style={{...styles.actionButton, backgroundColor: '#3b82f6'}} \r\n                      title=\"Modifier\"\r\n                    >\r\n                      <FontAwesomeIcon icon={faPen}/>\r\n                    </button>\r\n                  )}\r\n                  {hasPermission('delete_members') && (\r\n                    <button \r\n                      onClick={() => onDelete(member.id)} \r\n                      style={{...styles.actionButton, backgroundColor: '#ef4444'}} \r\n                      title=\"Supprimer\"\r\n                    >\r\n                      <FontAwesomeIcon icon={faTrash}/>\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </td>\r\n            )}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n);\r\n\r\nconst MobileMemberList: React.FC<{\r\n  members: ApiMember[], \r\n  onEdit: (m: ApiMember) => void, \r\n  onDelete: (id: number) => void, \r\n  hasPermission: any\r\n}> = ({ members, onEdit, onDelete, hasPermission }) => (\r\n  <div style={styles.mobileList}>\r\n    {members.map(member => (\r\n      <div key={member.id} style={styles.mobileCard}>\r\n        <div style={styles.mobileCardHeader}>\r\n          <div>\r\n            <span style={styles.mobileCardTitle}>\r\n              {member.user.first_name} {member.user.last_name}\r\n            </span>\r\n            <RoleChip role={member.user.role} />\r\n          </div>\r\n        </div>\r\n        <div style={styles.mobileCardBody}>\r\n          <div style={styles.mobileCardRow}>\r\n            <span>Points Berry:</span> \r\n            <strong>{member.berry_score}</strong>\r\n          </div>\r\n          <div style={styles.mobileCardRow}>\r\n            <span>Niveau:</span> \r\n            <LevelChip score={member.berry_score} />\r\n          </div>\r\n          <div style={styles.mobileCardRow}>\r\n            <span>Parts:</span> \r\n            <span>{member.shares}</span>\r\n          </div>\r\n          <div style={styles.mobileCardRow}>\r\n            <span>Email:</span> \r\n            <span>{member.user.email}</span>\r\n          </div>\r\n        </div>\r\n        {(hasPermission('edit_members') || hasPermission('delete_members')) && (\r\n          <div style={styles.mobileCardFooter}>\r\n            {hasPermission('edit_members') && (\r\n              <button \r\n                onClick={() => onEdit(member)} \r\n                style={{...styles.button, flex: 1}}\r\n              >\r\n                <FontAwesomeIcon icon={faPen} style={{marginRight: '8px'}}/> \r\n                Modifier\r\n              </button>\r\n            )}\r\n            {hasPermission('delete_members') && (\r\n              <button \r\n                onClick={() => onDelete(member.id)} \r\n                style={{...styles.button, flex: 1, backgroundColor: '#ef4444'}}\r\n              >\r\n                <FontAwesomeIcon icon={faTrash} style={{marginRight: '8px'}}/> \r\n                Supprimer\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\n// --- SOUS-COMPOSANTS ---\r\nconst RoleChip: React.FC<{ role: string }> = ({ role }) => {\r\n  const roleColors: Record<string, string> = {\r\n    'admin': '#dbeafe',\r\n    'president': '#dcfce7',\r\n    'treasurer': '#fef3c7',\r\n    'secrecom': '#e5e7eb',\r\n    'censeur': '#f3e8ff',\r\n    'accountant': '#d1fae5',\r\n    'member': '#f3f4f6',\r\n    'guest': '#e5e7eb'\r\n  };\r\n  \r\n  const roleLabels: Record<string, string> = {\r\n    'admin': 'Admin',\r\n    'president': 'Président',\r\n    'treasurer': 'Trésorier',\r\n    'secrecom': 'Sécrécom',\r\n    'censeur': 'Censeur',\r\n    'accountant': 'Comptable',\r\n    'member': 'Membre',\r\n    'guest': 'Invité'\r\n  };\r\n  \r\n  return (\r\n    <span style={{ \r\n      ...styles.chip, \r\n      backgroundColor: roleColors[role] || '#e5e7eb', \r\n      color: '#374151' \r\n    }}>\r\n      {roleLabels[role] || role}\r\n    </span>\r\n  );\r\n};\r\n\r\nconst LevelChip: React.FC<{ score: number }> = ({ score }) => {\r\n  const getLevel = (score: number) => {\r\n    if (score >= 400) return { level: 'Platinum', color: '#f3e8ff' };\r\n    if (score >= 200) return { level: 'Gold', color: '#fef3c7' };\r\n    if (score >= 100) return { level: 'Silver', color: '#f1f5f9' };\r\n    return { level: 'Bronze', color: '#fef2f2' };\r\n  };\r\n  \r\n  const { level, color } = getLevel(score);\r\n  \r\n  return (\r\n    <span style={{ \r\n      ...styles.chip, \r\n      backgroundColor: color, \r\n      color: '#374151' \r\n    }}>\r\n      {level}\r\n    </span>\r\n  );\r\n};\r\n\r\n// --- COMPOSANTS DE FORMULAIRE ---\r\ninterface ModalInputProps extends InputHTMLAttributes<HTMLInputElement> { \r\n  label: string; \r\n  error?: string; \r\n}\r\n\r\nconst ModalInput: React.FC<ModalInputProps> = ({ label, error, ...props }) => (\r\n  <div>\r\n    <label style={styles.modalLabel}>{label}</label>\r\n    <input \r\n      style={{\r\n        ...styles.modalInput, \r\n        ...(error && styles.inputError)\r\n      }} \r\n      {...props} \r\n    />\r\n    {error && <p style={styles.errorMessage}>{error}</p>}\r\n  </div>\r\n);\r\n\r\ninterface ModalSelectProps extends SelectHTMLAttributes<HTMLSelectElement> { \r\n  label: string; \r\n  error?: string; \r\n  children: ReactNode; \r\n}\r\n\r\nconst ModalSelect: React.FC<ModalSelectProps> = ({ label, error, children, ...props }) => (\r\n  <div>\r\n    <label style={styles.modalLabel}>{label}</label>\r\n    <select \r\n      style={{\r\n        ...styles.modalInput, \r\n        ...(error && styles.inputError)\r\n      }} \r\n      {...props}\r\n    >\r\n      {children}\r\n    </select>\r\n    {error && <p style={styles.errorMessage}>{error}</p>}\r\n  </div>\r\n);\r\n\r\n// --- STYLES ---\r\nconst styles: { [key: string]: React.CSSProperties } = {\r\n  page: { fontFamily: 'Arial, sans-serif', padding: '16px', backgroundColor: '#f3f4f6', minHeight: '100vh' },\r\n  header: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px', flexWrap: 'wrap', gap: '16px' },\r\n  headerTitle: { fontSize: '24px', fontWeight: 'bold', color: '#1f2937', margin: 0 },\r\n  headerActions: { display: 'flex', gap: '12px' },\r\n  loadingText: { fontSize: '16px', fontWeight: 'normal', color: '#6b7280' },\r\n  controlsSection: { display: 'flex', gap: '16px', marginBottom: '24px', flexWrap: 'wrap' },\r\n  searchInput: { padding: '10px 12px', border: '1px solid #d1d5db', borderRadius: '8px', flexGrow: 1, minWidth: '200px' },\r\n  filterSelect: { padding: '10px 12px', border: '1px solid #d1d5db', borderRadius: '8px', backgroundColor: 'white' },\r\n  button: { padding: '10px 16px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600', display: 'flex', alignItems: 'center', justifyContent: 'center', transition: 'background-color 0.2s', fontSize: '14px' },\r\n  errorContainer: { textAlign: 'center', padding: '40px', backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  loadingContainer: { textAlign: 'center', padding: '40px' },\r\n  emptyState: { textAlign: 'center', padding: '40px', backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  tableContainer: { backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)', overflowX: 'auto' },\r\n  table: { width: '100%', borderCollapse: 'collapse' },\r\n  th: { padding: '12px 16px', textAlign: 'left', fontSize: '14px', color: '#4b5563', backgroundColor: '#f9fafb', borderBottom: '1px solid #e5e7eb', fontWeight: '600' },\r\n  td: { padding: '12px 16px', fontSize: '14px', color: '#374151', borderBottom: '1px solid #e5e7eb', verticalAlign: 'middle' },\r\n  chip: { padding: '4px 10px', borderRadius: '9999px', fontWeight: '600', fontSize: '12px', display: 'inline-block' },\r\n  actionButton: { width: '32px', height: '32px', border: 'none', borderRadius: '50%', color: 'white', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '14px' },\r\n  modalOverlay: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0, 0, 0, 0.6)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 1000, padding: '16px' },\r\n  modalContent: { backgroundColor: 'white', padding: '24px', borderRadius: '12px', width: '100%', maxWidth: '500px', boxShadow: '0 8px 16px rgba(0, 0, 0, 0.2)', maxHeight: '90vh', display: 'flex', flexDirection: 'column' },\r\n  modalTitle: { fontSize: '22px', fontWeight: 'bold', marginBottom: '24px', color: '#1f2937', flexShrink: 0, textAlign: 'center' },\r\n  modalForm: { flexGrow: 1, overflowY: 'auto', paddingRight: '12px', marginRight: '-12px', display: 'flex', flexDirection: 'column', gap: '16px' },\r\n  modalLabel: { display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151', fontSize: '14px' },\r\n  modalInput: { width: '100%', padding: '10px', border: '1px solid #d1d5db', borderRadius: '8px', boxSizing: 'border-box', fontSize: '16px' },\r\n  modalActions: { display: 'flex', justifyContent: 'flex-end', gap: '12px', marginTop: '24px', flexShrink: 0, borderTop: '1px solid #e5e7eb', paddingTop: '16px' },\r\n  inputError: { borderColor: '#ef4444' },\r\n  errorMessage: { color: '#ef4444', fontSize: '12px', marginTop: '4px' },\r\n  mobileList: { display: 'flex', flexDirection: 'column', gap: '16px' },\r\n  mobileCard: { backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)', overflow: 'hidden'},\r\n  mobileCardHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '12px 16px', backgroundColor: '#f9fafb', borderBottom: '1px solid #e5e7eb'},\r\n  mobileCardTitle: { fontWeight: 'bold', color: '#1f2937' },\r\n  mobileCardBody: { padding: '16px', display: 'flex', flexDirection: 'column', gap: '10px' },\r\n  mobileCardRow: { display: 'flex', justifyContent: 'space-between', fontSize: '14px', alignItems: 'center' },\r\n  mobileCardFooter: { padding: '12px 16px', backgroundColor: '#f9fafb', borderTop: '1px solid #e5e7eb', display: 'flex', gap: '12px' },\r\n};\r\n\r\nexport default Members;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}