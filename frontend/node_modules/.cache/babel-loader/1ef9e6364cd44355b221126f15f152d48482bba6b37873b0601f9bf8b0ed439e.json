{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{useAuth}from'../context/AuthContext';import{useNavigate}from'react-router-dom';// --- INTERFACES & CONSTANTES ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MINIMUM_CONTRIBUTION=4000;const CONTRIBUTION_DUE_DAY=25;const LATE_FEE_PER_DAY=200;const MOCK_TOTAL_FUND=150000;// Simulation du total du fonds pour les calculs de bonus\n// --- DONNÉES DE SIMULATION ---\n// Les membres sont maintenant dans un état pour pouvoir mettre à jour leurs points\nconst initialMembers=[{id:'M001',name:'Alice Dupont',berryPoints:120},{id:'M002',name:'Bob Martin',berryPoints:85},{id:'M003',name:'Charlie Brown',berryPoints:200},{id:'M004',name:'Diana Prince',berryPoints:45}];const mockContributions=[{id:'C001',memberId:'M001',memberName:'Alice Dupont',amount:5000,date:'2025-06-25',status:'Validée',paymentMethod:'Virement Bancaire',pointsChange:5},{id:'C002',memberId:'M002',memberName:'Bob Martin',amount:4000,date:'2025-06-28',status:'En retard',paymentMethod:'Mobile Money',pointsChange:-15,fineAmount:600},{id:'C003',memberId:'M003',memberName:'Charlie Brown',amount:6800,date:'2025-07-24',status:'En attente',paymentMethod:'Espèces'},{id:'C004',memberId:'M004',memberName:'Diana Prince',amount:10000,date:'2025-07-25',status:'Validée',paymentMethod:'Virement Bancaire',pointsChange:15},{id:'C005',memberId:'M001',memberName:'Alice Dupont',amount:4500,date:'2025-05-25',status:'Annulée',paymentMethod:'Mobile Money'}];// --- SERVICE DE LOGIQUE MÉTIER (Simulation de ce qui serait sur le backend) ---\nconst calculateContributionImpact=(contributionAmount,contributionDateStr,totalFund)=>{let pointsChange=0;let fineAmount=0;const contributionDate=new Date(contributionDateStr);// Règle 1: Pénalité de retard\nconst isLate=contributionDate.getDate()>CONTRIBUTION_DUE_DAY;if(isLate){pointsChange=-15;// Pénalité fixe pour le retard\nconst daysLate=contributionDate.getDate()-CONTRIBUTION_DUE_DAY;fineAmount=daysLate*LATE_FEE_PER_DAY;}else{pointsChange=5;// +5 points pour chaque contribution assidue (non en retard)\n}// Règle 2: Bonus pour contribution dépassant de 70% la base (4000 + 2800 = 6800 XAF)\nif(contributionAmount>MINIMUM_CONTRIBUTION*1.7){pointsChange+=5;}// Règle 3: Bonus pour contribution > 20% du total du fonds\nif(contributionAmount>totalFund*0.2){pointsChange+=10;}// Règle 4: Bonus pour tranches de montant\nif(contributionAmount>20000&&contributionAmount<=50000){pointsChange+=10;}else if(contributionAmount>50001){pointsChange+=20;}return{pointsChange,fineAmount};};// --- COMPOSANT PRINCIPAL ---\nconst Contributions=()=>{const{user,hasPermission}=useAuth();const navigate=useNavigate();// --- ÉTATS ---\nconst[contributions,setContributions]=useState(mockContributions);const[members,setMembers]=useState(initialMembers);// État pour les membres et leurs points\nconst[filteredContributions,setFilteredContributions]=useState([]);const[searchTerm,setSearchTerm]=useState('');const[filterStatus,setFilterStatus]=useState('All');const[isModalOpen,setIsModalOpen]=useState(false);const initialFormState={memberId:'',memberName:'',amount:MINIMUM_CONTRIBUTION,date:new Date().toISOString().split('T')[0],paymentMethod:'Mobile Money'};const[currentContribution,setCurrentContribution]=useState(initialFormState);const[editingContribution,setEditingContribution]=useState(null);const[formError,setFormError]=useState('');// --- EFFETS ---\nuseEffect(()=>{let currentData=contributions;if(searchTerm){currentData=currentData.filter(c=>c.memberName.toLowerCase().includes(searchTerm.toLowerCase())||c.memberId.toLowerCase().includes(searchTerm.toLowerCase())||c.id.toLowerCase().includes(searchTerm.toLowerCase()));}if(filterStatus!=='All'){currentData=currentData.filter(c=>c.status===filterStatus);}setFilteredContributions(currentData);},[searchTerm,filterStatus,contributions]);// --- CALCULS MEMOIZÉS ---\nconst stats=useMemo(()=>({totalPending:contributions.filter(c=>c.status==='En attente').length,totalLate:contributions.filter(c=>c.status==='En retard').length,currentMonthValidated:contributions.filter(c=>{const cDate=new Date(c.date);const today=new Date();return c.status==='Validée'&&cDate.getMonth()===today.getMonth()&&cDate.getFullYear()===today.getFullYear();}).reduce((sum,c)=>sum+c.amount,0)}),[contributions]);const selectedMemberInModal=useMemo(()=>{return members.find(m=>m.id===currentContribution.memberId);},[currentContribution.memberId,members]);// --- GESTIONNAIRES D'ÉVÉNEMENTS ---\nconst handleOpenModalForAdd=()=>{setEditingContribution(null);setCurrentContribution(initialFormState);setFormError('');setIsModalOpen(true);};const handleOpenModalForEdit=contribution=>{setEditingContribution(contribution);setCurrentContribution({memberId:contribution.memberId,memberName:contribution.memberName,amount:contribution.amount,date:contribution.date,paymentMethod:contribution.paymentMethod});setFormError('');setIsModalOpen(true);};const handleDelete=id=>{// Note: La logique de restauration des points Berry lors d'une suppression est complexe\n// et devrait être gérée côté serveur. Ici, nous supprimons simplement la transaction.\nif(!hasPermission('delete_contribution')){alert(\"Action non autorisée.\");return;}if(window.confirm('Êtes-vous sûr de vouloir supprimer cette contribution ?')){setContributions(contributions.filter(c=>c.id!==id));}};const handleSave=()=>{// Validation\nconst selectedMember=members.find(m=>m.id===currentContribution.memberId);if(!selectedMember||!currentContribution.amount){setFormError('Veuillez sélectionner un membre et saisir un montant valide.');return;}if(currentContribution.amount<MINIMUM_CONTRIBUTION){setFormError(`Le montant minimal est de ${MINIMUM_CONTRIBUTION} XAF.`);return;}// *** LOGIQUE MÉTIER INTÉGRÉE ICI ***\nconst{pointsChange,fineAmount}=calculateContributionImpact(currentContribution.amount,currentContribution.date,MOCK_TOTAL_FUND);let status=fineAmount>0?'En retard':'En attente';if(hasPermission('validate_contribution'))status='Validée';if(editingContribution){// La mise à jour est complexe (faut-il recalculer les points ?), nous modifions juste les données pour la démo\nsetContributions(contributions.map(c=>c.id===editingContribution.id?{...editingContribution,...currentContribution,pointsChange,fineAmount}// Ré-évalue l'impact\n:c));}else{// Ajout d'une nouvelle contribution\nconst newContribution={id:`C${Date.now()}`,...currentContribution,memberName:selectedMember.name,// Assurer la cohérence du nom\nstatus:status,pointsChange,fineAmount};setContributions([newContribution,...contributions]);// Mettre à jour les points du membre\nsetMembers(members.map(m=>m.id===selectedMember.id?{...m,berryPoints:m.berryPoints+pointsChange}:m));}setIsModalOpen(false);};const handleStatusChange=(id,newStatus)=>{if(!hasPermission('update_contribution_status')){alert(\"Action non autorisée.\");return;}setContributions(contributions.map(c=>c.id===id?{...c,status:newStatus}:c));};// --- RENDU ---\nreturn/*#__PURE__*/_jsxs(\"div\",{style:styles.page,children:[/*#__PURE__*/_jsxs(\"header\",{style:styles.header,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.headerTitle,children:\"Gestion des Contributions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),style:styles.backButton,children:\"\\u2190 Retour au Tableau de bord\"})]}),/*#__PURE__*/_jsxs(\"section\",{style:styles.statSection,children:[/*#__PURE__*/_jsx(StatCard,{title:\"Contributions Valid\\xE9es (ce mois)\",value:`${stats.currentMonthValidated.toLocaleString()} XAF`}),/*#__PURE__*/_jsx(StatCard,{title:\"Contributions en Attente\",value:stats.totalPending.toString()}),/*#__PURE__*/_jsx(StatCard,{title:\"Contributions en Retard\",value:stats.totalLate.toString()})]}),/*#__PURE__*/_jsxs(\"section\",{style:styles.controlsSection,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Rechercher par nom, ID...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:styles.searchInput}),/*#__PURE__*/_jsxs(\"select\",{value:filterStatus,onChange:e=>setFilterStatus(e.target.value),style:styles.filterSelect,children:[/*#__PURE__*/_jsx(\"option\",{value:\"All\",children:\"Tous les statuts\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Valid\\xE9e\",children:\"Valid\\xE9e\"}),/*#__PURE__*/_jsx(\"option\",{value:\"En attente\",children:\"En attente\"}),/*#__PURE__*/_jsx(\"option\",{value:\"En retard\",children:\"En retard\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Annul\\xE9e\",children:\"Annul\\xE9e\"})]}),hasPermission('add_contribution')&&/*#__PURE__*/_jsx(\"button\",{onClick:handleOpenModalForAdd,style:styles.addButton,children:\"+ Ajouter une Cotisation\"})]}),/*#__PURE__*/_jsx(\"div\",{style:styles.tableContainer,children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Membre\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Montant\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Impact (Points/Amendes)\"}),\" \",/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredContributions.map(c=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:c.id}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:c.memberName}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[c.amount.toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:new Date(c.date).toLocaleDateString('fr-FR')}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsx(StatusChip,{status:c.status})}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[\" \",c.pointsChange!==undefined&&/*#__PURE__*/_jsxs(\"span\",{style:{color:c.pointsChange>0?'#22c55e':'#ef4444',fontWeight:'bold'},children:[c.pointsChange>0?`+${c.pointsChange}`:c.pointsChange,\" pts\"]}),c.fineAmount?/*#__PURE__*/_jsxs(\"span\",{style:{color:'#ef4444',marginLeft:'8px'},children:[\"(\",c.fineAmount,\" XAF)\"]}):'']}),/*#__PURE__*/_jsxs(\"td\",{style:{...styles.td,display:'flex',gap:'8px'},children:[hasPermission('edit_contribution')&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleOpenModalForEdit(c),style:styles.actionButtonEdit,children:\"Modifier\"}),hasPermission('delete_contribution')&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(c.id),style:styles.actionButtonDelete,children:\"Supprimer\"})]})]},c.id))})]})}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modalContent,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.modalTitle,children:editingContribution?'Modifier la Contribution':'Ajouter une Contribution'}),formError&&/*#__PURE__*/_jsx(\"p\",{style:{color:'#ef4444',textAlign:'center'},children:formError}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalForm,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.modalLabel,children:\"Membre\"}),/*#__PURE__*/_jsxs(\"select\",{style:styles.modalInput,value:currentContribution.memberId,onChange:e=>setCurrentContribution({...currentContribution,memberId:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"S\\xE9lectionner un membre...\"}),members.map(m=>/*#__PURE__*/_jsx(\"option\",{value:m.id,children:m.name},m.id))]}),selectedMemberInModal&&/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:'12px',color:'#1e3a8a',marginTop:'4px'},children:[\"Solde actuel: \",selectedMemberInModal.berryPoints,\" points\"]})]}),/*#__PURE__*/_jsx(ModalInput,{label:\"Montant (XAF)\",type:\"number\",value:currentContribution.amount,onChange:e=>setCurrentContribution({...currentContribution,amount:parseFloat(e.target.value)||0})}),/*#__PURE__*/_jsx(ModalInput,{label:\"Date\",type:\"date\",value:currentContribution.date,onChange:e=>setCurrentContribution({...currentContribution,date:e.target.value})}),/*#__PURE__*/_jsxs(ModalSelect,{label:\"M\\xE9thode de Paiement\",value:currentContribution.paymentMethod,onChange:e=>setCurrentContribution({...currentContribution,paymentMethod:e.target.value}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"Mobile Money\",children:\"Mobile Money\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Virement Bancaire\",children:\"Virement Bancaire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Esp\\xE8ces\",children:\"Esp\\xE8ces\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Ch\\xE8que\",children:\"Ch\\xE8que\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalActions,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsModalOpen(false),style:styles.modalButtonCancel,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,style:styles.modalButtonSave,children:editingContribution?'Enregistrer':'Ajouter'})]})]})})]});};// --- COMPOSANTS D'ASSISTANCE ---\nconst ModalInput=_ref=>{let{label,...props}=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.modalLabel,children:label}),/*#__PURE__*/_jsx(\"input\",{style:styles.modalInput,...props})]});};const ModalSelect=_ref2=>{let{label,children,...props}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:styles.modalLabel,children:label}),/*#__PURE__*/_jsx(\"select\",{style:styles.modalInput,...props,children:children})]});};const StatCard=_ref3=>{let{title,value}=_ref3;return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',padding:'20px',borderRadius:'8px',boxShadow:'0 4px 6px rgba(0,0,0,0.1)',flex:'1 1 250px',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h4\",{style:{margin:0,color:'#4b5563',fontSize:'16px',fontWeight:'600'},children:title}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'8px 0 0 0',color:'#1e3a8a',fontSize:'28px',fontWeight:'bold'},children:value})]});};const StatusChip=_ref4=>{let{status}=_ref4;const chipStyle={padding:'4px 12px',borderRadius:'9999px',fontWeight:'600',fontSize:'12px',color:'white',backgroundColor:{'Validée':'#22c55e','En attente':'#f59e0b','En retard':'#ef4444','Annulée':'#6b7280'}[status]};return/*#__PURE__*/_jsx(\"span\",{style:chipStyle,children:status});};// --- STYLES EN LIGNE --- (inchangé)\nconst styles={page:{fontFamily:'Arial, sans-serif',padding:'24px',backgroundColor:'#f3f4f6',minHeight:'100vh'},header:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'32px',flexWrap:'wrap',gap:'16px'},headerTitle:{fontSize:'28px',fontWeight:'bold',color:'#1f2937',margin:0},backButton:{padding:'10px 20px',backgroundColor:'#3b82f6',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'600'},statSection:{display:'flex',gap:'24px',flexWrap:'wrap',marginBottom:'32px'},controlsSection:{marginBottom:'24px',display:'flex',gap:'16px',flexWrap:'wrap',alignItems:'center'},searchInput:{padding:'10px 12px',border:'1px solid #d1d5db',borderRadius:'8px',flexGrow:1,minWidth:'300px'},filterSelect:{padding:'10px 12px',border:'1px solid #d1d5db',borderRadius:'8px',backgroundColor:'white'},addButton:{padding:'10px 20px',backgroundColor:'#2563eb',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'600'},tableContainer:{backgroundColor:'white',borderRadius:'8px',boxShadow:'0 4px 6px rgba(0, 0, 0, 0.1)',overflowX:'auto'},table:{width:'100%',borderCollapse:'collapse'},th:{padding:'12px 16px',textAlign:'left',fontSize:'14px',color:'#4b5563',backgroundColor:'#f9fafb',borderBottom:'1px solid #e5e7eb',fontWeight:'600'},td:{padding:'12px 16px',fontSize:'14px',color:'#374151',borderBottom:'1px solid #e5e7eb'},actionButtonEdit:{padding:'4px 8px',fontSize:'12px',fontWeight:'600',color:'white',backgroundColor:'#f59e0b',border:'none',borderRadius:'6px',cursor:'pointer'},actionButtonDelete:{padding:'4px 8px',fontSize:'12px',fontWeight:'600',color:'white',backgroundColor:'#ef4444',border:'none',borderRadius:'6px',cursor:'pointer'},actionSelect:{padding:'4px 8px',fontSize:'12px',border:'1px solid #d1d5db',borderRadius:'6px'},modalOverlay:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0, 0, 0, 0.5)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:1000},modalContent:{backgroundColor:'white',padding:'32px',borderRadius:'12px',width:'90%',maxWidth:'500px',boxShadow:'0 8px 16px rgba(0, 0, 0, 0.2)'},modalTitle:{fontSize:'24px',fontWeight:'bold',marginBottom:'24px',color:'#1f2937'},modalForm:{display:'flex',flexDirection:'column',gap:'16px'},modalLabel:{display:'block',marginBottom:'8px',fontWeight:'600',color:'#374151'},modalInput:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'8px',boxSizing:'border-box'},modalActions:{display:'flex',justifyContent:'flex-end',gap:'12px',marginTop:'32px'},modalButtonCancel:{padding:'10px 20px',backgroundColor:'#6b7280',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'600'},modalButtonSave:{padding:'10px 20px',backgroundColor:'#2563eb',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'600'}};export default Contributions;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useAuth","useNavigate","jsx","_jsx","jsxs","_jsxs","MINIMUM_CONTRIBUTION","CONTRIBUTION_DUE_DAY","LATE_FEE_PER_DAY","MOCK_TOTAL_FUND","initialMembers","id","name","berryPoints","mockContributions","memberId","memberName","amount","date","status","paymentMethod","pointsChange","fineAmount","calculateContributionImpact","contributionAmount","contributionDateStr","totalFund","contributionDate","Date","isLate","getDate","daysLate","Contributions","user","hasPermission","navigate","contributions","setContributions","members","setMembers","filteredContributions","setFilteredContributions","searchTerm","setSearchTerm","filterStatus","setFilterStatus","isModalOpen","setIsModalOpen","initialFormState","toISOString","split","currentContribution","setCurrentContribution","editingContribution","setEditingContribution","formError","setFormError","currentData","filter","c","toLowerCase","includes","stats","totalPending","length","totalLate","currentMonthValidated","cDate","today","getMonth","getFullYear","reduce","sum","selectedMemberInModal","find","m","handleOpenModalForAdd","handleOpenModalForEdit","contribution","handleDelete","alert","window","confirm","handleSave","selectedMember","map","newContribution","now","handleStatusChange","newStatus","style","styles","page","children","header","headerTitle","onClick","backButton","statSection","StatCard","title","value","toLocaleString","toString","controlsSection","type","placeholder","onChange","e","target","searchInput","filterSelect","addButton","tableContainer","table","th","td","toLocaleDateString","StatusChip","undefined","color","fontWeight","marginLeft","display","gap","actionButtonEdit","actionButtonDelete","modalOverlay","modalContent","modalTitle","textAlign","modalForm","modalLabel","modalInput","disabled","fontSize","marginTop","ModalInput","label","parseFloat","ModalSelect","modalActions","modalButtonCancel","modalButtonSave","_ref","props","_ref2","_ref3","backgroundColor","padding","borderRadius","boxShadow","flex","margin","_ref4","chipStyle","fontFamily","minHeight","justifyContent","alignItems","marginBottom","flexWrap","border","cursor","flexGrow","minWidth","overflowX","width","borderCollapse","borderBottom","actionSelect","position","top","left","right","bottom","zIndex","maxWidth","flexDirection","boxSizing"],"sources":["D:/Projects/FriendlyBanks/frontend/src/components/Contributions.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, ChangeEvent, InputHTMLAttributes, SelectHTMLAttributes, ReactNode } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// --- INTERFACES & CONSTANTES ---\r\n\r\ninterface Contribution {\r\n  id: string;\r\n  memberId: string;\r\n  memberName: string;\r\n  amount: number;\r\n  date: string; // Format YYYY-MM-DD\r\n  status: 'Validée' | 'En attente' | 'Annulée' | 'En retard';\r\n  paymentMethod: 'Mobile Money' | 'Virement Bancaire' | 'Espèces' | 'Chèque';\r\n  // NOUVEAUX CHAMPS pour suivre l'impact\r\n  pointsChange?: number;\r\n  fineAmount?: number;\r\n}\r\n\r\ninterface Member {\r\n  id: string;\r\n  name: string;\r\n  berryPoints: number; // Propriété essentielle pour suivre les points\r\n}\r\n\r\nconst MINIMUM_CONTRIBUTION = 4000;\r\nconst CONTRIBUTION_DUE_DAY = 25;\r\nconst LATE_FEE_PER_DAY = 200;\r\nconst MOCK_TOTAL_FUND = 150000; // Simulation du total du fonds pour les calculs de bonus\r\n\r\n// --- DONNÉES DE SIMULATION ---\r\n\r\n// Les membres sont maintenant dans un état pour pouvoir mettre à jour leurs points\r\nconst initialMembers: Member[] = [\r\n  { id: 'M001', name: 'Alice Dupont', berryPoints: 120 },\r\n  { id: 'M002', name: 'Bob Martin', berryPoints: 85 },\r\n  { id: 'M003', name: 'Charlie Brown', berryPoints: 200 },\r\n  { id: 'M004', name: 'Diana Prince', berryPoints: 45 },\r\n];\r\n\r\nconst mockContributions: Contribution[] = [\r\n  { id: 'C001', memberId: 'M001', memberName: 'Alice Dupont', amount: 5000, date: '2025-06-25', status: 'Validée', paymentMethod: 'Virement Bancaire', pointsChange: 5 },\r\n  { id: 'C002', memberId: 'M002', memberName: 'Bob Martin', amount: 4000, date: '2025-06-28', status: 'En retard', paymentMethod: 'Mobile Money', pointsChange: -15, fineAmount: 600 },\r\n  { id: 'C003', memberId: 'M003', memberName: 'Charlie Brown', amount: 6800, date: '2025-07-24', status: 'En attente', paymentMethod: 'Espèces' },\r\n  { id: 'C004', memberId: 'M004', memberName: 'Diana Prince', amount: 10000, date: '2025-07-25', status: 'Validée', paymentMethod: 'Virement Bancaire', pointsChange: 15 },\r\n  { id: 'C005', memberId: 'M001', memberName: 'Alice Dupont', amount: 4500, date: '2025-05-25', status: 'Annulée', paymentMethod: 'Mobile Money' },\r\n];\r\n\r\n// --- SERVICE DE LOGIQUE MÉTIER (Simulation de ce qui serait sur le backend) ---\r\nconst calculateContributionImpact = (contributionAmount: number, contributionDateStr: string, totalFund: number) => {\r\n  let pointsChange = 0;\r\n  let fineAmount = 0;\r\n  const contributionDate = new Date(contributionDateStr);\r\n  \r\n  // Règle 1: Pénalité de retard\r\n  const isLate = contributionDate.getDate() > CONTRIBUTION_DUE_DAY;\r\n  if (isLate) {\r\n    pointsChange = -15; // Pénalité fixe pour le retard\r\n    const daysLate = contributionDate.getDate() - CONTRIBUTION_DUE_DAY;\r\n    fineAmount = daysLate * LATE_FEE_PER_DAY;\r\n  } else {\r\n    pointsChange = 5; // +5 points pour chaque contribution assidue (non en retard)\r\n  }\r\n\r\n  // Règle 2: Bonus pour contribution dépassant de 70% la base (4000 + 2800 = 6800 XAF)\r\n  if (contributionAmount > (MINIMUM_CONTRIBUTION * 1.7)) {\r\n    pointsChange += 5;\r\n  }\r\n  \r\n  // Règle 3: Bonus pour contribution > 20% du total du fonds\r\n  if (contributionAmount > (totalFund * 0.2)) {\r\n    pointsChange += 10;\r\n  }\r\n  \r\n  // Règle 4: Bonus pour tranches de montant\r\n  if (contributionAmount > 20000 && contributionAmount <= 50000) {\r\n    pointsChange += 10;\r\n  } else if (contributionAmount > 50001) {\r\n    pointsChange += 20;\r\n  }\r\n\r\n  return { pointsChange, fineAmount };\r\n};\r\n\r\n\r\n// --- COMPOSANT PRINCIPAL ---\r\n\r\nconst Contributions: React.FC = () => {\r\n  const { user, hasPermission } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  // --- ÉTATS ---\r\n  const [contributions, setContributions] = useState<Contribution[]>(mockContributions);\r\n  const [members, setMembers] = useState<Member[]>(initialMembers); // État pour les membres et leurs points\r\n  const [filteredContributions, setFilteredContributions] = useState<Contribution[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('All');\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  \r\n  const initialFormState: Omit<Contribution, 'id' | 'status'> = {\r\n    memberId: '',\r\n    memberName: '',\r\n    amount: MINIMUM_CONTRIBUTION,\r\n    date: new Date().toISOString().split('T')[0],\r\n    paymentMethod: 'Mobile Money',\r\n  };\r\n  \r\n  const [currentContribution, setCurrentContribution] = useState(initialFormState);\r\n  const [editingContribution, setEditingContribution] = useState<Contribution | null>(null);\r\n  const [formError, setFormError] = useState<string>('');\r\n\r\n  // --- EFFETS ---\r\n  useEffect(() => {\r\n    let currentData = contributions;\r\n    if (searchTerm) {\r\n      currentData = currentData.filter(c =>\r\n        c.memberName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.memberId.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.id.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n    if (filterStatus !== 'All') {\r\n      currentData = currentData.filter(c => c.status === filterStatus);\r\n    }\r\n    setFilteredContributions(currentData);\r\n  }, [searchTerm, filterStatus, contributions]);\r\n\r\n  // --- CALCULS MEMOIZÉS ---\r\n  const stats = useMemo(() => ({\r\n    totalPending: contributions.filter(c => c.status === 'En attente').length,\r\n    totalLate: contributions.filter(c => c.status === 'En retard').length,\r\n    currentMonthValidated: contributions.filter(c => {\r\n      const cDate = new Date(c.date);\r\n      const today = new Date();\r\n      return c.status === 'Validée' && cDate.getMonth() === today.getMonth() && cDate.getFullYear() === today.getFullYear();\r\n    }).reduce((sum, c) => sum + c.amount, 0),\r\n  }), [contributions]);\r\n\r\n  const selectedMemberInModal = useMemo(() => {\r\n    return members.find(m => m.id === currentContribution.memberId);\r\n  }, [currentContribution.memberId, members]);\r\n\r\n  // --- GESTIONNAIRES D'ÉVÉNEMENTS ---\r\n\r\n  const handleOpenModalForAdd = () => {\r\n    setEditingContribution(null);\r\n    setCurrentContribution(initialFormState);\r\n    setFormError('');\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleOpenModalForEdit = (contribution: Contribution) => {\r\n    setEditingContribution(contribution);\r\n    setCurrentContribution({\r\n      memberId: contribution.memberId,\r\n      memberName: contribution.memberName,\r\n      amount: contribution.amount,\r\n      date: contribution.date,\r\n      paymentMethod: contribution.paymentMethod,\r\n    });\r\n    setFormError('');\r\n    setIsModalOpen(true);\r\n  };\r\n  \r\n  const handleDelete = (id: string) => {\r\n    // Note: La logique de restauration des points Berry lors d'une suppression est complexe\r\n    // et devrait être gérée côté serveur. Ici, nous supprimons simplement la transaction.\r\n    if (!hasPermission('delete_contribution')) {\r\n        alert(\"Action non autorisée.\");\r\n        return;\r\n    }\r\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer cette contribution ?')) {\r\n      setContributions(contributions.filter(c => c.id !== id));\r\n    }\r\n  };\r\n\r\n  const handleSave = () => {\r\n    // Validation\r\n    const selectedMember = members.find(m => m.id === currentContribution.memberId);\r\n    if (!selectedMember || !currentContribution.amount) {\r\n      setFormError('Veuillez sélectionner un membre et saisir un montant valide.');\r\n      return;\r\n    }\r\n    if (currentContribution.amount < MINIMUM_CONTRIBUTION) {\r\n      setFormError(`Le montant minimal est de ${MINIMUM_CONTRIBUTION} XAF.`);\r\n      return;\r\n    }\r\n\r\n    // *** LOGIQUE MÉTIER INTÉGRÉE ICI ***\r\n    const { pointsChange, fineAmount } = calculateContributionImpact(\r\n      currentContribution.amount,\r\n      currentContribution.date,\r\n      MOCK_TOTAL_FUND\r\n    );\r\n\r\n    let status: Contribution['status'] = fineAmount > 0 ? 'En retard' : 'En attente';\r\n    if(hasPermission('validate_contribution')) status = 'Validée';\r\n\r\n    if (editingContribution) {\r\n      // La mise à jour est complexe (faut-il recalculer les points ?), nous modifions juste les données pour la démo\r\n      setContributions(contributions.map(c => \r\n        c.id === editingContribution.id \r\n          ? { ...editingContribution, ...currentContribution, pointsChange, fineAmount } // Ré-évalue l'impact\r\n          : c\r\n      ));\r\n    } else {\r\n      // Ajout d'une nouvelle contribution\r\n      const newContribution: Contribution = {\r\n        id: `C${Date.now()}`,\r\n        ...currentContribution,\r\n        memberName: selectedMember.name, // Assurer la cohérence du nom\r\n        status: status, \r\n        pointsChange,\r\n        fineAmount,\r\n      };\r\n      setContributions([newContribution, ...contributions]);\r\n\r\n      // Mettre à jour les points du membre\r\n      setMembers(members.map(m => \r\n        m.id === selectedMember.id \r\n          ? { ...m, berryPoints: m.berryPoints + pointsChange }\r\n          : m\r\n      ));\r\n    }\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const handleStatusChange = (id: string, newStatus: Contribution['status']) => {\r\n    if (!hasPermission('update_contribution_status')) {\r\n      alert(\"Action non autorisée.\");\r\n      return;\r\n    }\r\n    setContributions(contributions.map(c => (c.id === id ? { ...c, status: newStatus } : c)));\r\n  };\r\n\r\n\r\n  // --- RENDU ---\r\n\r\n  return (\r\n    <div style={styles.page}>\r\n      <header style={styles.header}>\r\n        <h2 style={styles.headerTitle}>Gestion des Contributions</h2>\r\n        <button onClick={() => navigate('/')} style={styles.backButton}>← Retour au Tableau de bord</button>\r\n      </header>\r\n\r\n      <section style={styles.statSection}>\r\n        <StatCard title=\"Contributions Validées (ce mois)\" value={`${stats.currentMonthValidated.toLocaleString()} XAF`} />\r\n        <StatCard title=\"Contributions en Attente\" value={stats.totalPending.toString()} />\r\n        <StatCard title=\"Contributions en Retard\" value={stats.totalLate.toString()} />\r\n      </section>\r\n\r\n      <section style={styles.controlsSection}>\r\n        <input type=\"text\" placeholder=\"Rechercher par nom, ID...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} style={styles.searchInput} />\r\n        <select value={filterStatus} onChange={(e) => setFilterStatus(e.target.value)} style={styles.filterSelect}>\r\n          <option value=\"All\">Tous les statuts</option>\r\n          <option value=\"Validée\">Validée</option>\r\n          <option value=\"En attente\">En attente</option>\r\n          <option value=\"En retard\">En retard</option>\r\n          <option value=\"Annulée\">Annulée</option>\r\n        </select>\r\n        {hasPermission('add_contribution') && (\r\n          <button onClick={handleOpenModalForAdd} style={styles.addButton}>+ Ajouter une Cotisation</button>\r\n        )}\r\n      </section>\r\n\r\n      <div style={styles.tableContainer}>\r\n        <table style={styles.table}>\r\n          <thead>\r\n            <tr>\r\n              <th style={styles.th}>ID</th>\r\n              <th style={styles.th}>Membre</th>\r\n              <th style={styles.th}>Montant</th>\r\n              <th style={styles.th}>Date</th>\r\n              <th style={styles.th}>Statut</th>\r\n              <th style={styles.th}>Impact (Points/Amendes)</th> {/* NOUVELLE COLONNE */}\r\n              <th style={styles.th}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredContributions.map((c) => (\r\n                <tr key={c.id}>\r\n                  <td style={styles.td}>{c.id}</td>\r\n                  <td style={styles.td}>{c.memberName}</td>\r\n                  <td style={styles.td}>{c.amount.toLocaleString()} XAF</td>\r\n                  <td style={styles.td}>{new Date(c.date).toLocaleDateString('fr-FR')}</td>\r\n                  <td style={styles.td}><StatusChip status={c.status} /></td>\r\n                  <td style={styles.td}> {/* NOUVELLE CELLULE */}\r\n                    {c.pointsChange !== undefined && (\r\n                      <span style={{ color: c.pointsChange > 0 ? '#22c55e' : '#ef4444', fontWeight: 'bold' }}>\r\n                        {c.pointsChange > 0 ? `+${c.pointsChange}` : c.pointsChange} pts\r\n                      </span>\r\n                    )}\r\n                    {c.fineAmount ? <span style={{ color: '#ef4444', marginLeft: '8px' }}>({c.fineAmount} XAF)</span> : ''}\r\n                  </td>\r\n                  <td style={{...styles.td, display: 'flex', gap: '8px' }}>\r\n                    {hasPermission('edit_contribution') && (<button onClick={() => handleOpenModalForEdit(c)} style={styles.actionButtonEdit}>Modifier</button>)}\r\n                    {hasPermission('delete_contribution') && (<button onClick={() => handleDelete(c.id)} style={styles.actionButtonDelete}>Supprimer</button>)}\r\n                  </td>\r\n                </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {isModalOpen && (\r\n        <div style={styles.modalOverlay}>\r\n          <div style={styles.modalContent}>\r\n            <h3 style={styles.modalTitle}>\r\n              {editingContribution ? 'Modifier la Contribution' : 'Ajouter une Contribution'}\r\n            </h3>\r\n            {formError && <p style={{ color: '#ef4444', textAlign: 'center' }}>{formError}</p>}\r\n            \r\n            <div style={styles.modalForm}>\r\n                <div>\r\n                    <label style={styles.modalLabel}>Membre</label>\r\n                    <select\r\n                        style={styles.modalInput}\r\n                        value={currentContribution.memberId}\r\n                        onChange={e => setCurrentContribution({...currentContribution, memberId: e.target.value})}\r\n                    >\r\n                        <option value=\"\" disabled>Sélectionner un membre...</option>\r\n                        {members.map(m => <option key={m.id} value={m.id}>{m.name}</option>)}\r\n                    </select>\r\n                    {selectedMemberInModal && <p style={{fontSize: '12px', color: '#1e3a8a', marginTop: '4px'}}>Solde actuel: {selectedMemberInModal.berryPoints} points</p>}\r\n                </div>\r\n                <ModalInput label=\"Montant (XAF)\" type=\"number\" value={currentContribution.amount} onChange={e => setCurrentContribution({...currentContribution, amount: parseFloat(e.target.value) || 0})} />\r\n                <ModalInput label=\"Date\" type=\"date\" value={currentContribution.date} onChange={e => setCurrentContribution({...currentContribution, date: e.target.value})} />\r\n                <ModalSelect label=\"Méthode de Paiement\" value={currentContribution.paymentMethod} onChange={e => setCurrentContribution({...currentContribution, paymentMethod: e.target.value as Contribution['paymentMethod']})}>\r\n                    <option value=\"Mobile Money\">Mobile Money</option>\r\n                    <option value=\"Virement Bancaire\">Virement Bancaire</option>\r\n                    <option value=\"Espèces\">Espèces</option>\r\n                    <option value=\"Chèque\">Chèque</option>\r\n                </ModalSelect>\r\n            </div>\r\n\r\n            <div style={styles.modalActions}>\r\n              <button onClick={() => setIsModalOpen(false)} style={styles.modalButtonCancel}>Annuler</button>\r\n              <button onClick={handleSave} style={styles.modalButtonSave}>{editingContribution ? 'Enregistrer' : 'Ajouter'}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- COMPOSANTS D'ASSISTANCE ---\r\ninterface ModalInputProps extends InputHTMLAttributes<HTMLInputElement> { label: string; }\r\nconst ModalInput: React.FC<ModalInputProps> = ({ label, ...props }) => (\r\n    <div>\r\n        <label style={styles.modalLabel}>{label}</label>\r\n        <input style={styles.modalInput} {...props} />\r\n    </div>\r\n);\r\ninterface ModalSelectProps extends SelectHTMLAttributes<HTMLSelectElement> { label: string; children: ReactNode; }\r\nconst ModalSelect: React.FC<ModalSelectProps> = ({ label, children, ...props }) => (\r\n    <div>\r\n        <label style={styles.modalLabel}>{label}</label>\r\n        <select style={styles.modalInput} {...props}>{children}</select>\r\n    </div>\r\n);\r\nconst StatCard: React.FC<{ title: string; value: string }> = ({ title, value }) => (\r\n    <div style={{ backgroundColor: 'white', padding: '20px', borderRadius: '8px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)', flex: '1 1 250px', textAlign: 'center' }}>\r\n      <h4 style={{ margin: 0, color: '#4b5563', fontSize: '16px', fontWeight: '600' }}>{title}</h4>\r\n      <p style={{ margin: '8px 0 0 0', color: '#1e3a8a', fontSize: '28px', fontWeight: 'bold' }}>{value}</p>\r\n    </div>\r\n  );\r\nconst StatusChip: React.FC<{ status: Contribution['status'] }> = ({ status }) => {\r\n    const chipStyle: React.CSSProperties = {\r\n        padding: '4px 12px', borderRadius: '9999px', fontWeight: '600', fontSize: '12px', color: 'white',\r\n        backgroundColor: { 'Validée': '#22c55e', 'En attente': '#f59e0b', 'En retard': '#ef4444', 'Annulée': '#6b7280' }[status]\r\n    };\r\n    return <span style={chipStyle}>{status}</span>\r\n};\r\n\r\n// --- STYLES EN LIGNE --- (inchangé)\r\nconst styles: { [key: string]: React.CSSProperties } = {\r\n  page: { fontFamily: 'Arial, sans-serif', padding: '24px', backgroundColor: '#f3f4f6', minHeight: '100vh' },\r\n  header: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '32px', flexWrap: 'wrap', gap: '16px' },\r\n  headerTitle: { fontSize: '28px', fontWeight: 'bold', color: '#1f2937', margin: 0 },\r\n  backButton: { padding: '10px 20px', backgroundColor: '#3b82f6', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600' },\r\n  statSection: { display: 'flex', gap: '24px', flexWrap: 'wrap', marginBottom: '32px' },\r\n  controlsSection: { marginBottom: '24px', display: 'flex', gap: '16px', flexWrap: 'wrap', alignItems: 'center' },\r\n  searchInput: { padding: '10px 12px', border: '1px solid #d1d5db', borderRadius: '8px', flexGrow: 1, minWidth: '300px' },\r\n  filterSelect: { padding: '10px 12px', border: '1px solid #d1d5db', borderRadius: '8px', backgroundColor: 'white' },\r\n  addButton: { padding: '10px 20px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600' },\r\n  tableContainer: { backgroundColor: 'white', borderRadius: '8px', boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)', overflowX: 'auto' },\r\n  table: { width: '100%', borderCollapse: 'collapse' },\r\n  th: { padding: '12px 16px', textAlign: 'left', fontSize: '14px', color: '#4b5563', backgroundColor: '#f9fafb', borderBottom: '1px solid #e5e7eb', fontWeight: '600' },\r\n  td: { padding: '12px 16px', fontSize: '14px', color: '#374151', borderBottom: '1px solid #e5e7eb' },\r\n  actionButtonEdit: { padding: '4px 8px', fontSize: '12px', fontWeight: '600', color: 'white', backgroundColor: '#f59e0b', border: 'none', borderRadius: '6px', cursor: 'pointer' },\r\n  actionButtonDelete: { padding: '4px 8px', fontSize: '12px', fontWeight: '600', color: 'white', backgroundColor: '#ef4444', border: 'none', borderRadius: '6px', cursor: 'pointer' },\r\n  actionSelect: { padding: '4px 8px', fontSize: '12px', border: '1px solid #d1d5db', borderRadius: '6px' },\r\n  modalOverlay: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0, 0, 0, 0.5)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 1000 },\r\n  modalContent: { backgroundColor: 'white', padding: '32px', borderRadius: '12px', width: '90%', maxWidth: '500px', boxShadow: '0 8px 16px rgba(0, 0, 0, 0.2)' },\r\n  modalTitle: { fontSize: '24px', fontWeight: 'bold', marginBottom: '24px', color: '#1f2937' },\r\n  modalForm: { display: 'flex', flexDirection: 'column', gap: '16px' },\r\n  modalLabel: { display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' },\r\n  modalInput: { width: '100%', padding: '10px', border: '1px solid #d1d5db', borderRadius: '8px', boxSizing: 'border-box' },\r\n  modalActions: { display: 'flex', justifyContent: 'flex-end', gap: '12px', marginTop: '32px' },\r\n  modalButtonCancel: { padding: '10px 20px', backgroundColor: '#6b7280', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600' },\r\n  modalButtonSave: { padding: '10px 20px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600' },\r\n};\r\n\r\nexport default Contributions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}