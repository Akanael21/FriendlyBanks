{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\FriendlyBanks\\\\frontend\\\\src\\\\components\\\\Governance.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faCalendarAlt, faBook, faLandmark, faGavel, faHandshake, faVoteYea } from '@fortawesome/free-solid-svg-icons';\n\n// --- CONSTANTES & HOOKS ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://172.30.240.1:8000/api';\n\n// --- INTERFACES API ---\n\n// --- RÈGLES DE LA CHARTE (DONNÉES STATIQUES ACCEPTABLES) ---\n\nconst governanceRules = [{\n  category: \"Cotisations & Fonds\",\n  icon: faLandmark,\n  requiredPermission: \"view_governance\",\n  rules: [{\n    title: \"Montant Minimal (Article 3.1)\",\n    content: \"La contribution mensuelle minimale est de 4 000 XAF, à déposer entre le 24 et le 25 du mois.\"\n  }, {\n    title: \"Gestion du Fonds (Article 3.2-3.3)\",\n    content: \"Les cotisations sont versées sur un compte commun géré par le Trésorier et supervisé par le Comité de Gestion (3-6 membres).\"\n  }, {\n    title: \"Rapports Mensuels (Article 3.4)\",\n    content: \"Un rapport financier détaillé est présenté mensuellement à l'ensemble des membres.\"\n  }]\n}, {\n  category: \"Système de Points Berry\",\n  icon: faBook,\n  requiredPermission: \"view_berry_calculations\",\n  rules: [{\n    title: \"Attribution de base\",\n    content: \"Chaque contribution assidue ajoute 5 points. Un retard entraîne une pénalité de 15 points.\"\n  }, {\n    title: \"Bonus Contributions\",\n    content: \"Des bonus sont accordés : >6800 XAF (+5pts), >20% du fonds (+10pts), >50000 XAF (+20pts).\"\n  }, {\n    title: \"Pénalités (Article 6.5)\",\n    content: \"Une absence de contribution pendant un mois entraîne une perte de 50% des points Berry acquis.\"\n  }, {\n    title: \"Échelle de Prêt\",\n    content: \"10-100pts = 60k XAF, 100-199pts = 120k XAF, 200-499pts = 300k XAF, 500+pts = selon fonds disponibles.\"\n  }]\n}, {\n  category: \"Prêts aux Membres\",\n  icon: faHandshake,\n  requiredPermission: \"view_loans\",\n  rules: [{\n    title: \"Conditions d'Accès (Article 4.1)\",\n    content: \"L'accès au fonds est réservé aux urgences avérées (maladie, accident, etc.).\"\n  }, {\n    title: \"Procédure (Article 4.2-4.3)\",\n    content: \"Toute demande doit être formulée par écrit et examinée par le Comité de Gestion.\"\n  }, {\n    title: \"Garanties (Article 4.7)\",\n    content: \"Chaque prêt individuel doit être soutenu par au moins deux avaliseurs membres du groupe.\"\n  }, {\n    title: \"Gros Prêts (Article 4.5)\",\n    content: \"L'approbation d'un retrait de plus de 35% du fonds doit être validée par l'ensemble des membres.\"\n  }]\n}, {\n  category: \"Sanctions & Exclusions\",\n  icon: faGavel,\n  requiredPermission: \"view_sanctions\",\n  rules: [{\n    title: \"Retard de Cotisation (Article 6.3)\",\n    content: \"Sanctionné par une amende de 200 XAF par jour de retard.\"\n  }, {\n    title: \"Processus Décisionnel (Article 6.2)\",\n    content: \"Toutes les décisions disciplinaires sont prises par un vote majoritaire des membres.\"\n  }, {\n    title: \"Non-Remboursement (Article 6.4)\",\n    content: \"En cas de défaut, saisie des fonds du membre puis de ses avaliseurs.\"\n  }]\n}];\n\n// --- COMPOSANT PRINCIPAL ---\nconst Governance = () => {\n  _s();\n  const {\n    user,\n    hasPermission,\n    getRoleDisplayName\n  } = useAuth();\n  const navigate = useNavigate();\n  const [meetings, setMeetings] = useState([]);\n  const [votes, setVotes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isMeetingModalOpen, setIsMeetingModalOpen] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const initialMeetingFormState = {\n    title: '',\n    date: '',\n    time: '',\n    type: 'Comité'\n  };\n  const [newMeeting, setNewMeeting] = useState(initialMeetingFormState);\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const [meetingsRes, votesRes] = await Promise.all([fetch(`${API_BASE_URL}/meetings/`, {\n        headers: {\n          'Authorization': `Bearer ${user === null || user === void 0 ? void 0 : user.token}`\n        }\n      }), fetch(`${API_BASE_URL}/votes/`, {\n        headers: {\n          'Authorization': `Bearer ${user === null || user === void 0 ? void 0 : user.token}`\n        }\n      })]);\n      if (!meetingsRes.ok) throw new Error('Erreur de chargement des réunions');\n      if (!votesRes.ok) throw new Error('Erreur de chargement des votes');\n      const meetingsData = await meetingsRes.json();\n      const votesData = await votesRes.json();\n      setMeetings(meetingsData);\n      setVotes(votesData);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Une erreur est survenue');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (user !== null && user !== void 0 && user.token && hasPermission('view_governance')) {\n      fetchData();\n    }\n  }, [user === null || user === void 0 ? void 0 : user.token, hasPermission]);\n\n  // --- GESTIONNAIRES D'ÉVÉNEMENTS ---\n  const handleVote = async (voteId, choice) => {\n    if (!hasPermission('participate_in_votes')) {\n      return alert(\"Vous n'avez pas la permission de voter.\");\n    }\n    try {\n      const response = await fetch(`${API_BASE_URL}/votes/${voteId}/vote/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user === null || user === void 0 ? void 0 : user.token}`\n        },\n        body: JSON.stringify({\n          vote: choice\n        })\n      });\n      if (!response.ok) {\n        const errData = await response.json();\n        throw new Error(errData.error || 'Erreur lors du vote');\n      }\n      await fetchData(); // Recharger les données pour refléter le vote\n      alert('Votre vote a été enregistré.');\n    } catch (err) {\n      alert(err instanceof Error ? err.message : 'Une erreur est survenue');\n    }\n  };\n  const handleOpenMeetingModal = () => {\n    if (!hasPermission('organize_sessions') && !hasPermission('manage_governance')) {\n      return alert(\"Vous n'avez pas la permission d'organiser des réunions.\");\n    }\n    setNewMeeting(initialMeetingFormState);\n    setIsMeetingModalOpen(true);\n  };\n  const handleSaveMeeting = async () => {\n    if (!newMeeting.title || !newMeeting.date || !newMeeting.time) {\n      return alert(\"Veuillez remplir tous les champs pour la réunion.\");\n    }\n    setIsSubmitting(true);\n    try {\n      const response = await fetch(`${API_BASE_URL}/meetings/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user === null || user === void 0 ? void 0 : user.token}`\n        },\n        body: JSON.stringify(newMeeting)\n      });\n      if (!response.ok) {\n        throw new Error('Erreur lors de la planification de la réunion');\n      }\n      await fetchData(); // Recharger les données\n      setIsMeetingModalOpen(false);\n    } catch (err) {\n      alert(err instanceof Error ? err.message : 'Une erreur est survenue');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // --- VÉRIFICATION DES PERMISSIONS ---\n  if (!hasPermission('view_governance')) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.page,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.errorContainer,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Acc\\xE8s refus\\xE9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Vous n'avez pas la permission de consulter la gouvernance.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Votre r\\xF4le actuel : \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: user !== null && user !== void 0 && user.role ? getRoleDisplayName(user.role) : 'Non défini'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this);\n  }\n\n  // --- AFFICHAGE ---\n  const visibleRules = governanceRules.filter(category => hasPermission(category.requiredPermission));\n  const canOrganizeMeetings = hasPermission('organize_sessions') || hasPermission('manage_governance');\n  const canParticipateInVotes = hasPermission('participate_in_votes') || hasPermission('manage_governance');\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.page,\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        textAlign: 'center',\n        padding: '40px'\n      },\n      children: \"Chargement de la gouvernance...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 48\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.page,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.errorContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Erreur\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 81\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 96\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchData,\n        style: styles.button,\n        children: \"R\\xE9essayer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 110\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 46\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.page,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      style: styles.header,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: styles.headerTitle,\n        children: \"Gouvernance & R\\xE9unions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        style: {\n          ...styles.button,\n          backgroundColor: '#6b7280'\n        },\n        children: \"\\u2190 Retour\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: styles.sectionTitle,\n        children: \"R\\xE8gles de la Charte (Version 5)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.rulesGrid,\n        children: visibleRules.map(category => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.card,\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            style: styles.cardTitle,\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: category.icon,\n              style: {\n                marginRight: '10px',\n                color: '#3b82f6'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this), category.category]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            style: styles.rulesList,\n            children: category.rules.map(rule => /*#__PURE__*/_jsxDEV(\"li\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [rule.title, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 70\n              }, this), \" \", rule.content]\n            }, rule.title, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 49\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 17\n          }, this)]\n        }, category.category, true, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }, this), canParticipateInVotes && votes.filter(v => v.status === 'En cours').length > 0 && /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: styles.sectionTitle,\n        children: \"Votes en Cours\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.votesContainer,\n        children: votes.filter(v => v.status === 'En cours').map(vote => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.voteCard,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.voteHeader,\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              style: styles.voteTitle,\n              children: vote.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TypeChip, {\n              type: vote.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: styles.voteDescription,\n            children: vote.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.voteStats,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Pour: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                style: {\n                  color: '#22c55e'\n                },\n                children: vote.votes_for\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 31\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Contre: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                style: {\n                  color: '#ef4444'\n                },\n                children: vote.votes_against\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Requis: \", vote.required_majority]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.voteActions,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontSize: '12px',\n                color: '#6b7280'\n              },\n              children: [\"Fin: \", new Date(vote.end_date).toLocaleDateString('fr-FR')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 19\n            }, this), !vote.has_voted ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.voteButtons,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleVote(vote.id, 'for'),\n                style: {\n                  ...styles.button,\n                  backgroundColor: '#22c55e',\n                  fontSize: '12px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: faVoteYea,\n                  style: {\n                    marginRight: '4px'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 147\n                }, this), \"Pour\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleVote(vote.id, 'against'),\n                style: {\n                  ...styles.button,\n                  backgroundColor: '#ef4444',\n                  fontSize: '12px'\n                },\n                children: \"Contre\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#22c55e',\n                fontSize: '12px',\n                fontWeight: 'bold'\n              },\n              children: \"\\u2713 Vot\\xE9\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 24\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 17\n          }, this)]\n        }, vote.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          ...styles.header,\n          marginTop: '40px',\n          marginBottom: '24px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: styles.sectionTitle,\n          children: \"Calendrier des R\\xE9unions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this), canOrganizeMeetings && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleOpenMeetingModal,\n          style: styles.button,\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faPlus,\n            style: {\n              marginRight: '8px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 102\n          }, this), \"Planifier\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 11\n      }, this), meetings.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.meetingsList,\n        children: meetings.map(meeting => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            ...styles.card,\n            ...styles.meetingCard\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            style: styles.meetingInfo,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: styles.meetingHeader,\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: styles.meetingTitle,\n                children: meeting.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: styles.meetingBadges,\n                children: [/*#__PURE__*/_jsxDEV(MeetingTypeChip, {\n                  type: meeting.type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 59\n                }, this), /*#__PURE__*/_jsxDEV(StatusChip, {\n                  status: meeting.status\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 98\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: styles.meetingDate,\n              children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                icon: faCalendarAlt,\n                style: {\n                  marginRight: '8px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 51\n              }, this), new Date(meeting.date).toLocaleDateString('fr-FR', {\n                weekday: 'long',\n                year: 'numeric',\n                month: 'long',\n                day: 'numeric'\n              }), \" \\xE0 \", meeting.time]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 21\n          }, this)\n        }, meeting.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          textAlign: 'center',\n          color: '#6b7280'\n        },\n        children: \"Aucune r\\xE9union planifi\\xE9e pour le moment.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this), isMeetingModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.modalOverlay,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.modalContent,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: styles.modalTitle,\n          children: \"Planifier une nouvelle r\\xE9union\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '16px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Titre de la r\\xE9union\",\n            value: newMeeting.title,\n            onChange: e => setNewMeeting({\n              ...newMeeting,\n              title: e.target.value\n            }),\n            style: styles.modalInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 304,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: newMeeting.date,\n            onChange: e => setNewMeeting({\n              ...newMeeting,\n              date: e.target.value\n            }),\n            style: styles.modalInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"time\",\n            value: newMeeting.time,\n            onChange: e => setNewMeeting({\n              ...newMeeting,\n              time: e.target.value\n            }),\n            style: styles.modalInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: newMeeting.type,\n            onChange: e => setNewMeeting({\n              ...newMeeting,\n              type: e.target.value\n            }),\n            style: styles.modalInput,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Comit\\xE9\",\n              children: \"Comit\\xE9 de Gestion\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Ouverture\",\n              children: \"Ouverture du mois\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Cl\\xF4ture\",\n              children: \"Cl\\xF4ture du mois\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Extraordinaire\",\n              children: \"Extraordinaire\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.modalActions,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsMeetingModalOpen(false),\n            style: {\n              ...styles.button,\n              backgroundColor: '#6b7280'\n            },\n            disabled: isSubmitting,\n            children: \"Annuler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSaveMeeting,\n            style: styles.button,\n            disabled: isSubmitting,\n            children: isSubmitting ? 'Planification...' : 'Planifier'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n};\n\n// --- SOUS-COMPOSANTS & STYLES ---\n_s(Governance, \"HOgEgGYiDwJGZBAGuF9m+y/psuk=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Governance;\nconst StatusChip = ({\n  status\n}) => {\n  const sC = {\n    'À venir': {\n      backgroundColor: '#dcfce7',\n      color: '#166534'\n    },\n    'En cours': {\n      backgroundColor: '#fef3c7',\n      color: '#92400e'\n    },\n    'Passée': {\n      backgroundColor: '#e5e7eb',\n      color: '#4b5563'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    style: {\n      ...styles.chip,\n      ...sC[status]\n    },\n    children: status\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 328,\n    columnNumber: 10\n  }, this);\n};\n_c2 = StatusChip;\nconst MeetingTypeChip = ({\n  type\n}) => {\n  const tC = {\n    'Ouverture': {\n      backgroundColor: '#dbeafe',\n      color: '#1e40af'\n    },\n    'Clôture': {\n      backgroundColor: '#fecaca',\n      color: '#991b1b'\n    },\n    'Extraordinaire': {\n      backgroundColor: '#f3e8ff',\n      color: '#7c2d12'\n    },\n    'Comité': {\n      backgroundColor: '#d1fae5',\n      color: '#065f46'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    style: {\n      ...styles.chip,\n      ...tC[type]\n    },\n    children: type\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 332,\n    columnNumber: 10\n  }, this);\n};\n_c3 = MeetingTypeChip;\nconst TypeChip = ({\n  type\n}) => {\n  const tC = {\n    'Modification Charte': {\n      backgroundColor: '#fef3c7',\n      color: '#92400e'\n    },\n    'Sanction': {\n      backgroundColor: '#fee2e2',\n      color: '#991b1b'\n    },\n    'Prêt Important': {\n      backgroundColor: '#dbeafe',\n      color: '#1e40af'\n    },\n    'Règle': {\n      backgroundColor: '#e0e7ff',\n      color: '#3730a3'\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    style: {\n      ...styles.chip,\n      ...tC[type]\n    },\n    children: type\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 336,\n    columnNumber: 10\n  }, this);\n};\n_c4 = TypeChip;\nconst styles = {\n  page: {\n    fontFamily: 'Arial, sans-serif',\n    padding: '16px',\n    backgroundColor: '#f3f4f6',\n    minHeight: '100vh'\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '24px',\n    flexWrap: 'wrap',\n    gap: '16px'\n  },\n  headerTitle: {\n    fontSize: '24px',\n    fontWeight: 'bold',\n    color: '#1f2937',\n    margin: 0\n  },\n  sectionTitle: {\n    fontSize: '22px',\n    fontWeight: 'bold',\n    color: '#1f2937',\n    margin: 0,\n    borderBottom: '2px solid #3b82f6',\n    paddingBottom: '8px'\n  },\n  errorContainer: {\n    textAlign: 'center',\n    padding: '40px',\n    backgroundColor: 'white',\n    borderRadius: '12px',\n    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)'\n  },\n  button: {\n    padding: '10px 16px',\n    backgroundColor: '#2563eb',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: '600',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    fontSize: '14px'\n  },\n  rulesGrid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))',\n    gap: '24px',\n    marginTop: '24px',\n    marginBottom: '40px'\n  },\n  card: {\n    backgroundColor: 'white',\n    padding: '24px',\n    borderRadius: '12px',\n    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)'\n  },\n  cardTitle: {\n    fontSize: '18px',\n    fontWeight: 'bold',\n    margin: '0 0 16px 0',\n    color: '#1f2937',\n    borderBottom: '1px solid #e5e7eb',\n    paddingBottom: '12px',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  rulesList: {\n    margin: 0,\n    paddingLeft: '20px',\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '12px',\n    fontSize: '14px',\n    color: '#374151',\n    lineHeight: 1.6\n  },\n  votesContainer: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))',\n    gap: '16px',\n    marginTop: '24px',\n    marginBottom: '40px'\n  },\n  voteCard: {\n    backgroundColor: 'white',\n    padding: '20px',\n    borderRadius: '12px',\n    boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)',\n    borderLeft: '4px solid #3b82f6'\n  },\n  voteHeader: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: '12px',\n    gap: '8px'\n  },\n  voteTitle: {\n    fontSize: '16px',\n    fontWeight: 'bold',\n    margin: 0,\n    color: '#1f2937'\n  },\n  voteDescription: {\n    fontSize: '14px',\n    color: '#4b5563',\n    marginBottom: '16px',\n    lineHeight: 1.5\n  },\n  voteStats: {\n    display: 'flex',\n    gap: '16px',\n    fontSize: '12px',\n    marginBottom: '16px',\n    flexWrap: 'wrap',\n    color: '#374151'\n  },\n  voteActions: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderTop: '1px solid #f3f4f6',\n    paddingTop: '12px'\n  },\n  voteButtons: {\n    display: 'flex',\n    gap: '8px'\n  },\n  meetingsList: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '16px',\n    marginBottom: '40px'\n  },\n  meetingCard: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    flexWrap: 'wrap',\n    gap: '16px'\n  },\n  meetingInfo: {\n    flex: 1\n  },\n  meetingHeader: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: '8px',\n    gap: '8px'\n  },\n  meetingBadges: {\n    display: 'flex',\n    gap: '8px',\n    flexWrap: 'wrap',\n    justifyContent: 'flex-end'\n  },\n  meetingTitle: {\n    fontWeight: 'bold',\n    margin: 0,\n    color: '#1f2937',\n    fontSize: '16px'\n  },\n  meetingDate: {\n    fontSize: '14px',\n    margin: '4px 0',\n    color: '#4b5563'\n  },\n  chip: {\n    padding: '4px 12px',\n    borderRadius: '9999px',\n    fontWeight: '600',\n    fontSize: '12px',\n    flexShrink: 0\n  },\n  modalOverlay: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0,0,0,0.6)',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1000,\n    padding: '16px'\n  },\n  modalContent: {\n    backgroundColor: 'white',\n    padding: '24px',\n    borderRadius: '12px',\n    width: '100%',\n    maxWidth: '500px'\n  },\n  modalTitle: {\n    fontSize: '20px',\n    fontWeight: 'bold',\n    marginBottom: '24px',\n    textAlign: 'center'\n  },\n  modalInput: {\n    width: '100%',\n    padding: '10px',\n    border: '1px solid #d1d5db',\n    borderRadius: '8px',\n    boxSizing: 'border-box'\n  },\n  modalActions: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    gap: '12px',\n    marginTop: '24px'\n  }\n};\nexport default Governance;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Governance\");\n$RefreshReg$(_c2, \"StatusChip\");\n$RefreshReg$(_c3, \"MeetingTypeChip\");\n$RefreshReg$(_c4, \"TypeChip\");","map":{"version":3,"names":["React","useState","useEffect","useAuth","useNavigate","FontAwesomeIcon","faPlus","faCalendarAlt","faBook","faLandmark","faGavel","faHandshake","faVoteYea","jsxDEV","_jsxDEV","API_BASE_URL","governanceRules","category","icon","requiredPermission","rules","title","content","Governance","_s","user","hasPermission","getRoleDisplayName","navigate","meetings","setMeetings","votes","setVotes","loading","setLoading","error","setError","isMeetingModalOpen","setIsMeetingModalOpen","isSubmitting","setIsSubmitting","initialMeetingFormState","date","time","type","newMeeting","setNewMeeting","fetchData","meetingsRes","votesRes","Promise","all","fetch","headers","token","ok","Error","meetingsData","json","votesData","err","message","handleVote","voteId","choice","alert","response","method","body","JSON","stringify","vote","errData","handleOpenMeetingModal","handleSaveMeeting","style","styles","page","children","errorContainer","fileName","_jsxFileName","lineNumber","columnNumber","role","visibleRules","filter","canOrganizeMeetings","canParticipateInVotes","textAlign","padding","onClick","button","header","headerTitle","backgroundColor","sectionTitle","rulesGrid","map","card","cardTitle","marginRight","color","rulesList","rule","v","status","length","votesContainer","voteCard","voteHeader","voteTitle","TypeChip","voteDescription","description","voteStats","votes_for","votes_against","required_majority","voteActions","fontSize","Date","end_date","toLocaleDateString","has_voted","voteButtons","id","fontWeight","marginTop","marginBottom","meetingsList","meeting","meetingCard","meetingInfo","meetingHeader","meetingTitle","meetingBadges","MeetingTypeChip","StatusChip","meetingDate","weekday","year","month","day","modalOverlay","modalContent","modalTitle","display","flexDirection","gap","placeholder","value","onChange","e","target","modalInput","modalActions","disabled","_c","sC","chip","_c2","tC","_c3","_c4","fontFamily","minHeight","justifyContent","alignItems","flexWrap","margin","borderBottom","paddingBottom","borderRadius","boxShadow","border","cursor","gridTemplateColumns","paddingLeft","lineHeight","borderLeft","borderTop","paddingTop","flex","flexShrink","position","top","left","right","bottom","zIndex","width","maxWidth","boxSizing","$RefreshReg$"],"sources":["D:/Projects/FriendlyBanks/frontend/src/components/Governance.tsx"],"sourcesContent":["import React, { useState, useEffect, ChangeEvent } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faCalendarAlt, faBook, faLandmark, faGavel, faHandshake, faUsers, faVoteYea } from '@fortawesome/free-solid-svg-icons';\r\n\r\n// --- CONSTANTES & HOOKS ---\r\nconst API_BASE_URL = 'http://172.30.240.1:8000/api';\r\n\r\n// --- INTERFACES API ---\r\ninterface ApiMeeting {\r\n  id: number;\r\n  title: string;\r\n  date: string;\r\n  time: string;\r\n  status: 'À venir' | 'Passée' | 'En cours';\r\n  type: 'Ouverture' | 'Clôture' | 'Extraordinaire' | 'Comité';\r\n  attendees?: number;\r\n  decisions?: string[];\r\n}\r\n\r\ninterface ApiVote {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  type: 'Modification Charte' | 'Sanction' | 'Prêt Important' | 'Règle';\r\n  status: 'En cours' | 'Approuvé' | 'Rejeté';\r\n  votes_for: number;\r\n  votes_against: number;\r\n  total_voters: number;\r\n  required_majority: 'Simple' | 'Qualifiée' | 'Unanimité';\r\n  end_date: string;\r\n  has_voted: boolean;\r\n}\r\n\r\ninterface MeetingFormData {\r\n    title: string;\r\n    date: string;\r\n    time: string;\r\n    type: 'Ouverture' | 'Clôture' | 'Extraordinaire' | 'Comité';\r\n}\r\n\r\n// --- RÈGLES DE LA CHARTE (DONNÉES STATIQUES ACCEPTABLES) ---\r\ninterface Rule { title: string; content: string; }\r\ninterface RuleCategory { category: string; icon: any; rules: Rule[]; requiredPermission: string; }\r\n\r\nconst governanceRules: RuleCategory[] = [\r\n  {\r\n    category: \"Cotisations & Fonds\", icon: faLandmark, requiredPermission: \"view_governance\",\r\n    rules: [\r\n      { title: \"Montant Minimal (Article 3.1)\", content: \"La contribution mensuelle minimale est de 4 000 XAF, à déposer entre le 24 et le 25 du mois.\" },\r\n      { title: \"Gestion du Fonds (Article 3.2-3.3)\", content: \"Les cotisations sont versées sur un compte commun géré par le Trésorier et supervisé par le Comité de Gestion (3-6 membres).\" },\r\n      { title: \"Rapports Mensuels (Article 3.4)\", content: \"Un rapport financier détaillé est présenté mensuellement à l'ensemble des membres.\" },\r\n    ]\r\n  },\r\n  {\r\n    category: \"Système de Points Berry\", icon: faBook, requiredPermission: \"view_berry_calculations\",\r\n    rules: [\r\n      { title: \"Attribution de base\", content: \"Chaque contribution assidue ajoute 5 points. Un retard entraîne une pénalité de 15 points.\" },\r\n      { title: \"Bonus Contributions\", content: \"Des bonus sont accordés : >6800 XAF (+5pts), >20% du fonds (+10pts), >50000 XAF (+20pts).\" },\r\n      { title: \"Pénalités (Article 6.5)\", content: \"Une absence de contribution pendant un mois entraîne une perte de 50% des points Berry acquis.\" },\r\n      { title: \"Échelle de Prêt\", content: \"10-100pts = 60k XAF, 100-199pts = 120k XAF, 200-499pts = 300k XAF, 500+pts = selon fonds disponibles.\" },\r\n    ]\r\n  },\r\n  {\r\n    category: \"Prêts aux Membres\", icon: faHandshake, requiredPermission: \"view_loans\",\r\n    rules: [\r\n      { title: \"Conditions d'Accès (Article 4.1)\", content: \"L'accès au fonds est réservé aux urgences avérées (maladie, accident, etc.).\" },\r\n      { title: \"Procédure (Article 4.2-4.3)\", content: \"Toute demande doit être formulée par écrit et examinée par le Comité de Gestion.\" },\r\n      { title: \"Garanties (Article 4.7)\", content: \"Chaque prêt individuel doit être soutenu par au moins deux avaliseurs membres du groupe.\" },\r\n      { title: \"Gros Prêts (Article 4.5)\", content: \"L'approbation d'un retrait de plus de 35% du fonds doit être validée par l'ensemble des membres.\" },\r\n    ]\r\n  },\r\n  {\r\n    category: \"Sanctions & Exclusions\", icon: faGavel, requiredPermission: \"view_sanctions\",\r\n    rules: [\r\n      { title: \"Retard de Cotisation (Article 6.3)\", content: \"Sanctionné par une amende de 200 XAF par jour de retard.\" },\r\n      { title: \"Processus Décisionnel (Article 6.2)\", content: \"Toutes les décisions disciplinaires sont prises par un vote majoritaire des membres.\" },\r\n      { title: \"Non-Remboursement (Article 6.4)\", content: \"En cas de défaut, saisie des fonds du membre puis de ses avaliseurs.\" },\r\n    ]\r\n  },\r\n];\r\n\r\n// --- COMPOSANT PRINCIPAL ---\r\nconst Governance: React.FC = () => {\r\n  const { user, hasPermission, getRoleDisplayName } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [meetings, setMeetings] = useState<ApiMeeting[]>([]);\r\n  const [votes, setVotes] = useState<ApiVote[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  const [isMeetingModalOpen, setIsMeetingModalOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  \r\n  const initialMeetingFormState: MeetingFormData = {\r\n    title: '',\r\n    date: '',\r\n    time: '',\r\n    type: 'Comité'\r\n  };\r\n  const [newMeeting, setNewMeeting] = useState<MeetingFormData>(initialMeetingFormState);\r\n  \r\n  const fetchData = async () => {\r\n    try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const [meetingsRes, votesRes] = await Promise.all([\r\n            fetch(`${API_BASE_URL}/meetings/`, { headers: { 'Authorization': `Bearer ${user?.token}` } }),\r\n            fetch(`${API_BASE_URL}/votes/`, { headers: { 'Authorization': `Bearer ${user?.token}` } })\r\n        ]);\r\n\r\n        if (!meetingsRes.ok) throw new Error('Erreur de chargement des réunions');\r\n        if (!votesRes.ok) throw new Error('Erreur de chargement des votes');\r\n\r\n        const meetingsData = await meetingsRes.json();\r\n        const votesData = await votesRes.json();\r\n\r\n        setMeetings(meetingsData);\r\n        setVotes(votesData);\r\n    } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Une erreur est survenue');\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if(user?.token && hasPermission('view_governance')){\r\n        fetchData();\r\n    }\r\n  }, [user?.token, hasPermission]);\r\n\r\n\r\n  // --- GESTIONNAIRES D'ÉVÉNEMENTS ---\r\n  const handleVote = async (voteId: number, choice: 'for' | 'against') => {\r\n    if (!hasPermission('participate_in_votes')) {\r\n      return alert(\"Vous n'avez pas la permission de voter.\");\r\n    }\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/votes/${voteId}/vote/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${user?.token}`\r\n            },\r\n            body: JSON.stringify({ vote: choice })\r\n        });\r\n        if (!response.ok) {\r\n            const errData = await response.json();\r\n            throw new Error(errData.error || 'Erreur lors du vote');\r\n        }\r\n        await fetchData(); // Recharger les données pour refléter le vote\r\n        alert('Votre vote a été enregistré.');\r\n    } catch (err) {\r\n        alert(err instanceof Error ? err.message : 'Une erreur est survenue');\r\n    }\r\n  };\r\n\r\n  const handleOpenMeetingModal = () => {\r\n    if (!hasPermission('organize_sessions') && !hasPermission('manage_governance')) {\r\n      return alert(\"Vous n'avez pas la permission d'organiser des réunions.\");\r\n    }\r\n    setNewMeeting(initialMeetingFormState);\r\n    setIsMeetingModalOpen(true);\r\n  };\r\n  \r\n  const handleSaveMeeting = async () => {\r\n    if (!newMeeting.title || !newMeeting.date || !newMeeting.time) {\r\n        return alert(\"Veuillez remplir tous les champs pour la réunion.\");\r\n    }\r\n    setIsSubmitting(true);\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/meetings/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${user?.token}`\r\n            },\r\n            body: JSON.stringify(newMeeting)\r\n        });\r\n        if (!response.ok) {\r\n            throw new Error('Erreur lors de la planification de la réunion');\r\n        }\r\n        await fetchData(); // Recharger les données\r\n        setIsMeetingModalOpen(false);\r\n    } catch (err) {\r\n        alert(err instanceof Error ? err.message : 'Une erreur est survenue');\r\n    } finally {\r\n        setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // --- VÉRIFICATION DES PERMISSIONS ---\r\n  if (!hasPermission('view_governance')) {\r\n    return (\r\n      <div style={styles.page}>\r\n        <div style={styles.errorContainer}>\r\n          <h3>Accès refusé</h3>\r\n          <p>Vous n'avez pas la permission de consulter la gouvernance.</p>\r\n          <p>Votre rôle actuel : <strong>{user?.role ? getRoleDisplayName(user.role as any) : 'Non défini'}</strong></p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- AFFICHAGE ---\r\n  const visibleRules = governanceRules.filter(category => hasPermission(category.requiredPermission));\r\n  const canOrganizeMeetings = hasPermission('organize_sessions') || hasPermission('manage_governance');\r\n  const canParticipateInVotes = hasPermission('participate_in_votes') || hasPermission('manage_governance');\r\n\r\n  if (loading) return <div style={styles.page}><p style={{textAlign: 'center', padding: '40px'}}>Chargement de la gouvernance...</p></div>;\r\n  if (error) return <div style={styles.page}><div style={styles.errorContainer}><h3>Erreur</h3><p>{error}</p><button onClick={fetchData} style={styles.button}>Réessayer</button></div></div>;\r\n  \r\n  return (\r\n    <div style={styles.page}>\r\n      <header style={styles.header}>\r\n        <h2 style={styles.headerTitle}>Gouvernance & Réunions</h2>\r\n        <button onClick={() => navigate('/')} style={{...styles.button, backgroundColor: '#6b7280'}}>\r\n          ← Retour\r\n        </button>\r\n      </header>\r\n\r\n      {/* Section des règles */}\r\n      <section>\r\n          <h3 style={styles.sectionTitle}>Règles de la Charte (Version 5)</h3>\r\n          <div style={styles.rulesGrid}>\r\n            {visibleRules.map(category => (\r\n              <div key={category.category} style={styles.card}>\r\n                <h4 style={styles.cardTitle}>\r\n                  <FontAwesomeIcon icon={category.icon} style={{marginRight: '10px', color: '#3b82f6'}}/>\r\n                  {category.category}\r\n                </h4>\r\n                <ul style={styles.rulesList}>\r\n                  {category.rules.map(rule => ( <li key={rule.title}><strong>{rule.title}:</strong> {rule.content}</li> ))}\r\n                </ul>\r\n              </div>\r\n            ))}\r\n          </div>\r\n      </section>\r\n\r\n      {/* Section des votes */}\r\n      {canParticipateInVotes && votes.filter(v => v.status === 'En cours').length > 0 && (\r\n        <section>\r\n          <h3 style={styles.sectionTitle}>Votes en Cours</h3>\r\n          <div style={styles.votesContainer}>\r\n            {votes.filter(v => v.status === 'En cours').map(vote => (\r\n              <div key={vote.id} style={styles.voteCard}>\r\n                <div style={styles.voteHeader}>\r\n                  <h4 style={styles.voteTitle}>{vote.title}</h4>\r\n                  <TypeChip type={vote.type} />\r\n                </div>\r\n                <p style={styles.voteDescription}>{vote.description}</p>\r\n                <div style={styles.voteStats}>\r\n                  <span>Pour: <strong style={{color: '#22c55e'}}>{vote.votes_for}</strong></span>\r\n                  <span>Contre: <strong style={{color: '#ef4444'}}>{vote.votes_against}</strong></span>\r\n                  <span>Requis: {vote.required_majority}</span>\r\n                </div>\r\n                <div style={styles.voteActions}>\r\n                  <span style={{fontSize: '12px', color: '#6b7280'}}>Fin: {new Date(vote.end_date).toLocaleDateString('fr-FR')}</span>\r\n                  {!vote.has_voted ? (\r\n                    <div style={styles.voteButtons}>\r\n                      <button onClick={() => handleVote(vote.id, 'for')} style={{...styles.button, backgroundColor: '#22c55e', fontSize: '12px'}}><FontAwesomeIcon icon={faVoteYea} style={{marginRight: '4px'}} />Pour</button>\r\n                      <button onClick={() => handleVote(vote.id, 'against')} style={{...styles.button, backgroundColor: '#ef4444', fontSize: '12px'}}>Contre</button>\r\n                    </div>\r\n                  ) : (<span style={{color: '#22c55e', fontSize: '12px', fontWeight: 'bold'}}>✓ Voté</span>)}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* Section des réunions */}\r\n      <section>\r\n          <div style={{...styles.header, marginTop: '40px', marginBottom: '24px'}}>\r\n            <h3 style={styles.sectionTitle}>Calendrier des Réunions</h3>\r\n            {canOrganizeMeetings && ( <button onClick={handleOpenMeetingModal} style={styles.button}><FontAwesomeIcon icon={faPlus} style={{marginRight: '8px'}} />Planifier</button> )}\r\n          </div>\r\n          {meetings.length > 0 ? (\r\n            <div style={styles.meetingsList}>\r\n                {meetings.map(meeting => (\r\n                <div key={meeting.id} style={{...styles.card, ...styles.meetingCard}}>\r\n                    <div style={styles.meetingInfo}>\r\n                    <div style={styles.meetingHeader}>\r\n                        <p style={styles.meetingTitle}>{meeting.title}</p>\r\n                        <div style={styles.meetingBadges}><MeetingTypeChip type={meeting.type} /><StatusChip status={meeting.status} /></div>\r\n                    </div>\r\n                    <p style={styles.meetingDate}><FontAwesomeIcon icon={faCalendarAlt} style={{marginRight: '8px'}}/>{new Date(meeting.date).toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })} à {meeting.time}</p>\r\n                    </div>\r\n                </div>\r\n                ))}\r\n            </div>\r\n          ) : (<p style={{textAlign: 'center', color: '#6b7280'}}>Aucune réunion planifiée pour le moment.</p>)}\r\n      </section>\r\n\r\n      {/* Modal pour planifier une réunion */}\r\n      {isMeetingModalOpen && (\r\n        <div style={styles.modalOverlay}>\r\n            <div style={styles.modalContent}>\r\n                <h3 style={styles.modalTitle}>Planifier une nouvelle réunion</h3>\r\n                <div style={{display: 'flex', flexDirection: 'column', gap: '16px'}}>\r\n                    <input type=\"text\" placeholder=\"Titre de la réunion\" value={newMeeting.title} onChange={e => setNewMeeting({...newMeeting, title: e.target.value})} style={styles.modalInput} />\r\n                    <input type=\"date\" value={newMeeting.date} onChange={e => setNewMeeting({...newMeeting, date: e.target.value})} style={styles.modalInput} />\r\n                    <input type=\"time\" value={newMeeting.time} onChange={e => setNewMeeting({...newMeeting, time: e.target.value})} style={styles.modalInput} />\r\n                    <select value={newMeeting.type} onChange={e => setNewMeeting({...newMeeting, type: e.target.value as MeetingFormData['type']})} style={styles.modalInput}>\r\n                        <option value=\"Comité\">Comité de Gestion</option>\r\n                        <option value=\"Ouverture\">Ouverture du mois</option>\r\n                        <option value=\"Clôture\">Clôture du mois</option>\r\n                        <option value=\"Extraordinaire\">Extraordinaire</option>\r\n                    </select>\r\n                </div>\r\n                <div style={styles.modalActions}>\r\n                    <button onClick={() => setIsMeetingModalOpen(false)} style={{...styles.button, backgroundColor: '#6b7280'}} disabled={isSubmitting}>Annuler</button>\r\n                    <button onClick={handleSaveMeeting} style={styles.button} disabled={isSubmitting}>{isSubmitting ? 'Planification...' : 'Planifier'}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- SOUS-COMPOSANTS & STYLES ---\r\nconst StatusChip: React.FC<{ status: ApiMeeting['status'] }> = ({ status }) => { \r\n  const sC = { 'À venir': { backgroundColor: '#dcfce7', color: '#166534' }, 'En cours': { backgroundColor: '#fef3c7', color: '#92400e' }, 'Passée': { backgroundColor: '#e5e7eb', color: '#4b5563' } }; \r\n  return <span style={{ ...styles.chip, ...sC[status] }}>{status}</span>; \r\n};\r\nconst MeetingTypeChip: React.FC<{ type: ApiMeeting['type'] }> = ({ type }) => { \r\n  const tC = { 'Ouverture': { backgroundColor: '#dbeafe', color: '#1e40af' }, 'Clôture': { backgroundColor: '#fecaca', color: '#991b1b' }, 'Extraordinaire': { backgroundColor: '#f3e8ff', color: '#7c2d12' }, 'Comité': { backgroundColor: '#d1fae5', color: '#065f46' } }; \r\n  return <span style={{ ...styles.chip, ...tC[type] }}>{type}</span>; \r\n};\r\nconst TypeChip: React.FC<{ type: ApiVote['type'] }> = ({ type }) => { \r\n  const tC = { 'Modification Charte': { backgroundColor: '#fef3c7', color: '#92400e' }, 'Sanction': { backgroundColor: '#fee2e2', color: '#991b1b' }, 'Prêt Important': { backgroundColor: '#dbeafe', color: '#1e40af' }, 'Règle': { backgroundColor: '#e0e7ff', color: '#3730a3' } }; \r\n  return <span style={{ ...styles.chip, ...tC[type] }}>{type}</span>; \r\n};\r\n\r\nconst styles: { [key: string]: React.CSSProperties } = {\r\n  page: { fontFamily: 'Arial, sans-serif', padding: '16px', backgroundColor: '#f3f4f6', minHeight: '100vh' },\r\n  header: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px', flexWrap: 'wrap', gap: '16px' },\r\n  headerTitle: { fontSize: '24px', fontWeight: 'bold', color: '#1f2937', margin: 0 },\r\n  sectionTitle: { fontSize: '22px', fontWeight: 'bold', color: '#1f2937', margin: 0, borderBottom: '2px solid #3b82f6', paddingBottom: '8px' },\r\n  errorContainer: { textAlign: 'center', padding: '40px', backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  button: { padding: '10px 16px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '14px' },\r\n  rulesGrid: { display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))', gap: '24px', marginTop: '24px', marginBottom: '40px' },\r\n  card: { backgroundColor: 'white', padding: '24px', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  cardTitle: { fontSize: '18px', fontWeight: 'bold', margin: '0 0 16px 0', color: '#1f2937', borderBottom: '1px solid #e5e7eb', paddingBottom: '12px', display: 'flex', alignItems: 'center' },\r\n  rulesList: { margin: 0, paddingLeft: '20px', display: 'flex', flexDirection: 'column', gap: '12px', fontSize: '14px', color: '#374151', lineHeight: 1.6 },\r\n  votesContainer: { display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))', gap: '16px', marginTop: '24px', marginBottom: '40px' },\r\n  voteCard: { backgroundColor: 'white', padding: '20px', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)', borderLeft: '4px solid #3b82f6' },\r\n  voteHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px', gap: '8px' },\r\n  voteTitle: { fontSize: '16px', fontWeight: 'bold', margin: 0, color: '#1f2937' },\r\n  voteDescription: { fontSize: '14px', color: '#4b5563', marginBottom: '16px', lineHeight: 1.5 },\r\n  voteStats: { display: 'flex', gap: '16px', fontSize: '12px', marginBottom: '16px', flexWrap: 'wrap', color: '#374151' },\r\n  voteActions: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', borderTop: '1px solid #f3f4f6', paddingTop: '12px' },\r\n  voteButtons: { display: 'flex', gap: '8px' },\r\n  meetingsList: { display: 'flex', flexDirection: 'column', gap: '16px', marginBottom: '40px' },\r\n  meetingCard: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', flexWrap: 'wrap', gap: '16px' },\r\n  meetingInfo: { flex: 1 },\r\n  meetingHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '8px', gap: '8px' },\r\n  meetingBadges: { display: 'flex', gap: '8px', flexWrap: 'wrap', justifyContent: 'flex-end' },\r\n  meetingTitle: { fontWeight: 'bold', margin: 0, color: '#1f2937', fontSize: '16px' },\r\n  meetingDate: { fontSize: '14px', margin: '4px 0', color: '#4b5563' },\r\n  chip: { padding: '4px 12px', borderRadius: '9999px', fontWeight: '600', fontSize: '12px', flexShrink: 0 },\r\n  modalOverlay: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0,0,0,0.6)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000, padding: '16px' },\r\n  modalContent: { backgroundColor: 'white', padding: '24px', borderRadius: '12px', width: '100%', maxWidth: '500px' },\r\n  modalTitle: { fontSize: '20px', fontWeight: 'bold', marginBottom: '24px', textAlign: 'center' },\r\n  modalInput: { width: '100%', padding: '10px', border: '1px solid #d1d5db', borderRadius: '8px', boxSizing: 'border-box' },\r\n  modalActions: { display: 'flex', justifyContent: 'flex-end', gap: '12px', marginTop: '24px' },\r\n};\r\n\r\nexport default Governance;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAqB,OAAO;AAC/D,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,eAAe,QAAQ,gCAAgC;AAChE,SAASC,MAAM,EAAEC,aAAa,EAAEC,MAAM,EAAEC,UAAU,EAAEC,OAAO,EAAEC,WAAW,EAAWC,SAAS,QAAQ,mCAAmC;;AAEvI;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAMC,YAAY,GAAG,8BAA8B;;AAEnD;;AAiCA;;AAIA,MAAMC,eAA+B,GAAG,CACtC;EACEC,QAAQ,EAAE,qBAAqB;EAAEC,IAAI,EAAET,UAAU;EAAEU,kBAAkB,EAAE,iBAAiB;EACxFC,KAAK,EAAE,CACL;IAAEC,KAAK,EAAE,+BAA+B;IAAEC,OAAO,EAAE;EAA+F,CAAC,EACnJ;IAAED,KAAK,EAAE,oCAAoC;IAAEC,OAAO,EAAE;EAA+H,CAAC,EACxL;IAAED,KAAK,EAAE,iCAAiC;IAAEC,OAAO,EAAE;EAAqF,CAAC;AAE/I,CAAC,EACD;EACEL,QAAQ,EAAE,yBAAyB;EAAEC,IAAI,EAAEV,MAAM;EAAEW,kBAAkB,EAAE,yBAAyB;EAChGC,KAAK,EAAE,CACL;IAAEC,KAAK,EAAE,qBAAqB;IAAEC,OAAO,EAAE;EAA6F,CAAC,EACvI;IAAED,KAAK,EAAE,qBAAqB;IAAEC,OAAO,EAAE;EAA4F,CAAC,EACtI;IAAED,KAAK,EAAE,yBAAyB;IAAEC,OAAO,EAAE;EAAiG,CAAC,EAC/I;IAAED,KAAK,EAAE,iBAAiB;IAAEC,OAAO,EAAE;EAAwG,CAAC;AAElJ,CAAC,EACD;EACEL,QAAQ,EAAE,mBAAmB;EAAEC,IAAI,EAAEP,WAAW;EAAEQ,kBAAkB,EAAE,YAAY;EAClFC,KAAK,EAAE,CACL;IAAEC,KAAK,EAAE,kCAAkC;IAAEC,OAAO,EAAE;EAA+E,CAAC,EACtI;IAAED,KAAK,EAAE,6BAA6B;IAAEC,OAAO,EAAE;EAAmF,CAAC,EACrI;IAAED,KAAK,EAAE,yBAAyB;IAAEC,OAAO,EAAE;EAA2F,CAAC,EACzI;IAAED,KAAK,EAAE,0BAA0B;IAAEC,OAAO,EAAE;EAAmG,CAAC;AAEtJ,CAAC,EACD;EACEL,QAAQ,EAAE,wBAAwB;EAAEC,IAAI,EAAER,OAAO;EAAES,kBAAkB,EAAE,gBAAgB;EACvFC,KAAK,EAAE,CACL;IAAEC,KAAK,EAAE,oCAAoC;IAAEC,OAAO,EAAE;EAA2D,CAAC,EACpH;IAAED,KAAK,EAAE,qCAAqC;IAAEC,OAAO,EAAE;EAAuF,CAAC,EACjJ;IAAED,KAAK,EAAE,iCAAiC;IAAEC,OAAO,EAAE;EAAuE,CAAC;AAEjI,CAAC,CACF;;AAED;AACA,MAAMC,UAAoB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjC,MAAM;IAAEC,IAAI;IAAEC,aAAa;IAAEC;EAAmB,CAAC,GAAGxB,OAAO,CAAC,CAAC;EAC7D,MAAMyB,QAAQ,GAAGxB,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACyB,QAAQ,EAAEC,WAAW,CAAC,GAAG7B,QAAQ,CAAe,EAAE,CAAC;EAC1D,MAAM,CAAC8B,KAAK,EAAEC,QAAQ,CAAC,GAAG/B,QAAQ,CAAY,EAAE,CAAC;EACjD,MAAM,CAACgC,OAAO,EAAEC,UAAU,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACkC,KAAK,EAAEC,QAAQ,CAAC,GAAGnC,QAAQ,CAAgB,IAAI,CAAC;EAEvD,MAAM,CAACoC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGrC,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAACsC,YAAY,EAAEC,eAAe,CAAC,GAAGvC,QAAQ,CAAC,KAAK,CAAC;EAEvD,MAAMwC,uBAAwC,GAAG;IAC/CpB,KAAK,EAAE,EAAE;IACTqB,IAAI,EAAE,EAAE;IACRC,IAAI,EAAE,EAAE;IACRC,IAAI,EAAE;EACR,CAAC;EACD,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAG7C,QAAQ,CAAkBwC,uBAAuB,CAAC;EAEtF,MAAMM,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACAb,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MACd,MAAM,CAACY,WAAW,EAAEC,QAAQ,CAAC,GAAG,MAAMC,OAAO,CAACC,GAAG,CAAC,CAC9CC,KAAK,CAAC,GAAGrC,YAAY,YAAY,EAAE;QAAEsC,OAAO,EAAE;UAAE,eAAe,EAAE,UAAU5B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE6B,KAAK;QAAG;MAAE,CAAC,CAAC,EAC7FF,KAAK,CAAC,GAAGrC,YAAY,SAAS,EAAE;QAAEsC,OAAO,EAAE;UAAE,eAAe,EAAE,UAAU5B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE6B,KAAK;QAAG;MAAE,CAAC,CAAC,CAC7F,CAAC;MAEF,IAAI,CAACN,WAAW,CAACO,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,mCAAmC,CAAC;MACzE,IAAI,CAACP,QAAQ,CAACM,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,gCAAgC,CAAC;MAEnE,MAAMC,YAAY,GAAG,MAAMT,WAAW,CAACU,IAAI,CAAC,CAAC;MAC7C,MAAMC,SAAS,GAAG,MAAMV,QAAQ,CAACS,IAAI,CAAC,CAAC;MAEvC5B,WAAW,CAAC2B,YAAY,CAAC;MACzBzB,QAAQ,CAAC2B,SAAS,CAAC;IACvB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACVxB,QAAQ,CAACwB,GAAG,YAAYJ,KAAK,GAAGI,GAAG,CAACC,OAAO,GAAG,yBAAyB,CAAC;IAC5E,CAAC,SAAS;MACN3B,UAAU,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAEDhC,SAAS,CAAC,MAAM;IACd,IAAGuB,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAE6B,KAAK,IAAI5B,aAAa,CAAC,iBAAiB,CAAC,EAAC;MAC/CqB,SAAS,CAAC,CAAC;IACf;EACF,CAAC,EAAE,CAACtB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE6B,KAAK,EAAE5B,aAAa,CAAC,CAAC;;EAGhC;EACA,MAAMoC,UAAU,GAAG,MAAAA,CAAOC,MAAc,EAAEC,MAAyB,KAAK;IACtE,IAAI,CAACtC,aAAa,CAAC,sBAAsB,CAAC,EAAE;MAC1C,OAAOuC,KAAK,CAAC,yCAAyC,CAAC;IACzD;IACA,IAAI;MACA,MAAMC,QAAQ,GAAG,MAAMd,KAAK,CAAC,GAAGrC,YAAY,UAAUgD,MAAM,QAAQ,EAAE;QAClEI,MAAM,EAAE,MAAM;QACdd,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAU5B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE6B,KAAK;QAC1C,CAAC;QACDc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,IAAI,EAAEP;QAAO,CAAC;MACzC,CAAC,CAAC;MACF,IAAI,CAACE,QAAQ,CAACX,EAAE,EAAE;QACd,MAAMiB,OAAO,GAAG,MAAMN,QAAQ,CAACR,IAAI,CAAC,CAAC;QACrC,MAAM,IAAIF,KAAK,CAACgB,OAAO,CAACrC,KAAK,IAAI,qBAAqB,CAAC;MAC3D;MACA,MAAMY,SAAS,CAAC,CAAC,CAAC,CAAC;MACnBkB,KAAK,CAAC,8BAA8B,CAAC;IACzC,CAAC,CAAC,OAAOL,GAAG,EAAE;MACVK,KAAK,CAACL,GAAG,YAAYJ,KAAK,GAAGI,GAAG,CAACC,OAAO,GAAG,yBAAyB,CAAC;IACzE;EACF,CAAC;EAED,MAAMY,sBAAsB,GAAGA,CAAA,KAAM;IACnC,IAAI,CAAC/C,aAAa,CAAC,mBAAmB,CAAC,IAAI,CAACA,aAAa,CAAC,mBAAmB,CAAC,EAAE;MAC9E,OAAOuC,KAAK,CAAC,yDAAyD,CAAC;IACzE;IACAnB,aAAa,CAACL,uBAAuB,CAAC;IACtCH,qBAAqB,CAAC,IAAI,CAAC;EAC7B,CAAC;EAED,MAAMoC,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAAC7B,UAAU,CAACxB,KAAK,IAAI,CAACwB,UAAU,CAACH,IAAI,IAAI,CAACG,UAAU,CAACF,IAAI,EAAE;MAC3D,OAAOsB,KAAK,CAAC,mDAAmD,CAAC;IACrE;IACAzB,eAAe,CAAC,IAAI,CAAC;IACrB,IAAI;MACA,MAAM0B,QAAQ,GAAG,MAAMd,KAAK,CAAC,GAAGrC,YAAY,YAAY,EAAE;QACtDoD,MAAM,EAAE,MAAM;QACdd,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClC,eAAe,EAAE,UAAU5B,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE6B,KAAK;QAC1C,CAAC;QACDc,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACzB,UAAU;MACnC,CAAC,CAAC;MACF,IAAI,CAACqB,QAAQ,CAACX,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAC,+CAA+C,CAAC;MACpE;MACA,MAAMT,SAAS,CAAC,CAAC,CAAC,CAAC;MACnBT,qBAAqB,CAAC,KAAK,CAAC;IAChC,CAAC,CAAC,OAAOsB,GAAG,EAAE;MACVK,KAAK,CAACL,GAAG,YAAYJ,KAAK,GAAGI,GAAG,CAACC,OAAO,GAAG,yBAAyB,CAAC;IACzE,CAAC,SAAS;MACNrB,eAAe,CAAC,KAAK,CAAC;IAC1B;EACF,CAAC;;EAED;EACA,IAAI,CAACd,aAAa,CAAC,iBAAiB,CAAC,EAAE;IACrC,oBACEZ,OAAA;MAAK6D,KAAK,EAAEC,MAAM,CAACC,IAAK;MAAAC,QAAA,eACtBhE,OAAA;QAAK6D,KAAK,EAAEC,MAAM,CAACG,cAAe;QAAAD,QAAA,gBAChChE,OAAA;UAAAgE,QAAA,EAAI;QAAY;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACrBrE,OAAA;UAAAgE,QAAA,EAAG;QAA0D;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eACjErE,OAAA;UAAAgE,QAAA,GAAG,yBAAoB,eAAAhE,OAAA;YAAAgE,QAAA,EAASrD,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAE2D,IAAI,GAAGzD,kBAAkB,CAACF,IAAI,CAAC2D,IAAW,CAAC,GAAG;UAAY;YAAAJ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3G;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;;EAEA;EACA,MAAME,YAAY,GAAGrE,eAAe,CAACsE,MAAM,CAACrE,QAAQ,IAAIS,aAAa,CAACT,QAAQ,CAACE,kBAAkB,CAAC,CAAC;EACnG,MAAMoE,mBAAmB,GAAG7D,aAAa,CAAC,mBAAmB,CAAC,IAAIA,aAAa,CAAC,mBAAmB,CAAC;EACpG,MAAM8D,qBAAqB,GAAG9D,aAAa,CAAC,sBAAsB,CAAC,IAAIA,aAAa,CAAC,mBAAmB,CAAC;EAEzG,IAAIO,OAAO,EAAE,oBAAOnB,OAAA;IAAK6D,KAAK,EAAEC,MAAM,CAACC,IAAK;IAAAC,QAAA,eAAChE,OAAA;MAAG6D,KAAK,EAAE;QAACc,SAAS,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAM,CAAE;MAAAZ,QAAA,EAAC;IAA+B;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EACxI,IAAIhD,KAAK,EAAE,oBAAOrB,OAAA;IAAK6D,KAAK,EAAEC,MAAM,CAACC,IAAK;IAAAC,QAAA,eAAChE,OAAA;MAAK6D,KAAK,EAAEC,MAAM,CAACG,cAAe;MAAAD,QAAA,gBAAChE,OAAA;QAAAgE,QAAA,EAAI;MAAM;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAAArE,OAAA;QAAAgE,QAAA,EAAI3C;MAAK;QAAA6C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAAArE,OAAA;QAAQ6E,OAAO,EAAE5C,SAAU;QAAC4B,KAAK,EAAEC,MAAM,CAACgB,MAAO;QAAAd,QAAA,EAAC;MAAS;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAE3L,oBACErE,OAAA;IAAK6D,KAAK,EAAEC,MAAM,CAACC,IAAK;IAAAC,QAAA,gBACtBhE,OAAA;MAAQ6D,KAAK,EAAEC,MAAM,CAACiB,MAAO;MAAAf,QAAA,gBAC3BhE,OAAA;QAAI6D,KAAK,EAAEC,MAAM,CAACkB,WAAY;QAAAhB,QAAA,EAAC;MAAsB;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC1DrE,OAAA;QAAQ6E,OAAO,EAAEA,CAAA,KAAM/D,QAAQ,CAAC,GAAG,CAAE;QAAC+C,KAAK,EAAE;UAAC,GAAGC,MAAM,CAACgB,MAAM;UAAEG,eAAe,EAAE;QAAS,CAAE;QAAAjB,QAAA,EAAC;MAE7F;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGTrE,OAAA;MAAAgE,QAAA,gBACIhE,OAAA;QAAI6D,KAAK,EAAEC,MAAM,CAACoB,YAAa;QAAAlB,QAAA,EAAC;MAA+B;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACpErE,OAAA;QAAK6D,KAAK,EAAEC,MAAM,CAACqB,SAAU;QAAAnB,QAAA,EAC1BO,YAAY,CAACa,GAAG,CAACjF,QAAQ,iBACxBH,OAAA;UAA6B6D,KAAK,EAAEC,MAAM,CAACuB,IAAK;UAAArB,QAAA,gBAC9ChE,OAAA;YAAI6D,KAAK,EAAEC,MAAM,CAACwB,SAAU;YAAAtB,QAAA,gBAC1BhE,OAAA,CAACT,eAAe;cAACa,IAAI,EAAED,QAAQ,CAACC,IAAK;cAACyD,KAAK,EAAE;gBAAC0B,WAAW,EAAE,MAAM;gBAAEC,KAAK,EAAE;cAAS;YAAE;cAAAtB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAC,CAAC,EACtFlE,QAAQ,CAACA,QAAQ;UAAA;YAAA+D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChB,CAAC,eACLrE,OAAA;YAAI6D,KAAK,EAAEC,MAAM,CAAC2B,SAAU;YAAAzB,QAAA,EACzB7D,QAAQ,CAACG,KAAK,CAAC8E,GAAG,CAACM,IAAI,iBAAM1F,OAAA;cAAAgE,QAAA,gBAAqBhE,OAAA;gBAAAgE,QAAA,GAAS0B,IAAI,CAACnF,KAAK,EAAC,GAAC;cAAA;gBAAA2D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACqB,IAAI,CAAClF,OAAO;YAAA,GAAxDkF,IAAI,CAACnF,KAAK;cAAA2D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAmD,CAAG;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtG,CAAC;QAAA,GAPGlE,QAAQ,CAACA,QAAQ;UAAA+D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAQtB,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC,EAGTK,qBAAqB,IAAIzD,KAAK,CAACuD,MAAM,CAACmB,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAK,UAAU,CAAC,CAACC,MAAM,GAAG,CAAC,iBAC7E7F,OAAA;MAAAgE,QAAA,gBACEhE,OAAA;QAAI6D,KAAK,EAAEC,MAAM,CAACoB,YAAa;QAAAlB,QAAA,EAAC;MAAc;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACnDrE,OAAA;QAAK6D,KAAK,EAAEC,MAAM,CAACgC,cAAe;QAAA9B,QAAA,EAC/B/C,KAAK,CAACuD,MAAM,CAACmB,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAK,UAAU,CAAC,CAACR,GAAG,CAAC3B,IAAI,iBAClDzD,OAAA;UAAmB6D,KAAK,EAAEC,MAAM,CAACiC,QAAS;UAAA/B,QAAA,gBACxChE,OAAA;YAAK6D,KAAK,EAAEC,MAAM,CAACkC,UAAW;YAAAhC,QAAA,gBAC5BhE,OAAA;cAAI6D,KAAK,EAAEC,MAAM,CAACmC,SAAU;cAAAjC,QAAA,EAAEP,IAAI,CAAClD;YAAK;cAAA2D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eAC9CrE,OAAA,CAACkG,QAAQ;cAACpE,IAAI,EAAE2B,IAAI,CAAC3B;YAAK;cAAAoC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1B,CAAC,eACNrE,OAAA;YAAG6D,KAAK,EAAEC,MAAM,CAACqC,eAAgB;YAAAnC,QAAA,EAAEP,IAAI,CAAC2C;UAAW;YAAAlC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACxDrE,OAAA;YAAK6D,KAAK,EAAEC,MAAM,CAACuC,SAAU;YAAArC,QAAA,gBAC3BhE,OAAA;cAAAgE,QAAA,GAAM,QAAM,eAAAhE,OAAA;gBAAQ6D,KAAK,EAAE;kBAAC2B,KAAK,EAAE;gBAAS,CAAE;gBAAAxB,QAAA,EAAEP,IAAI,CAAC6C;cAAS;gBAAApC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eAC/ErE,OAAA;cAAAgE,QAAA,GAAM,UAAQ,eAAAhE,OAAA;gBAAQ6D,KAAK,EAAE;kBAAC2B,KAAK,EAAE;gBAAS,CAAE;gBAAAxB,QAAA,EAAEP,IAAI,CAAC8C;cAAa;gBAAArC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAS,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC,eACrFrE,OAAA;cAAAgE,QAAA,GAAM,UAAQ,EAACP,IAAI,CAAC+C,iBAAiB;YAAA;cAAAtC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC1C,CAAC,eACNrE,OAAA;YAAK6D,KAAK,EAAEC,MAAM,CAAC2C,WAAY;YAAAzC,QAAA,gBAC7BhE,OAAA;cAAM6D,KAAK,EAAE;gBAAC6C,QAAQ,EAAE,MAAM;gBAAElB,KAAK,EAAE;cAAS,CAAE;cAAAxB,QAAA,GAAC,OAAK,EAAC,IAAI2C,IAAI,CAAClD,IAAI,CAACmD,QAAQ,CAAC,CAACC,kBAAkB,CAAC,OAAO,CAAC;YAAA;cAAA3C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,EACnH,CAACZ,IAAI,CAACqD,SAAS,gBACd9G,OAAA;cAAK6D,KAAK,EAAEC,MAAM,CAACiD,WAAY;cAAA/C,QAAA,gBAC7BhE,OAAA;gBAAQ6E,OAAO,EAAEA,CAAA,KAAM7B,UAAU,CAACS,IAAI,CAACuD,EAAE,EAAE,KAAK,CAAE;gBAACnD,KAAK,EAAE;kBAAC,GAAGC,MAAM,CAACgB,MAAM;kBAAEG,eAAe,EAAE,SAAS;kBAAEyB,QAAQ,EAAE;gBAAM,CAAE;gBAAA1C,QAAA,gBAAChE,OAAA,CAACT,eAAe;kBAACa,IAAI,EAAEN,SAAU;kBAAC+D,KAAK,EAAE;oBAAC0B,WAAW,EAAE;kBAAK;gBAAE;kBAAArB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,QAAI;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAC1MrE,OAAA;gBAAQ6E,OAAO,EAAEA,CAAA,KAAM7B,UAAU,CAACS,IAAI,CAACuD,EAAE,EAAE,SAAS,CAAE;gBAACnD,KAAK,EAAE;kBAAC,GAAGC,MAAM,CAACgB,MAAM;kBAAEG,eAAe,EAAE,SAAS;kBAAEyB,QAAQ,EAAE;gBAAM,CAAE;gBAAA1C,QAAA,EAAC;cAAM;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5I,CAAC,gBACHrE,OAAA;cAAM6D,KAAK,EAAE;gBAAC2B,KAAK,EAAE,SAAS;gBAAEkB,QAAQ,EAAE,MAAM;gBAAEO,UAAU,EAAE;cAAM,CAAE;cAAAjD,QAAA,EAAC;YAAM;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAE;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvF,CAAC;QAAA,GAnBEZ,IAAI,CAACuD,EAAE;UAAA9C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAoBZ,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CACV,eAGDrE,OAAA;MAAAgE,QAAA,gBACIhE,OAAA;QAAK6D,KAAK,EAAE;UAAC,GAAGC,MAAM,CAACiB,MAAM;UAAEmC,SAAS,EAAE,MAAM;UAAEC,YAAY,EAAE;QAAM,CAAE;QAAAnD,QAAA,gBACtEhE,OAAA;UAAI6D,KAAK,EAAEC,MAAM,CAACoB,YAAa;UAAAlB,QAAA,EAAC;QAAuB;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAC3DI,mBAAmB,iBAAMzE,OAAA;UAAQ6E,OAAO,EAAElB,sBAAuB;UAACE,KAAK,EAAEC,MAAM,CAACgB,MAAO;UAAAd,QAAA,gBAAChE,OAAA,CAACT,eAAe;YAACa,IAAI,EAAEZ,MAAO;YAACqE,KAAK,EAAE;cAAC0B,WAAW,EAAE;YAAK;UAAE;YAAArB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,aAAS;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAG;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxK,CAAC,EACLtD,QAAQ,CAAC8E,MAAM,GAAG,CAAC,gBAClB7F,OAAA;QAAK6D,KAAK,EAAEC,MAAM,CAACsD,YAAa;QAAApD,QAAA,EAC3BjD,QAAQ,CAACqE,GAAG,CAACiC,OAAO,iBACrBrH,OAAA;UAAsB6D,KAAK,EAAE;YAAC,GAAGC,MAAM,CAACuB,IAAI;YAAE,GAAGvB,MAAM,CAACwD;UAAW,CAAE;UAAAtD,QAAA,eACjEhE,OAAA;YAAK6D,KAAK,EAAEC,MAAM,CAACyD,WAAY;YAAAvD,QAAA,gBAC/BhE,OAAA;cAAK6D,KAAK,EAAEC,MAAM,CAAC0D,aAAc;cAAAxD,QAAA,gBAC7BhE,OAAA;gBAAG6D,KAAK,EAAEC,MAAM,CAAC2D,YAAa;gBAAAzD,QAAA,EAAEqD,OAAO,CAAC9G;cAAK;gBAAA2D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eAClDrE,OAAA;gBAAK6D,KAAK,EAAEC,MAAM,CAAC4D,aAAc;gBAAA1D,QAAA,gBAAChE,OAAA,CAAC2H,eAAe;kBAAC7F,IAAI,EAAEuF,OAAO,CAACvF;gBAAK;kBAAAoC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eAAArE,OAAA,CAAC4H,UAAU;kBAAChC,MAAM,EAAEyB,OAAO,CAACzB;gBAAO;kBAAA1B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpH,CAAC,eACNrE,OAAA;cAAG6D,KAAK,EAAEC,MAAM,CAAC+D,WAAY;cAAA7D,QAAA,gBAAChE,OAAA,CAACT,eAAe;gBAACa,IAAI,EAAEX,aAAc;gBAACoE,KAAK,EAAE;kBAAC0B,WAAW,EAAE;gBAAK;cAAE;gBAAArB,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAC,CAAC,EAAC,IAAIsC,IAAI,CAACU,OAAO,CAACzF,IAAI,CAAC,CAACiF,kBAAkB,CAAC,OAAO,EAAE;gBAAEiB,OAAO,EAAE,MAAM;gBAAEC,IAAI,EAAE,SAAS;gBAAEC,KAAK,EAAE,MAAM;gBAAEC,GAAG,EAAE;cAAU,CAAC,CAAC,EAAC,QAAG,EAACZ,OAAO,CAACxF,IAAI;YAAA;cAAAqC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3O;QAAC,GAPAgD,OAAO,CAACL,EAAE;UAAA9C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAQf,CACJ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,gBACHrE,OAAA;QAAG6D,KAAK,EAAE;UAACc,SAAS,EAAE,QAAQ;UAAEa,KAAK,EAAE;QAAS,CAAE;QAAAxB,QAAA,EAAC;MAAwC;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAE;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChG,CAAC,EAGT9C,kBAAkB,iBACjBvB,OAAA;MAAK6D,KAAK,EAAEC,MAAM,CAACoE,YAAa;MAAAlE,QAAA,eAC5BhE,OAAA;QAAK6D,KAAK,EAAEC,MAAM,CAACqE,YAAa;QAAAnE,QAAA,gBAC5BhE,OAAA;UAAI6D,KAAK,EAAEC,MAAM,CAACsE,UAAW;UAAApE,QAAA,EAAC;QAA8B;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACjErE,OAAA;UAAK6D,KAAK,EAAE;YAACwE,OAAO,EAAE,MAAM;YAAEC,aAAa,EAAE,QAAQ;YAAEC,GAAG,EAAE;UAAM,CAAE;UAAAvE,QAAA,gBAChEhE,OAAA;YAAO8B,IAAI,EAAC,MAAM;YAAC0G,WAAW,EAAC,wBAAqB;YAACC,KAAK,EAAE1G,UAAU,CAACxB,KAAM;YAACmI,QAAQ,EAAEC,CAAC,IAAI3G,aAAa,CAAC;cAAC,GAAGD,UAAU;cAAExB,KAAK,EAAEoI,CAAC,CAACC,MAAM,CAACH;YAAK,CAAC,CAAE;YAAC5E,KAAK,EAAEC,MAAM,CAAC+E;UAAW;YAAA3E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAChLrE,OAAA;YAAO8B,IAAI,EAAC,MAAM;YAAC2G,KAAK,EAAE1G,UAAU,CAACH,IAAK;YAAC8G,QAAQ,EAAEC,CAAC,IAAI3G,aAAa,CAAC;cAAC,GAAGD,UAAU;cAAEH,IAAI,EAAE+G,CAAC,CAACC,MAAM,CAACH;YAAK,CAAC,CAAE;YAAC5E,KAAK,EAAEC,MAAM,CAAC+E;UAAW;YAAA3E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC5IrE,OAAA;YAAO8B,IAAI,EAAC,MAAM;YAAC2G,KAAK,EAAE1G,UAAU,CAACF,IAAK;YAAC6G,QAAQ,EAAEC,CAAC,IAAI3G,aAAa,CAAC;cAAC,GAAGD,UAAU;cAAEF,IAAI,EAAE8G,CAAC,CAACC,MAAM,CAACH;YAAK,CAAC,CAAE;YAAC5E,KAAK,EAAEC,MAAM,CAAC+E;UAAW;YAAA3E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC5IrE,OAAA;YAAQyI,KAAK,EAAE1G,UAAU,CAACD,IAAK;YAAC4G,QAAQ,EAAEC,CAAC,IAAI3G,aAAa,CAAC;cAAC,GAAGD,UAAU;cAAED,IAAI,EAAE6G,CAAC,CAACC,MAAM,CAACH;YAAgC,CAAC,CAAE;YAAC5E,KAAK,EAAEC,MAAM,CAAC+E,UAAW;YAAA7E,QAAA,gBACrJhE,OAAA;cAAQyI,KAAK,EAAC,WAAQ;cAAAzE,QAAA,EAAC;YAAiB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACjDrE,OAAA;cAAQyI,KAAK,EAAC,WAAW;cAAAzE,QAAA,EAAC;YAAiB;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACpDrE,OAAA;cAAQyI,KAAK,EAAC,YAAS;cAAAzE,QAAA,EAAC;YAAe;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAChDrE,OAAA;cAAQyI,KAAK,EAAC,gBAAgB;cAAAzE,QAAA,EAAC;YAAc;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC,eACNrE,OAAA;UAAK6D,KAAK,EAAEC,MAAM,CAACgF,YAAa;UAAA9E,QAAA,gBAC5BhE,OAAA;YAAQ6E,OAAO,EAAEA,CAAA,KAAMrD,qBAAqB,CAAC,KAAK,CAAE;YAACqC,KAAK,EAAE;cAAC,GAAGC,MAAM,CAACgB,MAAM;cAAEG,eAAe,EAAE;YAAS,CAAE;YAAC8D,QAAQ,EAAEtH,YAAa;YAAAuC,QAAA,EAAC;UAAO;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACpJrE,OAAA;YAAQ6E,OAAO,EAAEjB,iBAAkB;YAACC,KAAK,EAAEC,MAAM,CAACgB,MAAO;YAACiE,QAAQ,EAAEtH,YAAa;YAAAuC,QAAA,EAAEvC,YAAY,GAAG,kBAAkB,GAAG;UAAW;YAAAyC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3I,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;;AAED;AAAA3D,EAAA,CAhPMD,UAAoB;EAAA,QAC4BpB,OAAO,EAC1CC,WAAW;AAAA;AAAA0J,EAAA,GAFxBvI,UAAoB;AAiP1B,MAAMmH,UAAsD,GAAGA,CAAC;EAAEhC;AAAO,CAAC,KAAK;EAC7E,MAAMqD,EAAE,GAAG;IAAE,SAAS,EAAE;MAAEhE,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU,CAAC;IAAE,UAAU,EAAE;MAAEP,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU,CAAC;IAAE,QAAQ,EAAE;MAAEP,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU;EAAE,CAAC;EACpM,oBAAOxF,OAAA;IAAM6D,KAAK,EAAE;MAAE,GAAGC,MAAM,CAACoF,IAAI;MAAE,GAAGD,EAAE,CAACrD,MAAM;IAAE,CAAE;IAAA5B,QAAA,EAAE4B;EAAM;IAAA1B,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAO,CAAC;AACxE,CAAC;AAAC8E,GAAA,GAHIvB,UAAsD;AAI5D,MAAMD,eAAuD,GAAGA,CAAC;EAAE7F;AAAK,CAAC,KAAK;EAC5E,MAAMsH,EAAE,GAAG;IAAE,WAAW,EAAE;MAAEnE,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU,CAAC;IAAE,SAAS,EAAE;MAAEP,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU,CAAC;IAAE,gBAAgB,EAAE;MAAEP,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU,CAAC;IAAE,QAAQ,EAAE;MAAEP,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU;EAAE,CAAC;EACzQ,oBAAOxF,OAAA;IAAM6D,KAAK,EAAE;MAAE,GAAGC,MAAM,CAACoF,IAAI;MAAE,GAAGE,EAAE,CAACtH,IAAI;IAAE,CAAE;IAAAkC,QAAA,EAAElC;EAAI;IAAAoC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAO,CAAC;AACpE,CAAC;AAACgF,GAAA,GAHI1B,eAAuD;AAI7D,MAAMzB,QAA6C,GAAGA,CAAC;EAAEpE;AAAK,CAAC,KAAK;EAClE,MAAMsH,EAAE,GAAG;IAAE,qBAAqB,EAAE;MAAEnE,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU,CAAC;IAAE,UAAU,EAAE;MAAEP,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU,CAAC;IAAE,gBAAgB,EAAE;MAAEP,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU,CAAC;IAAE,OAAO,EAAE;MAAEP,eAAe,EAAE,SAAS;MAAEO,KAAK,EAAE;IAAU;EAAE,CAAC;EACnR,oBAAOxF,OAAA;IAAM6D,KAAK,EAAE;MAAE,GAAGC,MAAM,CAACoF,IAAI;MAAE,GAAGE,EAAE,CAACtH,IAAI;IAAE,CAAE;IAAAkC,QAAA,EAAElC;EAAI;IAAAoC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAO,CAAC;AACpE,CAAC;AAACiF,GAAA,GAHIpD,QAA6C;AAKnD,MAAMpC,MAA8C,GAAG;EACrDC,IAAI,EAAE;IAAEwF,UAAU,EAAE,mBAAmB;IAAE3E,OAAO,EAAE,MAAM;IAAEK,eAAe,EAAE,SAAS;IAAEuE,SAAS,EAAE;EAAQ,CAAC;EAC1GzE,MAAM,EAAE;IAAEsD,OAAO,EAAE,MAAM;IAAEoB,cAAc,EAAE,eAAe;IAAEC,UAAU,EAAE,QAAQ;IAAEvC,YAAY,EAAE,MAAM;IAAEwC,QAAQ,EAAE,MAAM;IAAEpB,GAAG,EAAE;EAAO,CAAC;EACvIvD,WAAW,EAAE;IAAE0B,QAAQ,EAAE,MAAM;IAAEO,UAAU,EAAE,MAAM;IAAEzB,KAAK,EAAE,SAAS;IAAEoE,MAAM,EAAE;EAAE,CAAC;EAClF1E,YAAY,EAAE;IAAEwB,QAAQ,EAAE,MAAM;IAAEO,UAAU,EAAE,MAAM;IAAEzB,KAAK,EAAE,SAAS;IAAEoE,MAAM,EAAE,CAAC;IAAEC,YAAY,EAAE,mBAAmB;IAAEC,aAAa,EAAE;EAAM,CAAC;EAC5I7F,cAAc,EAAE;IAAEU,SAAS,EAAE,QAAQ;IAAEC,OAAO,EAAE,MAAM;IAAEK,eAAe,EAAE,OAAO;IAAE8E,YAAY,EAAE,MAAM;IAAEC,SAAS,EAAE;EAAiC,CAAC;EACrJlF,MAAM,EAAE;IAAEF,OAAO,EAAE,WAAW;IAAEK,eAAe,EAAE,SAAS;IAAEO,KAAK,EAAE,OAAO;IAAEyE,MAAM,EAAE,MAAM;IAAEF,YAAY,EAAE,KAAK;IAAEG,MAAM,EAAE,SAAS;IAAEjD,UAAU,EAAE,KAAK;IAAEoB,OAAO,EAAE,MAAM;IAAEqB,UAAU,EAAE,QAAQ;IAAED,cAAc,EAAE,QAAQ;IAAE/C,QAAQ,EAAE;EAAO,CAAC;EAC1OvB,SAAS,EAAE;IAAEkD,OAAO,EAAE,MAAM;IAAE8B,mBAAmB,EAAE,sCAAsC;IAAE5B,GAAG,EAAE,MAAM;IAAErB,SAAS,EAAE,MAAM;IAAEC,YAAY,EAAE;EAAO,CAAC;EACjJ9B,IAAI,EAAE;IAAEJ,eAAe,EAAE,OAAO;IAAEL,OAAO,EAAE,MAAM;IAAEmF,YAAY,EAAE,MAAM;IAAEC,SAAS,EAAE;EAAiC,CAAC;EACtH1E,SAAS,EAAE;IAAEoB,QAAQ,EAAE,MAAM;IAAEO,UAAU,EAAE,MAAM;IAAE2C,MAAM,EAAE,YAAY;IAAEpE,KAAK,EAAE,SAAS;IAAEqE,YAAY,EAAE,mBAAmB;IAAEC,aAAa,EAAE,MAAM;IAAEzB,OAAO,EAAE,MAAM;IAAEqB,UAAU,EAAE;EAAS,CAAC;EAC5LjE,SAAS,EAAE;IAAEmE,MAAM,EAAE,CAAC;IAAEQ,WAAW,EAAE,MAAM;IAAE/B,OAAO,EAAE,MAAM;IAAEC,aAAa,EAAE,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAE7B,QAAQ,EAAE,MAAM;IAAElB,KAAK,EAAE,SAAS;IAAE6E,UAAU,EAAE;EAAI,CAAC;EACzJvE,cAAc,EAAE;IAAEuC,OAAO,EAAE,MAAM;IAAE8B,mBAAmB,EAAE,sCAAsC;IAAE5B,GAAG,EAAE,MAAM;IAAErB,SAAS,EAAE,MAAM;IAAEC,YAAY,EAAE;EAAO,CAAC;EACtJpB,QAAQ,EAAE;IAAEd,eAAe,EAAE,OAAO;IAAEL,OAAO,EAAE,MAAM;IAAEmF,YAAY,EAAE,MAAM;IAAEC,SAAS,EAAE,gCAAgC;IAAEM,UAAU,EAAE;EAAoB,CAAC;EAC3JtE,UAAU,EAAE;IAAEqC,OAAO,EAAE,MAAM;IAAEoB,cAAc,EAAE,eAAe;IAAEC,UAAU,EAAE,YAAY;IAAEvC,YAAY,EAAE,MAAM;IAAEoB,GAAG,EAAE;EAAM,CAAC;EAC5HtC,SAAS,EAAE;IAAES,QAAQ,EAAE,MAAM;IAAEO,UAAU,EAAE,MAAM;IAAE2C,MAAM,EAAE,CAAC;IAAEpE,KAAK,EAAE;EAAU,CAAC;EAChFW,eAAe,EAAE;IAAEO,QAAQ,EAAE,MAAM;IAAElB,KAAK,EAAE,SAAS;IAAE2B,YAAY,EAAE,MAAM;IAAEkD,UAAU,EAAE;EAAI,CAAC;EAC9FhE,SAAS,EAAE;IAAEgC,OAAO,EAAE,MAAM;IAAEE,GAAG,EAAE,MAAM;IAAE7B,QAAQ,EAAE,MAAM;IAAES,YAAY,EAAE,MAAM;IAAEwC,QAAQ,EAAE,MAAM;IAAEnE,KAAK,EAAE;EAAU,CAAC;EACvHiB,WAAW,EAAE;IAAE4B,OAAO,EAAE,MAAM;IAAEoB,cAAc,EAAE,eAAe;IAAEC,UAAU,EAAE,QAAQ;IAAEa,SAAS,EAAE,mBAAmB;IAAEC,UAAU,EAAE;EAAO,CAAC;EAC3IzD,WAAW,EAAE;IAAEsB,OAAO,EAAE,MAAM;IAAEE,GAAG,EAAE;EAAM,CAAC;EAC5CnB,YAAY,EAAE;IAAEiB,OAAO,EAAE,MAAM;IAAEC,aAAa,EAAE,QAAQ;IAAEC,GAAG,EAAE,MAAM;IAAEpB,YAAY,EAAE;EAAO,CAAC;EAC7FG,WAAW,EAAE;IAAEe,OAAO,EAAE,MAAM;IAAEoB,cAAc,EAAE,eAAe;IAAEC,UAAU,EAAE,YAAY;IAAEC,QAAQ,EAAE,MAAM;IAAEpB,GAAG,EAAE;EAAO,CAAC;EAC1HhB,WAAW,EAAE;IAAEkD,IAAI,EAAE;EAAE,CAAC;EACxBjD,aAAa,EAAE;IAAEa,OAAO,EAAE,MAAM;IAAEoB,cAAc,EAAE,eAAe;IAAEC,UAAU,EAAE,YAAY;IAAEvC,YAAY,EAAE,KAAK;IAAEoB,GAAG,EAAE;EAAM,CAAC;EAC9Hb,aAAa,EAAE;IAAEW,OAAO,EAAE,MAAM;IAAEE,GAAG,EAAE,KAAK;IAAEoB,QAAQ,EAAE,MAAM;IAAEF,cAAc,EAAE;EAAW,CAAC;EAC5FhC,YAAY,EAAE;IAAER,UAAU,EAAE,MAAM;IAAE2C,MAAM,EAAE,CAAC;IAAEpE,KAAK,EAAE,SAAS;IAAEkB,QAAQ,EAAE;EAAO,CAAC;EACnFmB,WAAW,EAAE;IAAEnB,QAAQ,EAAE,MAAM;IAAEkD,MAAM,EAAE,OAAO;IAAEpE,KAAK,EAAE;EAAU,CAAC;EACpE0D,IAAI,EAAE;IAAEtE,OAAO,EAAE,UAAU;IAAEmF,YAAY,EAAE,QAAQ;IAAE9C,UAAU,EAAE,KAAK;IAAEP,QAAQ,EAAE,MAAM;IAAEgE,UAAU,EAAE;EAAE,CAAC;EACzGxC,YAAY,EAAE;IAAEyC,QAAQ,EAAE,OAAO;IAAEC,GAAG,EAAE,CAAC;IAAEC,IAAI,EAAE,CAAC;IAAEC,KAAK,EAAE,CAAC;IAAEC,MAAM,EAAE,CAAC;IAAE9F,eAAe,EAAE,iBAAiB;IAAEoD,OAAO,EAAE,MAAM;IAAEqB,UAAU,EAAE,QAAQ;IAAED,cAAc,EAAE,QAAQ;IAAEuB,MAAM,EAAE,IAAI;IAAEpG,OAAO,EAAE;EAAO,CAAC;EAC7MuD,YAAY,EAAE;IAAElD,eAAe,EAAE,OAAO;IAAEL,OAAO,EAAE,MAAM;IAAEmF,YAAY,EAAE,MAAM;IAAEkB,KAAK,EAAE,MAAM;IAAEC,QAAQ,EAAE;EAAQ,CAAC;EACnH9C,UAAU,EAAE;IAAE1B,QAAQ,EAAE,MAAM;IAAEO,UAAU,EAAE,MAAM;IAAEE,YAAY,EAAE,MAAM;IAAExC,SAAS,EAAE;EAAS,CAAC;EAC/FkE,UAAU,EAAE;IAAEoC,KAAK,EAAE,MAAM;IAAErG,OAAO,EAAE,MAAM;IAAEqF,MAAM,EAAE,mBAAmB;IAAEF,YAAY,EAAE,KAAK;IAAEoB,SAAS,EAAE;EAAa,CAAC;EACzHrC,YAAY,EAAE;IAAET,OAAO,EAAE,MAAM;IAAEoB,cAAc,EAAE,UAAU;IAAElB,GAAG,EAAE,MAAM;IAAErB,SAAS,EAAE;EAAO;AAC9F,CAAC;AAED,eAAezG,UAAU;AAAC,IAAAuI,EAAA,EAAAG,GAAA,EAAAE,GAAA,EAAAC,GAAA;AAAA8B,YAAA,CAAApC,EAAA;AAAAoC,YAAA,CAAAjC,GAAA;AAAAiC,YAAA,CAAA/B,GAAA;AAAA+B,YAAA,CAAA9B,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}