{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../context/AuthContext';import{useNavigate}from'react-router-dom';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus,faCalendarAlt,faBook,faLandmark,faGavel,faHandshake,faVoteYea}from'@fortawesome/free-solid-svg-icons';// --- CONSTANTES & HOOKS ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL='http://172.30.240.1:8000/api';// --- INTERFACES API ---\n// --- RÈGLES DE LA CHARTE (DONNÉES STATIQUES ACCEPTABLES) ---\nconst governanceRules=[{category:\"Cotisations & Fonds\",icon:faLandmark,requiredPermission:\"view_governance\",rules:[{title:\"Montant Minimal (Article 3.1)\",content:\"La contribution mensuelle minimale est de 4 000 XAF, à déposer entre le 24 et le 25 du mois.\"},{title:\"Gestion du Fonds (Article 3.2-3.3)\",content:\"Les cotisations sont versées sur un compte commun géré par le Trésorier et supervisé par le Comité de Gestion (3-6 membres).\"},{title:\"Rapports Mensuels (Article 3.4)\",content:\"Un rapport financier détaillé est présenté mensuellement à l'ensemble des membres.\"}]},{category:\"Système de Points Berry\",icon:faBook,requiredPermission:\"view_berry_calculations\",rules:[{title:\"Attribution de base\",content:\"Chaque contribution assidue ajoute 5 points. Un retard entraîne une pénalité de 15 points.\"},{title:\"Bonus Contributions\",content:\"Des bonus sont accordés : >6800 XAF (+5pts), >20% du fonds (+10pts), >50000 XAF (+20pts).\"},{title:\"Pénalités (Article 6.5)\",content:\"Une absence de contribution pendant un mois entraîne une perte de 50% des points Berry acquis.\"},{title:\"Échelle de Prêt\",content:\"10-100pts = 60k XAF, 100-199pts = 120k XAF, 200-499pts = 300k XAF, 500+pts = selon fonds disponibles.\"}]},{category:\"Prêts aux Membres\",icon:faHandshake,requiredPermission:\"view_loans\",rules:[{title:\"Conditions d'Accès (Article 4.1)\",content:\"L'accès au fonds est réservé aux urgences avérées (maladie, accident, etc.).\"},{title:\"Procédure (Article 4.2-4.3)\",content:\"Toute demande doit être formulée par écrit et examinée par le Comité de Gestion.\"},{title:\"Garanties (Article 4.7)\",content:\"Chaque prêt individuel doit être soutenu par au moins deux avaliseurs membres du groupe.\"},{title:\"Gros Prêts (Article 4.5)\",content:\"L'approbation d'un retrait de plus de 35% du fonds doit être validée par l'ensemble des membres.\"}]},{category:\"Sanctions & Exclusions\",icon:faGavel,requiredPermission:\"view_sanctions\",rules:[{title:\"Retard de Cotisation (Article 6.3)\",content:\"Sanctionné par une amende de 200 XAF par jour de retard.\"},{title:\"Processus Décisionnel (Article 6.2)\",content:\"Toutes les décisions disciplinaires sont prises par un vote majoritaire des membres.\"},{title:\"Non-Remboursement (Article 6.4)\",content:\"En cas de défaut, saisie des fonds du membre puis de ses avaliseurs.\"}]}];// --- COMPOSANT PRINCIPAL ---\nconst Governance=()=>{const{user,hasPermission,getRoleDisplayName}=useAuth();const navigate=useNavigate();const[meetings,setMeetings]=useState([]);const[votes,setVotes]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isMeetingModalOpen,setIsMeetingModalOpen]=useState(false);const[isSubmitting,setIsSubmitting]=useState(false);const initialMeetingFormState={title:'',date:'',time:'',type:'Comité'};const[newMeeting,setNewMeeting]=useState(initialMeetingFormState);const fetchData=async()=>{try{setLoading(true);setError(null);const[meetingsRes,votesRes]=await Promise.all([fetch(`${API_BASE_URL}/meetings/`,{headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`}}),fetch(`${API_BASE_URL}/votes/`,{headers:{'Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`}})]);if(!meetingsRes.ok)throw new Error('Erreur de chargement des réunions');if(!votesRes.ok)throw new Error('Erreur de chargement des votes');const meetingsData=await meetingsRes.json();const votesData=await votesRes.json();setMeetings(meetingsData);setVotes(votesData);}catch(err){setError(err instanceof Error?err.message:'Une erreur est survenue');}finally{setLoading(false);}};useEffect(()=>{if(user!==null&&user!==void 0&&user.token&&hasPermission('view_governance')){fetchData();}},[user===null||user===void 0?void 0:user.token,hasPermission]);// --- GESTIONNAIRES D'ÉVÉNEMENTS ---\nconst handleVote=async(voteId,choice)=>{if(!hasPermission('participate_in_votes')){return alert(\"Vous n'avez pas la permission de voter.\");}try{const response=await fetch(`${API_BASE_URL}/votes/${voteId}/vote/`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`},body:JSON.stringify({vote:choice})});if(!response.ok){const errData=await response.json();throw new Error(errData.error||'Erreur lors du vote');}await fetchData();// Recharger les données pour refléter le vote\nalert('Votre vote a été enregistré.');}catch(err){alert(err instanceof Error?err.message:'Une erreur est survenue');}};const handleOpenMeetingModal=()=>{if(!hasPermission('organize_sessions')&&!hasPermission('manage_governance')){return alert(\"Vous n'avez pas la permission d'organiser des réunions.\");}setNewMeeting(initialMeetingFormState);setIsMeetingModalOpen(true);};const handleSaveMeeting=async()=>{if(!newMeeting.title||!newMeeting.date||!newMeeting.time){return alert(\"Veuillez remplir tous les champs pour la réunion.\");}setIsSubmitting(true);try{const response=await fetch(`${API_BASE_URL}/meetings/`,{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${user===null||user===void 0?void 0:user.token}`},body:JSON.stringify(newMeeting)});if(!response.ok){throw new Error('Erreur lors de la planification de la réunion');}await fetchData();// Recharger les données\nsetIsMeetingModalOpen(false);}catch(err){alert(err instanceof Error?err.message:'Une erreur est survenue');}finally{setIsSubmitting(false);}};// --- VÉRIFICATION DES PERMISSIONS ---\nif(!hasPermission('view_governance')){return/*#__PURE__*/_jsx(\"div\",{style:styles.page,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.errorContainer,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Acc\\xE8s refus\\xE9\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Vous n'avez pas la permission de consulter la gouvernance.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Votre r\\xF4le actuel : \",/*#__PURE__*/_jsx(\"strong\",{children:user!==null&&user!==void 0&&user.role?getRoleDisplayName(user.role):'Non défini'})]})]})});}// --- AFFICHAGE ---\nconst visibleRules=governanceRules.filter(category=>hasPermission(category.requiredPermission));const canOrganizeMeetings=hasPermission('organize_sessions')||hasPermission('manage_governance');const canParticipateInVotes=hasPermission('participate_in_votes')||hasPermission('manage_governance');if(loading)return/*#__PURE__*/_jsx(\"div\",{style:styles.page,children:/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center',padding:'40px'},children:\"Chargement de la gouvernance...\"})});if(error)return/*#__PURE__*/_jsx(\"div\",{style:styles.page,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.errorContainer,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Erreur\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchData,style:styles.button,children:\"R\\xE9essayer\"})]})});return/*#__PURE__*/_jsxs(\"div\",{style:styles.page,children:[/*#__PURE__*/_jsxs(\"header\",{style:styles.header,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.headerTitle,children:\"Gouvernance & R\\xE9unions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),style:{...styles.button,backgroundColor:'#6b7280'},children:\"\\u2190 Retour\"})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.sectionTitle,children:\"R\\xE8gles de la Charte (Version 5)\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.rulesGrid,children:visibleRules.map(category=>/*#__PURE__*/_jsxs(\"div\",{style:styles.card,children:[/*#__PURE__*/_jsxs(\"h4\",{style:styles.cardTitle,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:category.icon,style:{marginRight:'10px',color:'#3b82f6'}}),category.category]}),/*#__PURE__*/_jsx(\"ul\",{style:styles.rulesList,children:category.rules.map(rule=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[rule.title,\":\"]}),\" \",rule.content]},rule.title))})]},category.category))})]}),canParticipateInVotes&&votes.filter(v=>v.status==='En cours').length>0&&/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.sectionTitle,children:\"Votes en Cours\"}),/*#__PURE__*/_jsx(\"div\",{style:styles.votesContainer,children:votes.filter(v=>v.status==='En cours').map(vote=>/*#__PURE__*/_jsxs(\"div\",{style:styles.voteCard,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.voteHeader,children:[/*#__PURE__*/_jsx(\"h4\",{style:styles.voteTitle,children:vote.title}),/*#__PURE__*/_jsx(TypeChip,{type:vote.type})]}),/*#__PURE__*/_jsx(\"p\",{style:styles.voteDescription,children:vote.description}),/*#__PURE__*/_jsxs(\"div\",{style:styles.voteStats,children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"Pour: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#22c55e'},children:vote.votes_for})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Contre: \",/*#__PURE__*/_jsx(\"strong\",{style:{color:'#ef4444'},children:vote.votes_against})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Requis: \",vote.required_majority]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.voteActions,children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:'12px',color:'#6b7280'},children:[\"Fin: \",new Date(vote.end_date).toLocaleDateString('fr-FR')]}),!vote.has_voted?/*#__PURE__*/_jsxs(\"div\",{style:styles.voteButtons,children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleVote(vote.id,'for'),style:{...styles.button,backgroundColor:'#22c55e',fontSize:'12px'},children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faVoteYea,style:{marginRight:'4px'}}),\"Pour\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleVote(vote.id,'against'),style:{...styles.button,backgroundColor:'#ef4444',fontSize:'12px'},children:\"Contre\"})]}):/*#__PURE__*/_jsx(\"span\",{style:{color:'#22c55e',fontSize:'12px',fontWeight:'bold'},children:\"\\u2713 Vot\\xE9\"})]})]},vote.id))})]}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{...styles.header,marginTop:'40px',marginBottom:'24px'},children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.sectionTitle,children:\"Calendrier des R\\xE9unions\"}),canOrganizeMeetings&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleOpenMeetingModal,style:styles.button,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPlus,style:{marginRight:'8px'}}),\"Planifier\"]})]}),meetings.length>0?/*#__PURE__*/_jsx(\"div\",{style:styles.meetingsList,children:meetings.map(meeting=>/*#__PURE__*/_jsx(\"div\",{style:{...styles.card,...styles.meetingCard},children:/*#__PURE__*/_jsxs(\"div\",{style:styles.meetingInfo,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.meetingHeader,children:[/*#__PURE__*/_jsx(\"p\",{style:styles.meetingTitle,children:meeting.title}),/*#__PURE__*/_jsxs(\"div\",{style:styles.meetingBadges,children:[/*#__PURE__*/_jsx(MeetingTypeChip,{type:meeting.type}),/*#__PURE__*/_jsx(StatusChip,{status:meeting.status})]})]}),/*#__PURE__*/_jsxs(\"p\",{style:styles.meetingDate,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCalendarAlt,style:{marginRight:'8px'}}),new Date(meeting.date).toLocaleDateString('fr-FR',{weekday:'long',year:'numeric',month:'long',day:'numeric'}),\" \\xE0 \",meeting.time]})]})},meeting.id))}):/*#__PURE__*/_jsx(\"p\",{style:{textAlign:'center',color:'#6b7280'},children:\"Aucune r\\xE9union planifi\\xE9e pour le moment.\"})]}),isMeetingModalOpen&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modalContent,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.modalTitle,children:\"Planifier une nouvelle r\\xE9union\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'16px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Titre de la r\\xE9union\",value:newMeeting.title,onChange:e=>setNewMeeting({...newMeeting,title:e.target.value}),style:styles.modalInput}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newMeeting.date,onChange:e=>setNewMeeting({...newMeeting,date:e.target.value}),style:styles.modalInput}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:newMeeting.time,onChange:e=>setNewMeeting({...newMeeting,time:e.target.value}),style:styles.modalInput}),/*#__PURE__*/_jsxs(\"select\",{value:newMeeting.type,onChange:e=>setNewMeeting({...newMeeting,type:e.target.value}),style:styles.modalInput,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Comit\\xE9\",children:\"Comit\\xE9 de Gestion\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Ouverture\",children:\"Ouverture du mois\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cl\\xF4ture\",children:\"Cl\\xF4ture du mois\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Extraordinaire\",children:\"Extraordinaire\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.modalActions,children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsMeetingModalOpen(false),style:{...styles.button,backgroundColor:'#6b7280'},disabled:isSubmitting,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSaveMeeting,style:styles.button,disabled:isSubmitting,children:isSubmitting?'Planification...':'Planifier'})]})]})})]});};// --- SOUS-COMPOSANTS & STYLES ---\nconst StatusChip=_ref=>{let{status}=_ref;const sC={'À venir':{backgroundColor:'#dcfce7',color:'#166534'},'En cours':{backgroundColor:'#fef3c7',color:'#92400e'},'Passée':{backgroundColor:'#e5e7eb',color:'#4b5563'}};return/*#__PURE__*/_jsx(\"span\",{style:{...styles.chip,...sC[status]},children:status});};const MeetingTypeChip=_ref2=>{let{type}=_ref2;const tC={'Ouverture':{backgroundColor:'#dbeafe',color:'#1e40af'},'Clôture':{backgroundColor:'#fecaca',color:'#991b1b'},'Extraordinaire':{backgroundColor:'#f3e8ff',color:'#7c2d12'},'Comité':{backgroundColor:'#d1fae5',color:'#065f46'}};return/*#__PURE__*/_jsx(\"span\",{style:{...styles.chip,...tC[type]},children:type});};const TypeChip=_ref3=>{let{type}=_ref3;const tC={'Modification Charte':{backgroundColor:'#fef3c7',color:'#92400e'},'Sanction':{backgroundColor:'#fee2e2',color:'#991b1b'},'Prêt Important':{backgroundColor:'#dbeafe',color:'#1e40af'},'Règle':{backgroundColor:'#e0e7ff',color:'#3730a3'}};return/*#__PURE__*/_jsx(\"span\",{style:{...styles.chip,...tC[type]},children:type});};const styles={page:{fontFamily:'Arial, sans-serif',padding:'16px',backgroundColor:'#f3f4f6',minHeight:'100vh'},header:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'24px',flexWrap:'wrap',gap:'16px'},headerTitle:{fontSize:'24px',fontWeight:'bold',color:'#1f2937',margin:0},sectionTitle:{fontSize:'22px',fontWeight:'bold',color:'#1f2937',margin:0,borderBottom:'2px solid #3b82f6',paddingBottom:'8px'},errorContainer:{textAlign:'center',padding:'40px',backgroundColor:'white',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)'},button:{padding:'10px 16px',backgroundColor:'#2563eb',color:'white',border:'none',borderRadius:'8px',cursor:'pointer',fontWeight:'600',display:'flex',alignItems:'center',justifyContent:'center',fontSize:'14px'},rulesGrid:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(350px, 1fr))',gap:'24px',marginTop:'24px',marginBottom:'40px'},card:{backgroundColor:'white',padding:'24px',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)'},cardTitle:{fontSize:'18px',fontWeight:'bold',margin:'0 0 16px 0',color:'#1f2937',borderBottom:'1px solid #e5e7eb',paddingBottom:'12px',display:'flex',alignItems:'center'},rulesList:{margin:0,paddingLeft:'20px',display:'flex',flexDirection:'column',gap:'12px',fontSize:'14px',color:'#374151',lineHeight:1.6},votesContainer:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(320px, 1fr))',gap:'16px',marginTop:'24px',marginBottom:'40px'},voteCard:{backgroundColor:'white',padding:'20px',borderRadius:'12px',boxShadow:'0 4px 12px rgba(0, 0, 0, 0.08)',borderLeft:'4px solid #3b82f6'},voteHeader:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'12px',gap:'8px'},voteTitle:{fontSize:'16px',fontWeight:'bold',margin:0,color:'#1f2937'},voteDescription:{fontSize:'14px',color:'#4b5563',marginBottom:'16px',lineHeight:1.5},voteStats:{display:'flex',gap:'16px',fontSize:'12px',marginBottom:'16px',flexWrap:'wrap',color:'#374151'},voteActions:{display:'flex',justifyContent:'space-between',alignItems:'center',borderTop:'1px solid #f3f4f6',paddingTop:'12px'},voteButtons:{display:'flex',gap:'8px'},meetingsList:{display:'flex',flexDirection:'column',gap:'16px',marginBottom:'40px'},meetingCard:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',flexWrap:'wrap',gap:'16px'},meetingInfo:{flex:1},meetingHeader:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'8px',gap:'8px'},meetingBadges:{display:'flex',gap:'8px',flexWrap:'wrap',justifyContent:'flex-end'},meetingTitle:{fontWeight:'bold',margin:0,color:'#1f2937',fontSize:'16px'},meetingDate:{fontSize:'14px',margin:'4px 0',color:'#4b5563'},chip:{padding:'4px 12px',borderRadius:'9999px',fontWeight:'600',fontSize:'12px',flexShrink:0},modalOverlay:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.6)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000,padding:'16px'},modalContent:{backgroundColor:'white',padding:'24px',borderRadius:'12px',width:'100%',maxWidth:'500px'},modalTitle:{fontSize:'20px',fontWeight:'bold',marginBottom:'24px',textAlign:'center'},modalInput:{width:'100%',padding:'10px',border:'1px solid #d1d5db',borderRadius:'8px',boxSizing:'border-box'},modalActions:{display:'flex',justifyContent:'flex-end',gap:'12px',marginTop:'24px'}};export default Governance;","map":{"version":3,"names":["React","useState","useEffect","useAuth","useNavigate","FontAwesomeIcon","faPlus","faCalendarAlt","faBook","faLandmark","faGavel","faHandshake","faVoteYea","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","governanceRules","category","icon","requiredPermission","rules","title","content","Governance","user","hasPermission","getRoleDisplayName","navigate","meetings","setMeetings","votes","setVotes","loading","setLoading","error","setError","isMeetingModalOpen","setIsMeetingModalOpen","isSubmitting","setIsSubmitting","initialMeetingFormState","date","time","type","newMeeting","setNewMeeting","fetchData","meetingsRes","votesRes","Promise","all","fetch","headers","token","ok","Error","meetingsData","json","votesData","err","message","handleVote","voteId","choice","alert","response","method","body","JSON","stringify","vote","errData","handleOpenMeetingModal","handleSaveMeeting","style","styles","page","children","errorContainer","role","visibleRules","filter","canOrganizeMeetings","canParticipateInVotes","textAlign","padding","onClick","button","header","headerTitle","backgroundColor","sectionTitle","rulesGrid","map","card","cardTitle","marginRight","color","rulesList","rule","v","status","length","votesContainer","voteCard","voteHeader","voteTitle","TypeChip","voteDescription","description","voteStats","votes_for","votes_against","required_majority","voteActions","fontSize","Date","end_date","toLocaleDateString","has_voted","voteButtons","id","fontWeight","marginTop","marginBottom","meetingsList","meeting","meetingCard","meetingInfo","meetingHeader","meetingTitle","meetingBadges","MeetingTypeChip","StatusChip","meetingDate","weekday","year","month","day","modalOverlay","modalContent","modalTitle","display","flexDirection","gap","placeholder","value","onChange","e","target","modalInput","modalActions","disabled","_ref","sC","chip","_ref2","tC","_ref3","fontFamily","minHeight","justifyContent","alignItems","flexWrap","margin","borderBottom","paddingBottom","borderRadius","boxShadow","border","cursor","gridTemplateColumns","paddingLeft","lineHeight","borderLeft","borderTop","paddingTop","flex","flexShrink","position","top","left","right","bottom","zIndex","width","maxWidth","boxSizing"],"sources":["D:/Projects/FriendlyBanks/frontend/src/components/Governance.tsx"],"sourcesContent":["import React, { useState, useEffect, ChangeEvent } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faCalendarAlt, faBook, faLandmark, faGavel, faHandshake, faUsers, faVoteYea } from '@fortawesome/free-solid-svg-icons';\r\n\r\n// --- CONSTANTES & HOOKS ---\r\nconst API_BASE_URL = 'http://172.30.240.1:8000/api';\r\n\r\n// --- INTERFACES API ---\r\ninterface ApiMeeting {\r\n  id: number;\r\n  title: string;\r\n  date: string;\r\n  time: string;\r\n  status: 'À venir' | 'Passée' | 'En cours';\r\n  type: 'Ouverture' | 'Clôture' | 'Extraordinaire' | 'Comité';\r\n  attendees?: number;\r\n  decisions?: string[];\r\n}\r\n\r\ninterface ApiVote {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  type: 'Modification Charte' | 'Sanction' | 'Prêt Important' | 'Règle';\r\n  status: 'En cours' | 'Approuvé' | 'Rejeté';\r\n  votes_for: number;\r\n  votes_against: number;\r\n  total_voters: number;\r\n  required_majority: 'Simple' | 'Qualifiée' | 'Unanimité';\r\n  end_date: string;\r\n  has_voted: boolean;\r\n}\r\n\r\ninterface MeetingFormData {\r\n    title: string;\r\n    date: string;\r\n    time: string;\r\n    type: 'Ouverture' | 'Clôture' | 'Extraordinaire' | 'Comité';\r\n}\r\n\r\n// --- RÈGLES DE LA CHARTE (DONNÉES STATIQUES ACCEPTABLES) ---\r\ninterface Rule { title: string; content: string; }\r\ninterface RuleCategory { category: string; icon: any; rules: Rule[]; requiredPermission: string; }\r\n\r\nconst governanceRules: RuleCategory[] = [\r\n  {\r\n    category: \"Cotisations & Fonds\", icon: faLandmark, requiredPermission: \"view_governance\",\r\n    rules: [\r\n      { title: \"Montant Minimal (Article 3.1)\", content: \"La contribution mensuelle minimale est de 4 000 XAF, à déposer entre le 24 et le 25 du mois.\" },\r\n      { title: \"Gestion du Fonds (Article 3.2-3.3)\", content: \"Les cotisations sont versées sur un compte commun géré par le Trésorier et supervisé par le Comité de Gestion (3-6 membres).\" },\r\n      { title: \"Rapports Mensuels (Article 3.4)\", content: \"Un rapport financier détaillé est présenté mensuellement à l'ensemble des membres.\" },\r\n    ]\r\n  },\r\n  {\r\n    category: \"Système de Points Berry\", icon: faBook, requiredPermission: \"view_berry_calculations\",\r\n    rules: [\r\n      { title: \"Attribution de base\", content: \"Chaque contribution assidue ajoute 5 points. Un retard entraîne une pénalité de 15 points.\" },\r\n      { title: \"Bonus Contributions\", content: \"Des bonus sont accordés : >6800 XAF (+5pts), >20% du fonds (+10pts), >50000 XAF (+20pts).\" },\r\n      { title: \"Pénalités (Article 6.5)\", content: \"Une absence de contribution pendant un mois entraîne une perte de 50% des points Berry acquis.\" },\r\n      { title: \"Échelle de Prêt\", content: \"10-100pts = 60k XAF, 100-199pts = 120k XAF, 200-499pts = 300k XAF, 500+pts = selon fonds disponibles.\" },\r\n    ]\r\n  },\r\n  {\r\n    category: \"Prêts aux Membres\", icon: faHandshake, requiredPermission: \"view_loans\",\r\n    rules: [\r\n      { title: \"Conditions d'Accès (Article 4.1)\", content: \"L'accès au fonds est réservé aux urgences avérées (maladie, accident, etc.).\" },\r\n      { title: \"Procédure (Article 4.2-4.3)\", content: \"Toute demande doit être formulée par écrit et examinée par le Comité de Gestion.\" },\r\n      { title: \"Garanties (Article 4.7)\", content: \"Chaque prêt individuel doit être soutenu par au moins deux avaliseurs membres du groupe.\" },\r\n      { title: \"Gros Prêts (Article 4.5)\", content: \"L'approbation d'un retrait de plus de 35% du fonds doit être validée par l'ensemble des membres.\" },\r\n    ]\r\n  },\r\n  {\r\n    category: \"Sanctions & Exclusions\", icon: faGavel, requiredPermission: \"view_sanctions\",\r\n    rules: [\r\n      { title: \"Retard de Cotisation (Article 6.3)\", content: \"Sanctionné par une amende de 200 XAF par jour de retard.\" },\r\n      { title: \"Processus Décisionnel (Article 6.2)\", content: \"Toutes les décisions disciplinaires sont prises par un vote majoritaire des membres.\" },\r\n      { title: \"Non-Remboursement (Article 6.4)\", content: \"En cas de défaut, saisie des fonds du membre puis de ses avaliseurs.\" },\r\n    ]\r\n  },\r\n];\r\n\r\n// --- COMPOSANT PRINCIPAL ---\r\nconst Governance: React.FC = () => {\r\n  const { user, hasPermission, getRoleDisplayName } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [meetings, setMeetings] = useState<ApiMeeting[]>([]);\r\n  const [votes, setVotes] = useState<ApiVote[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  const [isMeetingModalOpen, setIsMeetingModalOpen] = useState(false);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  \r\n  const initialMeetingFormState: MeetingFormData = {\r\n    title: '',\r\n    date: '',\r\n    time: '',\r\n    type: 'Comité'\r\n  };\r\n  const [newMeeting, setNewMeeting] = useState<MeetingFormData>(initialMeetingFormState);\r\n  \r\n  const fetchData = async () => {\r\n    try {\r\n        setLoading(true);\r\n        setError(null);\r\n        const [meetingsRes, votesRes] = await Promise.all([\r\n            fetch(`${API_BASE_URL}/meetings/`, { headers: { 'Authorization': `Bearer ${user?.token}` } }),\r\n            fetch(`${API_BASE_URL}/votes/`, { headers: { 'Authorization': `Bearer ${user?.token}` } })\r\n        ]);\r\n\r\n        if (!meetingsRes.ok) throw new Error('Erreur de chargement des réunions');\r\n        if (!votesRes.ok) throw new Error('Erreur de chargement des votes');\r\n\r\n        const meetingsData = await meetingsRes.json();\r\n        const votesData = await votesRes.json();\r\n\r\n        setMeetings(meetingsData);\r\n        setVotes(votesData);\r\n    } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Une erreur est survenue');\r\n    } finally {\r\n        setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if(user?.token && hasPermission('view_governance')){\r\n        fetchData();\r\n    }\r\n  }, [user?.token, hasPermission]);\r\n\r\n\r\n  // --- GESTIONNAIRES D'ÉVÉNEMENTS ---\r\n  const handleVote = async (voteId: number, choice: 'for' | 'against') => {\r\n    if (!hasPermission('participate_in_votes')) {\r\n      return alert(\"Vous n'avez pas la permission de voter.\");\r\n    }\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/votes/${voteId}/vote/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${user?.token}`\r\n            },\r\n            body: JSON.stringify({ vote: choice })\r\n        });\r\n        if (!response.ok) {\r\n            const errData = await response.json();\r\n            throw new Error(errData.error || 'Erreur lors du vote');\r\n        }\r\n        await fetchData(); // Recharger les données pour refléter le vote\r\n        alert('Votre vote a été enregistré.');\r\n    } catch (err) {\r\n        alert(err instanceof Error ? err.message : 'Une erreur est survenue');\r\n    }\r\n  };\r\n\r\n  const handleOpenMeetingModal = () => {\r\n    if (!hasPermission('organize_sessions') && !hasPermission('manage_governance')) {\r\n      return alert(\"Vous n'avez pas la permission d'organiser des réunions.\");\r\n    }\r\n    setNewMeeting(initialMeetingFormState);\r\n    setIsMeetingModalOpen(true);\r\n  };\r\n  \r\n  const handleSaveMeeting = async () => {\r\n    if (!newMeeting.title || !newMeeting.date || !newMeeting.time) {\r\n        return alert(\"Veuillez remplir tous les champs pour la réunion.\");\r\n    }\r\n    setIsSubmitting(true);\r\n    try {\r\n        const response = await fetch(`${API_BASE_URL}/meetings/`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${user?.token}`\r\n            },\r\n            body: JSON.stringify(newMeeting)\r\n        });\r\n        if (!response.ok) {\r\n            throw new Error('Erreur lors de la planification de la réunion');\r\n        }\r\n        await fetchData(); // Recharger les données\r\n        setIsMeetingModalOpen(false);\r\n    } catch (err) {\r\n        alert(err instanceof Error ? err.message : 'Une erreur est survenue');\r\n    } finally {\r\n        setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // --- VÉRIFICATION DES PERMISSIONS ---\r\n  if (!hasPermission('view_governance')) {\r\n    return (\r\n      <div style={styles.page}>\r\n        <div style={styles.errorContainer}>\r\n          <h3>Accès refusé</h3>\r\n          <p>Vous n'avez pas la permission de consulter la gouvernance.</p>\r\n          <p>Votre rôle actuel : <strong>{user?.role ? getRoleDisplayName(user.role as any) : 'Non défini'}</strong></p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // --- AFFICHAGE ---\r\n  const visibleRules = governanceRules.filter(category => hasPermission(category.requiredPermission));\r\n  const canOrganizeMeetings = hasPermission('organize_sessions') || hasPermission('manage_governance');\r\n  const canParticipateInVotes = hasPermission('participate_in_votes') || hasPermission('manage_governance');\r\n\r\n  if (loading) return <div style={styles.page}><p style={{textAlign: 'center', padding: '40px'}}>Chargement de la gouvernance...</p></div>;\r\n  if (error) return <div style={styles.page}><div style={styles.errorContainer}><h3>Erreur</h3><p>{error}</p><button onClick={fetchData} style={styles.button}>Réessayer</button></div></div>;\r\n  \r\n  return (\r\n    <div style={styles.page}>\r\n      <header style={styles.header}>\r\n        <h2 style={styles.headerTitle}>Gouvernance & Réunions</h2>\r\n        <button onClick={() => navigate('/')} style={{...styles.button, backgroundColor: '#6b7280'}}>\r\n          ← Retour\r\n        </button>\r\n      </header>\r\n\r\n      {/* Section des règles */}\r\n      <section>\r\n          <h3 style={styles.sectionTitle}>Règles de la Charte (Version 5)</h3>\r\n          <div style={styles.rulesGrid}>\r\n            {visibleRules.map(category => (\r\n              <div key={category.category} style={styles.card}>\r\n                <h4 style={styles.cardTitle}>\r\n                  <FontAwesomeIcon icon={category.icon} style={{marginRight: '10px', color: '#3b82f6'}}/>\r\n                  {category.category}\r\n                </h4>\r\n                <ul style={styles.rulesList}>\r\n                  {category.rules.map(rule => ( <li key={rule.title}><strong>{rule.title}:</strong> {rule.content}</li> ))}\r\n                </ul>\r\n              </div>\r\n            ))}\r\n          </div>\r\n      </section>\r\n\r\n      {/* Section des votes */}\r\n      {canParticipateInVotes && votes.filter(v => v.status === 'En cours').length > 0 && (\r\n        <section>\r\n          <h3 style={styles.sectionTitle}>Votes en Cours</h3>\r\n          <div style={styles.votesContainer}>\r\n            {votes.filter(v => v.status === 'En cours').map(vote => (\r\n              <div key={vote.id} style={styles.voteCard}>\r\n                <div style={styles.voteHeader}>\r\n                  <h4 style={styles.voteTitle}>{vote.title}</h4>\r\n                  <TypeChip type={vote.type} />\r\n                </div>\r\n                <p style={styles.voteDescription}>{vote.description}</p>\r\n                <div style={styles.voteStats}>\r\n                  <span>Pour: <strong style={{color: '#22c55e'}}>{vote.votes_for}</strong></span>\r\n                  <span>Contre: <strong style={{color: '#ef4444'}}>{vote.votes_against}</strong></span>\r\n                  <span>Requis: {vote.required_majority}</span>\r\n                </div>\r\n                <div style={styles.voteActions}>\r\n                  <span style={{fontSize: '12px', color: '#6b7280'}}>Fin: {new Date(vote.end_date).toLocaleDateString('fr-FR')}</span>\r\n                  {!vote.has_voted ? (\r\n                    <div style={styles.voteButtons}>\r\n                      <button onClick={() => handleVote(vote.id, 'for')} style={{...styles.button, backgroundColor: '#22c55e', fontSize: '12px'}}><FontAwesomeIcon icon={faVoteYea} style={{marginRight: '4px'}} />Pour</button>\r\n                      <button onClick={() => handleVote(vote.id, 'against')} style={{...styles.button, backgroundColor: '#ef4444', fontSize: '12px'}}>Contre</button>\r\n                    </div>\r\n                  ) : (<span style={{color: '#22c55e', fontSize: '12px', fontWeight: 'bold'}}>✓ Voté</span>)}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* Section des réunions */}\r\n      <section>\r\n          <div style={{...styles.header, marginTop: '40px', marginBottom: '24px'}}>\r\n            <h3 style={styles.sectionTitle}>Calendrier des Réunions</h3>\r\n            {canOrganizeMeetings && ( <button onClick={handleOpenMeetingModal} style={styles.button}><FontAwesomeIcon icon={faPlus} style={{marginRight: '8px'}} />Planifier</button> )}\r\n          </div>\r\n          {meetings.length > 0 ? (\r\n            <div style={styles.meetingsList}>\r\n                {meetings.map(meeting => (\r\n                <div key={meeting.id} style={{...styles.card, ...styles.meetingCard}}>\r\n                    <div style={styles.meetingInfo}>\r\n                    <div style={styles.meetingHeader}>\r\n                        <p style={styles.meetingTitle}>{meeting.title}</p>\r\n                        <div style={styles.meetingBadges}><MeetingTypeChip type={meeting.type} /><StatusChip status={meeting.status} /></div>\r\n                    </div>\r\n                    <p style={styles.meetingDate}><FontAwesomeIcon icon={faCalendarAlt} style={{marginRight: '8px'}}/>{new Date(meeting.date).toLocaleDateString('fr-FR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })} à {meeting.time}</p>\r\n                    </div>\r\n                </div>\r\n                ))}\r\n            </div>\r\n          ) : (<p style={{textAlign: 'center', color: '#6b7280'}}>Aucune réunion planifiée pour le moment.</p>)}\r\n      </section>\r\n\r\n      {/* Modal pour planifier une réunion */}\r\n      {isMeetingModalOpen && (\r\n        <div style={styles.modalOverlay}>\r\n            <div style={styles.modalContent}>\r\n                <h3 style={styles.modalTitle}>Planifier une nouvelle réunion</h3>\r\n                <div style={{display: 'flex', flexDirection: 'column', gap: '16px'}}>\r\n                    <input type=\"text\" placeholder=\"Titre de la réunion\" value={newMeeting.title} onChange={e => setNewMeeting({...newMeeting, title: e.target.value})} style={styles.modalInput} />\r\n                    <input type=\"date\" value={newMeeting.date} onChange={e => setNewMeeting({...newMeeting, date: e.target.value})} style={styles.modalInput} />\r\n                    <input type=\"time\" value={newMeeting.time} onChange={e => setNewMeeting({...newMeeting, time: e.target.value})} style={styles.modalInput} />\r\n                    <select value={newMeeting.type} onChange={e => setNewMeeting({...newMeeting, type: e.target.value as MeetingFormData['type']})} style={styles.modalInput}>\r\n                        <option value=\"Comité\">Comité de Gestion</option>\r\n                        <option value=\"Ouverture\">Ouverture du mois</option>\r\n                        <option value=\"Clôture\">Clôture du mois</option>\r\n                        <option value=\"Extraordinaire\">Extraordinaire</option>\r\n                    </select>\r\n                </div>\r\n                <div style={styles.modalActions}>\r\n                    <button onClick={() => setIsMeetingModalOpen(false)} style={{...styles.button, backgroundColor: '#6b7280'}} disabled={isSubmitting}>Annuler</button>\r\n                    <button onClick={handleSaveMeeting} style={styles.button} disabled={isSubmitting}>{isSubmitting ? 'Planification...' : 'Planifier'}</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- SOUS-COMPOSANTS & STYLES ---\r\nconst StatusChip: React.FC<{ status: ApiMeeting['status'] }> = ({ status }) => { \r\n  const sC = { 'À venir': { backgroundColor: '#dcfce7', color: '#166534' }, 'En cours': { backgroundColor: '#fef3c7', color: '#92400e' }, 'Passée': { backgroundColor: '#e5e7eb', color: '#4b5563' } }; \r\n  return <span style={{ ...styles.chip, ...sC[status] }}>{status}</span>; \r\n};\r\nconst MeetingTypeChip: React.FC<{ type: ApiMeeting['type'] }> = ({ type }) => { \r\n  const tC = { 'Ouverture': { backgroundColor: '#dbeafe', color: '#1e40af' }, 'Clôture': { backgroundColor: '#fecaca', color: '#991b1b' }, 'Extraordinaire': { backgroundColor: '#f3e8ff', color: '#7c2d12' }, 'Comité': { backgroundColor: '#d1fae5', color: '#065f46' } }; \r\n  return <span style={{ ...styles.chip, ...tC[type] }}>{type}</span>; \r\n};\r\nconst TypeChip: React.FC<{ type: ApiVote['type'] }> = ({ type }) => { \r\n  const tC = { 'Modification Charte': { backgroundColor: '#fef3c7', color: '#92400e' }, 'Sanction': { backgroundColor: '#fee2e2', color: '#991b1b' }, 'Prêt Important': { backgroundColor: '#dbeafe', color: '#1e40af' }, 'Règle': { backgroundColor: '#e0e7ff', color: '#3730a3' } }; \r\n  return <span style={{ ...styles.chip, ...tC[type] }}>{type}</span>; \r\n};\r\n\r\nconst styles: { [key: string]: React.CSSProperties } = {\r\n  page: { fontFamily: 'Arial, sans-serif', padding: '16px', backgroundColor: '#f3f4f6', minHeight: '100vh' },\r\n  header: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px', flexWrap: 'wrap', gap: '16px' },\r\n  headerTitle: { fontSize: '24px', fontWeight: 'bold', color: '#1f2937', margin: 0 },\r\n  sectionTitle: { fontSize: '22px', fontWeight: 'bold', color: '#1f2937', margin: 0, borderBottom: '2px solid #3b82f6', paddingBottom: '8px' },\r\n  errorContainer: { textAlign: 'center', padding: '40px', backgroundColor: 'white', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  button: { padding: '10px 16px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '14px' },\r\n  rulesGrid: { display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(350px, 1fr))', gap: '24px', marginTop: '24px', marginBottom: '40px' },\r\n  card: { backgroundColor: 'white', padding: '24px', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)' },\r\n  cardTitle: { fontSize: '18px', fontWeight: 'bold', margin: '0 0 16px 0', color: '#1f2937', borderBottom: '1px solid #e5e7eb', paddingBottom: '12px', display: 'flex', alignItems: 'center' },\r\n  rulesList: { margin: 0, paddingLeft: '20px', display: 'flex', flexDirection: 'column', gap: '12px', fontSize: '14px', color: '#374151', lineHeight: 1.6 },\r\n  votesContainer: { display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(320px, 1fr))', gap: '16px', marginTop: '24px', marginBottom: '40px' },\r\n  voteCard: { backgroundColor: 'white', padding: '20px', borderRadius: '12px', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.08)', borderLeft: '4px solid #3b82f6' },\r\n  voteHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px', gap: '8px' },\r\n  voteTitle: { fontSize: '16px', fontWeight: 'bold', margin: 0, color: '#1f2937' },\r\n  voteDescription: { fontSize: '14px', color: '#4b5563', marginBottom: '16px', lineHeight: 1.5 },\r\n  voteStats: { display: 'flex', gap: '16px', fontSize: '12px', marginBottom: '16px', flexWrap: 'wrap', color: '#374151' },\r\n  voteActions: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', borderTop: '1px solid #f3f4f6', paddingTop: '12px' },\r\n  voteButtons: { display: 'flex', gap: '8px' },\r\n  meetingsList: { display: 'flex', flexDirection: 'column', gap: '16px', marginBottom: '40px' },\r\n  meetingCard: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', flexWrap: 'wrap', gap: '16px' },\r\n  meetingInfo: { flex: 1 },\r\n  meetingHeader: { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '8px', gap: '8px' },\r\n  meetingBadges: { display: 'flex', gap: '8px', flexWrap: 'wrap', justifyContent: 'flex-end' },\r\n  meetingTitle: { fontWeight: 'bold', margin: 0, color: '#1f2937', fontSize: '16px' },\r\n  meetingDate: { fontSize: '14px', margin: '4px 0', color: '#4b5563' },\r\n  chip: { padding: '4px 12px', borderRadius: '9999px', fontWeight: '600', fontSize: '12px', flexShrink: 0 },\r\n  modalOverlay: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0,0,0,0.6)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000, padding: '16px' },\r\n  modalContent: { backgroundColor: 'white', padding: '24px', borderRadius: '12px', width: '100%', maxWidth: '500px' },\r\n  modalTitle: { fontSize: '20px', fontWeight: 'bold', marginBottom: '24px', textAlign: 'center' },\r\n  modalInput: { width: '100%', padding: '10px', border: '1px solid #d1d5db', borderRadius: '8px', boxSizing: 'border-box' },\r\n  modalActions: { display: 'flex', justifyContent: 'flex-end', gap: '12px', marginTop: '24px' },\r\n};\r\n\r\nexport default Governance;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}