{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\FriendlyBanks\\\\frontend\\\\src\\\\components\\\\Contributions.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useNavigate } from 'react-router-dom';\n\n// --- INTERFACES & CONSTANTES ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MINIMUM_CONTRIBUTION = 4000;\nconst CONTRIBUTION_DUE_DAY = 25;\nconst LATE_FEE_PER_DAY = 200;\nconst MOCK_TOTAL_FUND = 150000; // Simulation du total du fonds pour les calculs de bonus\n\n// --- DONNÉES DE SIMULATION ---\n\n// Les membres sont maintenant dans un état pour pouvoir mettre à jour leurs points\nconst initialMembers = [{\n  id: 'M001',\n  name: 'Alice Dupont',\n  berryPoints: 120\n}, {\n  id: 'M002',\n  name: 'Bob Martin',\n  berryPoints: 85\n}, {\n  id: 'M003',\n  name: 'Charlie Brown',\n  berryPoints: 200\n}, {\n  id: 'M004',\n  name: 'Diana Prince',\n  berryPoints: 45\n}];\nconst mockContributions = [{\n  id: 'C001',\n  memberId: 'M001',\n  memberName: 'Alice Dupont',\n  amount: 5000,\n  date: '2025-06-25',\n  status: 'Validée',\n  paymentMethod: 'Virement Bancaire',\n  pointsChange: 5\n}, {\n  id: 'C002',\n  memberId: 'M002',\n  memberName: 'Bob Martin',\n  amount: 4000,\n  date: '2025-06-28',\n  status: 'En retard',\n  paymentMethod: 'Mobile Money',\n  pointsChange: -15,\n  fineAmount: 600\n}, {\n  id: 'C003',\n  memberId: 'M003',\n  memberName: 'Charlie Brown',\n  amount: 6800,\n  date: '2025-07-24',\n  status: 'En attente',\n  paymentMethod: 'Espèces'\n}, {\n  id: 'C004',\n  memberId: 'M004',\n  memberName: 'Diana Prince',\n  amount: 10000,\n  date: '2025-07-25',\n  status: 'Validée',\n  paymentMethod: 'Virement Bancaire',\n  pointsChange: 15\n}, {\n  id: 'C005',\n  memberId: 'M001',\n  memberName: 'Alice Dupont',\n  amount: 4500,\n  date: '2025-05-25',\n  status: 'Annulée',\n  paymentMethod: 'Mobile Money'\n}];\n\n// --- SERVICE DE LOGIQUE MÉTIER (Simulation de ce qui serait sur le backend) ---\nconst calculateContributionImpact = (contributionAmount, contributionDateStr, totalFund) => {\n  let pointsChange = 0;\n  let fineAmount = 0;\n  const contributionDate = new Date(contributionDateStr);\n\n  // Règle 1: Pénalité de retard\n  const isLate = contributionDate.getDate() > CONTRIBUTION_DUE_DAY;\n  if (isLate) {\n    pointsChange = -15; // Pénalité fixe pour le retard\n    const daysLate = contributionDate.getDate() - CONTRIBUTION_DUE_DAY;\n    fineAmount = daysLate * LATE_FEE_PER_DAY;\n  } else {\n    pointsChange = 5; // +5 points pour chaque contribution assidue (non en retard)\n  }\n\n  // Règle 2: Bonus pour contribution dépassant de 70% la base (4000 + 2800 = 6800 XAF)\n  if (contributionAmount > MINIMUM_CONTRIBUTION * 1.7) {\n    pointsChange += 5;\n  }\n\n  // Règle 3: Bonus pour contribution > 20% du total du fonds\n  if (contributionAmount > totalFund * 0.2) {\n    pointsChange += 10;\n  }\n\n  // Règle 4: Bonus pour tranches de montant\n  if (contributionAmount > 20000 && contributionAmount <= 50000) {\n    pointsChange += 10;\n  } else if (contributionAmount > 50001) {\n    pointsChange += 20;\n  }\n  return {\n    pointsChange,\n    fineAmount\n  };\n};\n\n// --- COMPOSANT PRINCIPAL ---\n\nconst Contributions = () => {\n  _s();\n  const {\n    user,\n    hasPermission\n  } = useAuth();\n  const navigate = useNavigate();\n\n  // --- ÉTATS ---\n  const [contributions, setContributions] = useState(mockContributions);\n  const [members, setMembers] = useState(initialMembers); // État pour les membres et leurs points\n  const [filteredContributions, setFilteredContributions] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [filterStatus, setFilterStatus] = useState('All');\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const initialFormState = {\n    memberId: '',\n    memberName: '',\n    amount: MINIMUM_CONTRIBUTION,\n    date: new Date().toISOString().split('T')[0],\n    paymentMethod: 'Mobile Money'\n  };\n  const [currentContribution, setCurrentContribution] = useState(initialFormState);\n  const [editingContribution, setEditingContribution] = useState(null);\n  const [formError, setFormError] = useState('');\n\n  // --- EFFETS ---\n  useEffect(() => {\n    let currentData = contributions;\n    if (searchTerm) {\n      currentData = currentData.filter(c => c.memberName.toLowerCase().includes(searchTerm.toLowerCase()) || c.memberId.toLowerCase().includes(searchTerm.toLowerCase()) || c.id.toLowerCase().includes(searchTerm.toLowerCase()));\n    }\n    if (filterStatus !== 'All') {\n      currentData = currentData.filter(c => c.status === filterStatus);\n    }\n    setFilteredContributions(currentData);\n  }, [searchTerm, filterStatus, contributions]);\n\n  // --- CALCULS MEMOIZÉS ---\n  const stats = useMemo(() => ({\n    totalPending: contributions.filter(c => c.status === 'En attente').length,\n    totalLate: contributions.filter(c => c.status === 'En retard').length,\n    currentMonthValidated: contributions.filter(c => {\n      const cDate = new Date(c.date);\n      const today = new Date();\n      return c.status === 'Validée' && cDate.getMonth() === today.getMonth() && cDate.getFullYear() === today.getFullYear();\n    }).reduce((sum, c) => sum + c.amount, 0)\n  }), [contributions]);\n  const selectedMemberInModal = useMemo(() => {\n    return members.find(m => m.id === currentContribution.memberId);\n  }, [currentContribution.memberId, members]);\n\n  // --- GESTIONNAIRES D'ÉVÉNEMENTS ---\n\n  const handleOpenModalForAdd = () => {\n    setEditingContribution(null);\n    setCurrentContribution(initialFormState);\n    setFormError('');\n    setIsModalOpen(true);\n  };\n  const handleOpenModalForEdit = contribution => {\n    setEditingContribution(contribution);\n    setCurrentContribution({\n      memberId: contribution.memberId,\n      memberName: contribution.memberName,\n      amount: contribution.amount,\n      date: contribution.date,\n      paymentMethod: contribution.paymentMethod\n    });\n    setFormError('');\n    setIsModalOpen(true);\n  };\n  const handleDelete = id => {\n    // Note: La logique de restauration des points Berry lors d'une suppression est complexe\n    // et devrait être gérée côté serveur. Ici, nous supprimons simplement la transaction.\n    if (!hasPermission('delete_contribution')) {\n      alert(\"Action non autorisée.\");\n      return;\n    }\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer cette contribution ?')) {\n      setContributions(contributions.filter(c => c.id !== id));\n    }\n  };\n  const handleSave = () => {\n    // Validation\n    const selectedMember = members.find(m => m.id === currentContribution.memberId);\n    if (!selectedMember || !currentContribution.amount) {\n      setFormError('Veuillez sélectionner un membre et saisir un montant valide.');\n      return;\n    }\n    if (currentContribution.amount < MINIMUM_CONTRIBUTION) {\n      setFormError(`Le montant minimal est de ${MINIMUM_CONTRIBUTION} XAF.`);\n      return;\n    }\n\n    // *** LOGIQUE MÉTIER INTÉGRÉE ICI ***\n    const {\n      pointsChange,\n      fineAmount\n    } = calculateContributionImpact(currentContribution.amount, currentContribution.date, MOCK_TOTAL_FUND);\n    let status = fineAmount > 0 ? 'En retard' : 'En attente';\n    if (hasPermission('validate_contribution')) status = 'Validée';\n    if (editingContribution) {\n      // La mise à jour est complexe (faut-il recalculer les points ?), nous modifions juste les données pour la démo\n      setContributions(contributions.map(c => c.id === editingContribution.id ? {\n        ...editingContribution,\n        ...currentContribution,\n        pointsChange,\n        fineAmount\n      } // Ré-évalue l'impact\n      : c));\n    } else {\n      // Ajout d'une nouvelle contribution\n      const newContribution = {\n        id: `C${Date.now()}`,\n        ...currentContribution,\n        memberName: selectedMember.name,\n        // Assurer la cohérence du nom\n        status: status,\n        pointsChange,\n        fineAmount\n      };\n      setContributions([newContribution, ...contributions]);\n\n      // Mettre à jour les points du membre\n      setMembers(members.map(m => m.id === selectedMember.id ? {\n        ...m,\n        berryPoints: m.berryPoints + pointsChange\n      } : m));\n    }\n    setIsModalOpen(false);\n  };\n  const handleStatusChange = (id, newStatus) => {\n    if (!hasPermission('update_contribution_status')) {\n      alert(\"Action non autorisée.\");\n      return;\n    }\n    setContributions(contributions.map(c => c.id === id ? {\n      ...c,\n      status: newStatus\n    } : c));\n  };\n\n  // --- RENDU ---\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.page,\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      style: styles.header,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: styles.headerTitle,\n        children: \"Gestion des Contributions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/'),\n        style: styles.backButton,\n        children: \"\\u2190 Retour au Tableau de bord\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: styles.statSection,\n      children: [/*#__PURE__*/_jsxDEV(StatCard, {\n        title: \"Contributions Valid\\xE9es (ce mois)\",\n        value: `${stats.currentMonthValidated.toLocaleString()} XAF`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        title: \"Contributions en Attente\",\n        value: stats.totalPending.toString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StatCard, {\n        title: \"Contributions en Retard\",\n        value: stats.totalLate.toString()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      style: styles.controlsSection,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Rechercher par nom, ID...\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value),\n        style: styles.searchInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: filterStatus,\n        onChange: e => setFilterStatus(e.target.value),\n        style: styles.filterSelect,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"All\",\n          children: \"Tous les statuts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Valid\\xE9e\",\n          children: \"Valid\\xE9e\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"En attente\",\n          children: \"En attente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"En retard\",\n          children: \"En retard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"Annul\\xE9e\",\n          children: \"Annul\\xE9e\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), hasPermission('add_contribution') && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleOpenModalForAdd,\n        style: styles.addButton,\n        children: \"+ Ajouter une Cotisation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.tableContainer,\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        style: styles.table,\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              style: styles.th,\n              children: \"ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: styles.th,\n              children: \"Membre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: styles.th,\n              children: \"Montant\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: styles.th,\n              children: \"Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: styles.th,\n              children: \"Statut\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              style: styles.th,\n              children: \"Impact (Points/Amendes)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 15\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n              style: styles.th,\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filteredContributions.map(c => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              style: styles.td,\n              children: c.id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: styles.td,\n              children: c.memberName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: styles.td,\n              children: [c.amount.toLocaleString(), \" XAF\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: styles.td,\n              children: new Date(c.date).toLocaleDateString('fr-FR')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: styles.td,\n              children: /*#__PURE__*/_jsxDEV(StatusChip, {\n                status: c.status\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 286,\n                columnNumber: 41\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: styles.td,\n              children: [\" \", c.pointsChange !== undefined && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: c.pointsChange > 0 ? '#22c55e' : '#ef4444',\n                  fontWeight: 'bold'\n                },\n                children: [c.pointsChange > 0 ? `+${c.pointsChange}` : c.pointsChange, \" pts\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 23\n              }, this), c.fineAmount ? /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: '#ef4444',\n                  marginLeft: '8px'\n                },\n                children: [\"(\", c.fineAmount, \" XAF)\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 37\n              }, this) : '']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              style: {\n                ...styles.td,\n                display: 'flex',\n                gap: '8px'\n              },\n              children: [hasPermission('edit_contribution') && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleOpenModalForEdit(c),\n                style: styles.actionButtonEdit,\n                children: \"Modifier\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 61\n              }, this), hasPermission('delete_contribution') && /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDelete(c.id),\n                style: styles.actionButtonDelete,\n                children: \"Supprimer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 63\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 19\n            }, this)]\n          }, c.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 7\n    }, this), isModalOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.modalOverlay,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: styles.modalContent,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: styles.modalTitle,\n          children: editingContribution ? 'Modifier la Contribution' : 'Ajouter une Contribution'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this), formError && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: '#ef4444',\n            textAlign: 'center'\n          },\n          children: formError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.modalForm,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              style: styles.modalLabel,\n              children: \"Membre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              style: styles.modalInput,\n              value: currentContribution.memberId,\n              onChange: e => setCurrentContribution({\n                ...currentContribution,\n                memberId: e.target.value\n              }),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                disabled: true,\n                children: \"S\\xE9lectionner un membre...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 25\n              }, this), members.map(m => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: m.id,\n                children: m.name\n              }, m.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 43\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 21\n            }, this), selectedMemberInModal && /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                fontSize: '12px',\n                color: '#1e3a8a',\n                marginTop: '4px'\n              },\n              children: [\"Solde actuel: \", selectedMemberInModal.berryPoints, \" points\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 47\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ModalInput, {\n            label: \"Montant (XAF)\",\n            type: \"number\",\n            value: currentContribution.amount,\n            onChange: e => setCurrentContribution({\n              ...currentContribution,\n              amount: parseFloat(e.target.value) || 0\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ModalInput, {\n            label: \"Date\",\n            type: \"date\",\n            value: currentContribution.date,\n            onChange: e => setCurrentContribution({\n              ...currentContribution,\n              date: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ModalSelect, {\n            label: \"M\\xE9thode de Paiement\",\n            value: currentContribution.paymentMethod,\n            onChange: e => setCurrentContribution({\n              ...currentContribution,\n              paymentMethod: e.target.value\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Mobile Money\",\n              children: \"Mobile Money\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Virement Bancaire\",\n              children: \"Virement Bancaire\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Esp\\xE8ces\",\n              children: \"Esp\\xE8ces\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Ch\\xE8que\",\n              children: \"Ch\\xE8que\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: styles.modalActions,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setIsModalOpen(false),\n            style: styles.modalButtonCancel,\n            children: \"Annuler\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleSave,\n            style: styles.modalButtonSave,\n            children: editingContribution ? 'Enregistrer' : 'Ajouter'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 240,\n    columnNumber: 5\n  }, this);\n};\n\n// --- COMPOSANTS D'ASSISTANCE ---\n_s(Contributions, \"Y0Xe4vgaDl66ChE0VQ4YgvolvQw=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Contributions;\nconst ModalInput = ({\n  label,\n  ...props\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n    style: styles.modalLabel,\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 351,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n    style: styles.modalInput,\n    ...props\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 352,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 350,\n  columnNumber: 5\n}, this);\n_c2 = ModalInput;\nconst ModalSelect = ({\n  label,\n  children,\n  ...props\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n    style: styles.modalLabel,\n    children: label\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 358,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n    style: styles.modalInput,\n    ...props,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 359,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 357,\n  columnNumber: 5\n}, this);\n_c3 = ModalSelect;\nconst StatCard = ({\n  title,\n  value\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  style: {\n    backgroundColor: 'white',\n    padding: '20px',\n    borderRadius: '8px',\n    boxShadow: '0 4px 6px rgba(0,0,0,0.1)',\n    flex: '1 1 250px',\n    textAlign: 'center'\n  },\n  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n    style: {\n      margin: 0,\n      color: '#4b5563',\n      fontSize: '16px',\n      fontWeight: '600'\n    },\n    children: title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 364,\n    columnNumber: 7\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      margin: '8px 0 0 0',\n      color: '#1e3a8a',\n      fontSize: '28px',\n      fontWeight: 'bold'\n    },\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 365,\n    columnNumber: 7\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 363,\n  columnNumber: 5\n}, this);\n_c4 = StatCard;\nconst StatusChip = ({\n  status\n}) => {\n  const chipStyle = {\n    padding: '4px 12px',\n    borderRadius: '9999px',\n    fontWeight: '600',\n    fontSize: '12px',\n    color: 'white',\n    backgroundColor: {\n      'Validée': '#22c55e',\n      'En attente': '#f59e0b',\n      'En retard': '#ef4444',\n      'Annulée': '#6b7280'\n    }[status]\n  };\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    style: chipStyle,\n    children: status\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 373,\n    columnNumber: 12\n  }, this);\n};\n\n// --- STYLES EN LIGNE --- (inchangé)\n_c5 = StatusChip;\nconst styles = {\n  page: {\n    fontFamily: 'Arial, sans-serif',\n    padding: '24px',\n    backgroundColor: '#f3f4f6',\n    minHeight: '100vh'\n  },\n  header: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: '32px',\n    flexWrap: 'wrap',\n    gap: '16px'\n  },\n  headerTitle: {\n    fontSize: '28px',\n    fontWeight: 'bold',\n    color: '#1f2937',\n    margin: 0\n  },\n  backButton: {\n    padding: '10px 20px',\n    backgroundColor: '#3b82f6',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: '600'\n  },\n  statSection: {\n    display: 'flex',\n    gap: '24px',\n    flexWrap: 'wrap',\n    marginBottom: '32px'\n  },\n  controlsSection: {\n    marginBottom: '24px',\n    display: 'flex',\n    gap: '16px',\n    flexWrap: 'wrap',\n    alignItems: 'center'\n  },\n  searchInput: {\n    padding: '10px 12px',\n    border: '1px solid #d1d5db',\n    borderRadius: '8px',\n    flexGrow: 1,\n    minWidth: '300px'\n  },\n  filterSelect: {\n    padding: '10px 12px',\n    border: '1px solid #d1d5db',\n    borderRadius: '8px',\n    backgroundColor: 'white'\n  },\n  addButton: {\n    padding: '10px 20px',\n    backgroundColor: '#2563eb',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: '600'\n  },\n  tableContainer: {\n    backgroundColor: 'white',\n    borderRadius: '8px',\n    boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n    overflowX: 'auto'\n  },\n  table: {\n    width: '100%',\n    borderCollapse: 'collapse'\n  },\n  th: {\n    padding: '12px 16px',\n    textAlign: 'left',\n    fontSize: '14px',\n    color: '#4b5563',\n    backgroundColor: '#f9fafb',\n    borderBottom: '1px solid #e5e7eb',\n    fontWeight: '600'\n  },\n  td: {\n    padding: '12px 16px',\n    fontSize: '14px',\n    color: '#374151',\n    borderBottom: '1px solid #e5e7eb'\n  },\n  actionButtonEdit: {\n    padding: '4px 8px',\n    fontSize: '12px',\n    fontWeight: '600',\n    color: 'white',\n    backgroundColor: '#f59e0b',\n    border: 'none',\n    borderRadius: '6px',\n    cursor: 'pointer'\n  },\n  actionButtonDelete: {\n    padding: '4px 8px',\n    fontSize: '12px',\n    fontWeight: '600',\n    color: 'white',\n    backgroundColor: '#ef4444',\n    border: 'none',\n    borderRadius: '6px',\n    cursor: 'pointer'\n  },\n  actionSelect: {\n    padding: '4px 8px',\n    fontSize: '12px',\n    border: '1px solid #d1d5db',\n    borderRadius: '6px'\n  },\n  modalOverlay: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1000\n  },\n  modalContent: {\n    backgroundColor: 'white',\n    padding: '32px',\n    borderRadius: '12px',\n    width: '90%',\n    maxWidth: '500px',\n    boxShadow: '0 8px 16px rgba(0, 0, 0, 0.2)'\n  },\n  modalTitle: {\n    fontSize: '24px',\n    fontWeight: 'bold',\n    marginBottom: '24px',\n    color: '#1f2937'\n  },\n  modalForm: {\n    display: 'flex',\n    flexDirection: 'column',\n    gap: '16px'\n  },\n  modalLabel: {\n    display: 'block',\n    marginBottom: '8px',\n    fontWeight: '600',\n    color: '#374151'\n  },\n  modalInput: {\n    width: '100%',\n    padding: '10px',\n    border: '1px solid #d1d5db',\n    borderRadius: '8px',\n    boxSizing: 'border-box'\n  },\n  modalActions: {\n    display: 'flex',\n    justifyContent: 'flex-end',\n    gap: '12px',\n    marginTop: '32px'\n  },\n  modalButtonCancel: {\n    padding: '10px 20px',\n    backgroundColor: '#6b7280',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: '600'\n  },\n  modalButtonSave: {\n    padding: '10px 20px',\n    backgroundColor: '#2563eb',\n    color: 'white',\n    border: 'none',\n    borderRadius: '8px',\n    cursor: 'pointer',\n    fontWeight: '600'\n  }\n};\nexport default Contributions;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Contributions\");\n$RefreshReg$(_c2, \"ModalInput\");\n$RefreshReg$(_c3, \"ModalSelect\");\n$RefreshReg$(_c4, \"StatCard\");\n$RefreshReg$(_c5, \"StatusChip\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useAuth","useNavigate","jsxDEV","_jsxDEV","MINIMUM_CONTRIBUTION","CONTRIBUTION_DUE_DAY","LATE_FEE_PER_DAY","MOCK_TOTAL_FUND","initialMembers","id","name","berryPoints","mockContributions","memberId","memberName","amount","date","status","paymentMethod","pointsChange","fineAmount","calculateContributionImpact","contributionAmount","contributionDateStr","totalFund","contributionDate","Date","isLate","getDate","daysLate","Contributions","_s","user","hasPermission","navigate","contributions","setContributions","members","setMembers","filteredContributions","setFilteredContributions","searchTerm","setSearchTerm","filterStatus","setFilterStatus","isModalOpen","setIsModalOpen","initialFormState","toISOString","split","currentContribution","setCurrentContribution","editingContribution","setEditingContribution","formError","setFormError","currentData","filter","c","toLowerCase","includes","stats","totalPending","length","totalLate","currentMonthValidated","cDate","today","getMonth","getFullYear","reduce","sum","selectedMemberInModal","find","m","handleOpenModalForAdd","handleOpenModalForEdit","contribution","handleDelete","alert","window","confirm","handleSave","selectedMember","map","newContribution","now","handleStatusChange","newStatus","style","styles","page","children","header","headerTitle","fileName","_jsxFileName","lineNumber","columnNumber","onClick","backButton","statSection","StatCard","title","value","toLocaleString","toString","controlsSection","type","placeholder","onChange","e","target","searchInput","filterSelect","addButton","tableContainer","table","th","td","toLocaleDateString","StatusChip","undefined","color","fontWeight","marginLeft","display","gap","actionButtonEdit","actionButtonDelete","modalOverlay","modalContent","modalTitle","textAlign","modalForm","modalLabel","modalInput","disabled","fontSize","marginTop","ModalInput","label","parseFloat","ModalSelect","modalActions","modalButtonCancel","modalButtonSave","_c","props","_c2","_c3","backgroundColor","padding","borderRadius","boxShadow","flex","margin","_c4","chipStyle","_c5","fontFamily","minHeight","justifyContent","alignItems","marginBottom","flexWrap","border","cursor","flexGrow","minWidth","overflowX","width","borderCollapse","borderBottom","actionSelect","position","top","left","right","bottom","zIndex","maxWidth","flexDirection","boxSizing","$RefreshReg$"],"sources":["D:/Projects/FriendlyBanks/frontend/src/components/Contributions.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, ChangeEvent, InputHTMLAttributes, SelectHTMLAttributes, ReactNode } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n// --- INTERFACES & CONSTANTES ---\r\n\r\ninterface Contribution {\r\n  id: string;\r\n  memberId: string;\r\n  memberName: string;\r\n  amount: number;\r\n  date: string; // Format YYYY-MM-DD\r\n  status: 'Validée' | 'En attente' | 'Annulée' | 'En retard';\r\n  paymentMethod: 'Mobile Money' | 'Virement Bancaire' | 'Espèces' | 'Chèque';\r\n  // NOUVEAUX CHAMPS pour suivre l'impact\r\n  pointsChange?: number;\r\n  fineAmount?: number;\r\n}\r\n\r\ninterface Member {\r\n  id: string;\r\n  name: string;\r\n  berryPoints: number; // Propriété essentielle pour suivre les points\r\n}\r\n\r\nconst MINIMUM_CONTRIBUTION = 4000;\r\nconst CONTRIBUTION_DUE_DAY = 25;\r\nconst LATE_FEE_PER_DAY = 200;\r\nconst MOCK_TOTAL_FUND = 150000; // Simulation du total du fonds pour les calculs de bonus\r\n\r\n// --- DONNÉES DE SIMULATION ---\r\n\r\n// Les membres sont maintenant dans un état pour pouvoir mettre à jour leurs points\r\nconst initialMembers: Member[] = [\r\n  { id: 'M001', name: 'Alice Dupont', berryPoints: 120 },\r\n  { id: 'M002', name: 'Bob Martin', berryPoints: 85 },\r\n  { id: 'M003', name: 'Charlie Brown', berryPoints: 200 },\r\n  { id: 'M004', name: 'Diana Prince', berryPoints: 45 },\r\n];\r\n\r\nconst mockContributions: Contribution[] = [\r\n  { id: 'C001', memberId: 'M001', memberName: 'Alice Dupont', amount: 5000, date: '2025-06-25', status: 'Validée', paymentMethod: 'Virement Bancaire', pointsChange: 5 },\r\n  { id: 'C002', memberId: 'M002', memberName: 'Bob Martin', amount: 4000, date: '2025-06-28', status: 'En retard', paymentMethod: 'Mobile Money', pointsChange: -15, fineAmount: 600 },\r\n  { id: 'C003', memberId: 'M003', memberName: 'Charlie Brown', amount: 6800, date: '2025-07-24', status: 'En attente', paymentMethod: 'Espèces' },\r\n  { id: 'C004', memberId: 'M004', memberName: 'Diana Prince', amount: 10000, date: '2025-07-25', status: 'Validée', paymentMethod: 'Virement Bancaire', pointsChange: 15 },\r\n  { id: 'C005', memberId: 'M001', memberName: 'Alice Dupont', amount: 4500, date: '2025-05-25', status: 'Annulée', paymentMethod: 'Mobile Money' },\r\n];\r\n\r\n// --- SERVICE DE LOGIQUE MÉTIER (Simulation de ce qui serait sur le backend) ---\r\nconst calculateContributionImpact = (contributionAmount: number, contributionDateStr: string, totalFund: number) => {\r\n  let pointsChange = 0;\r\n  let fineAmount = 0;\r\n  const contributionDate = new Date(contributionDateStr);\r\n  \r\n  // Règle 1: Pénalité de retard\r\n  const isLate = contributionDate.getDate() > CONTRIBUTION_DUE_DAY;\r\n  if (isLate) {\r\n    pointsChange = -15; // Pénalité fixe pour le retard\r\n    const daysLate = contributionDate.getDate() - CONTRIBUTION_DUE_DAY;\r\n    fineAmount = daysLate * LATE_FEE_PER_DAY;\r\n  } else {\r\n    pointsChange = 5; // +5 points pour chaque contribution assidue (non en retard)\r\n  }\r\n\r\n  // Règle 2: Bonus pour contribution dépassant de 70% la base (4000 + 2800 = 6800 XAF)\r\n  if (contributionAmount > (MINIMUM_CONTRIBUTION * 1.7)) {\r\n    pointsChange += 5;\r\n  }\r\n  \r\n  // Règle 3: Bonus pour contribution > 20% du total du fonds\r\n  if (contributionAmount > (totalFund * 0.2)) {\r\n    pointsChange += 10;\r\n  }\r\n  \r\n  // Règle 4: Bonus pour tranches de montant\r\n  if (contributionAmount > 20000 && contributionAmount <= 50000) {\r\n    pointsChange += 10;\r\n  } else if (contributionAmount > 50001) {\r\n    pointsChange += 20;\r\n  }\r\n\r\n  return { pointsChange, fineAmount };\r\n};\r\n\r\n\r\n// --- COMPOSANT PRINCIPAL ---\r\n\r\nconst Contributions: React.FC = () => {\r\n  const { user, hasPermission } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  // --- ÉTATS ---\r\n  const [contributions, setContributions] = useState<Contribution[]>(mockContributions);\r\n  const [members, setMembers] = useState<Member[]>(initialMembers); // État pour les membres et leurs points\r\n  const [filteredContributions, setFilteredContributions] = useState<Contribution[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('All');\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  \r\n  const initialFormState: Omit<Contribution, 'id' | 'status'> = {\r\n    memberId: '',\r\n    memberName: '',\r\n    amount: MINIMUM_CONTRIBUTION,\r\n    date: new Date().toISOString().split('T')[0],\r\n    paymentMethod: 'Mobile Money',\r\n  };\r\n  \r\n  const [currentContribution, setCurrentContribution] = useState(initialFormState);\r\n  const [editingContribution, setEditingContribution] = useState<Contribution | null>(null);\r\n  const [formError, setFormError] = useState<string>('');\r\n\r\n  // --- EFFETS ---\r\n  useEffect(() => {\r\n    let currentData = contributions;\r\n    if (searchTerm) {\r\n      currentData = currentData.filter(c =>\r\n        c.memberName.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.memberId.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        c.id.toLowerCase().includes(searchTerm.toLowerCase())\r\n      );\r\n    }\r\n    if (filterStatus !== 'All') {\r\n      currentData = currentData.filter(c => c.status === filterStatus);\r\n    }\r\n    setFilteredContributions(currentData);\r\n  }, [searchTerm, filterStatus, contributions]);\r\n\r\n  // --- CALCULS MEMOIZÉS ---\r\n  const stats = useMemo(() => ({\r\n    totalPending: contributions.filter(c => c.status === 'En attente').length,\r\n    totalLate: contributions.filter(c => c.status === 'En retard').length,\r\n    currentMonthValidated: contributions.filter(c => {\r\n      const cDate = new Date(c.date);\r\n      const today = new Date();\r\n      return c.status === 'Validée' && cDate.getMonth() === today.getMonth() && cDate.getFullYear() === today.getFullYear();\r\n    }).reduce((sum, c) => sum + c.amount, 0),\r\n  }), [contributions]);\r\n\r\n  const selectedMemberInModal = useMemo(() => {\r\n    return members.find(m => m.id === currentContribution.memberId);\r\n  }, [currentContribution.memberId, members]);\r\n\r\n  // --- GESTIONNAIRES D'ÉVÉNEMENTS ---\r\n\r\n  const handleOpenModalForAdd = () => {\r\n    setEditingContribution(null);\r\n    setCurrentContribution(initialFormState);\r\n    setFormError('');\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleOpenModalForEdit = (contribution: Contribution) => {\r\n    setEditingContribution(contribution);\r\n    setCurrentContribution({\r\n      memberId: contribution.memberId,\r\n      memberName: contribution.memberName,\r\n      amount: contribution.amount,\r\n      date: contribution.date,\r\n      paymentMethod: contribution.paymentMethod,\r\n    });\r\n    setFormError('');\r\n    setIsModalOpen(true);\r\n  };\r\n  \r\n  const handleDelete = (id: string) => {\r\n    // Note: La logique de restauration des points Berry lors d'une suppression est complexe\r\n    // et devrait être gérée côté serveur. Ici, nous supprimons simplement la transaction.\r\n    if (!hasPermission('delete_contribution')) {\r\n        alert(\"Action non autorisée.\");\r\n        return;\r\n    }\r\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer cette contribution ?')) {\r\n      setContributions(contributions.filter(c => c.id !== id));\r\n    }\r\n  };\r\n\r\n  const handleSave = () => {\r\n    // Validation\r\n    const selectedMember = members.find(m => m.id === currentContribution.memberId);\r\n    if (!selectedMember || !currentContribution.amount) {\r\n      setFormError('Veuillez sélectionner un membre et saisir un montant valide.');\r\n      return;\r\n    }\r\n    if (currentContribution.amount < MINIMUM_CONTRIBUTION) {\r\n      setFormError(`Le montant minimal est de ${MINIMUM_CONTRIBUTION} XAF.`);\r\n      return;\r\n    }\r\n\r\n    // *** LOGIQUE MÉTIER INTÉGRÉE ICI ***\r\n    const { pointsChange, fineAmount } = calculateContributionImpact(\r\n      currentContribution.amount,\r\n      currentContribution.date,\r\n      MOCK_TOTAL_FUND\r\n    );\r\n\r\n    let status: Contribution['status'] = fineAmount > 0 ? 'En retard' : 'En attente';\r\n    if(hasPermission('validate_contribution')) status = 'Validée';\r\n\r\n    if (editingContribution) {\r\n      // La mise à jour est complexe (faut-il recalculer les points ?), nous modifions juste les données pour la démo\r\n      setContributions(contributions.map(c => \r\n        c.id === editingContribution.id \r\n          ? { ...editingContribution, ...currentContribution, pointsChange, fineAmount } // Ré-évalue l'impact\r\n          : c\r\n      ));\r\n    } else {\r\n      // Ajout d'une nouvelle contribution\r\n      const newContribution: Contribution = {\r\n        id: `C${Date.now()}`,\r\n        ...currentContribution,\r\n        memberName: selectedMember.name, // Assurer la cohérence du nom\r\n        status: status, \r\n        pointsChange,\r\n        fineAmount,\r\n      };\r\n      setContributions([newContribution, ...contributions]);\r\n\r\n      // Mettre à jour les points du membre\r\n      setMembers(members.map(m => \r\n        m.id === selectedMember.id \r\n          ? { ...m, berryPoints: m.berryPoints + pointsChange }\r\n          : m\r\n      ));\r\n    }\r\n    setIsModalOpen(false);\r\n  };\r\n\r\n  const handleStatusChange = (id: string, newStatus: Contribution['status']) => {\r\n    if (!hasPermission('update_contribution_status')) {\r\n      alert(\"Action non autorisée.\");\r\n      return;\r\n    }\r\n    setContributions(contributions.map(c => (c.id === id ? { ...c, status: newStatus } : c)));\r\n  };\r\n\r\n\r\n  // --- RENDU ---\r\n\r\n  return (\r\n    <div style={styles.page}>\r\n      <header style={styles.header}>\r\n        <h2 style={styles.headerTitle}>Gestion des Contributions</h2>\r\n        <button onClick={() => navigate('/')} style={styles.backButton}>← Retour au Tableau de bord</button>\r\n      </header>\r\n\r\n      <section style={styles.statSection}>\r\n        <StatCard title=\"Contributions Validées (ce mois)\" value={`${stats.currentMonthValidated.toLocaleString()} XAF`} />\r\n        <StatCard title=\"Contributions en Attente\" value={stats.totalPending.toString()} />\r\n        <StatCard title=\"Contributions en Retard\" value={stats.totalLate.toString()} />\r\n      </section>\r\n\r\n      <section style={styles.controlsSection}>\r\n        <input type=\"text\" placeholder=\"Rechercher par nom, ID...\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} style={styles.searchInput} />\r\n        <select value={filterStatus} onChange={(e) => setFilterStatus(e.target.value)} style={styles.filterSelect}>\r\n          <option value=\"All\">Tous les statuts</option>\r\n          <option value=\"Validée\">Validée</option>\r\n          <option value=\"En attente\">En attente</option>\r\n          <option value=\"En retard\">En retard</option>\r\n          <option value=\"Annulée\">Annulée</option>\r\n        </select>\r\n        {hasPermission('add_contribution') && (\r\n          <button onClick={handleOpenModalForAdd} style={styles.addButton}>+ Ajouter une Cotisation</button>\r\n        )}\r\n      </section>\r\n\r\n      <div style={styles.tableContainer}>\r\n        <table style={styles.table}>\r\n          <thead>\r\n            <tr>\r\n              <th style={styles.th}>ID</th>\r\n              <th style={styles.th}>Membre</th>\r\n              <th style={styles.th}>Montant</th>\r\n              <th style={styles.th}>Date</th>\r\n              <th style={styles.th}>Statut</th>\r\n              <th style={styles.th}>Impact (Points/Amendes)</th> {/* NOUVELLE COLONNE */}\r\n              <th style={styles.th}>Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {filteredContributions.map((c) => (\r\n                <tr key={c.id}>\r\n                  <td style={styles.td}>{c.id}</td>\r\n                  <td style={styles.td}>{c.memberName}</td>\r\n                  <td style={styles.td}>{c.amount.toLocaleString()} XAF</td>\r\n                  <td style={styles.td}>{new Date(c.date).toLocaleDateString('fr-FR')}</td>\r\n                  <td style={styles.td}><StatusChip status={c.status} /></td>\r\n                  <td style={styles.td}> {/* NOUVELLE CELLULE */}\r\n                    {c.pointsChange !== undefined && (\r\n                      <span style={{ color: c.pointsChange > 0 ? '#22c55e' : '#ef4444', fontWeight: 'bold' }}>\r\n                        {c.pointsChange > 0 ? `+${c.pointsChange}` : c.pointsChange} pts\r\n                      </span>\r\n                    )}\r\n                    {c.fineAmount ? <span style={{ color: '#ef4444', marginLeft: '8px' }}>({c.fineAmount} XAF)</span> : ''}\r\n                  </td>\r\n                  <td style={{...styles.td, display: 'flex', gap: '8px' }}>\r\n                    {hasPermission('edit_contribution') && (<button onClick={() => handleOpenModalForEdit(c)} style={styles.actionButtonEdit}>Modifier</button>)}\r\n                    {hasPermission('delete_contribution') && (<button onClick={() => handleDelete(c.id)} style={styles.actionButtonDelete}>Supprimer</button>)}\r\n                  </td>\r\n                </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {isModalOpen && (\r\n        <div style={styles.modalOverlay}>\r\n          <div style={styles.modalContent}>\r\n            <h3 style={styles.modalTitle}>\r\n              {editingContribution ? 'Modifier la Contribution' : 'Ajouter une Contribution'}\r\n            </h3>\r\n            {formError && <p style={{ color: '#ef4444', textAlign: 'center' }}>{formError}</p>}\r\n            \r\n            <div style={styles.modalForm}>\r\n                <div>\r\n                    <label style={styles.modalLabel}>Membre</label>\r\n                    <select\r\n                        style={styles.modalInput}\r\n                        value={currentContribution.memberId}\r\n                        onChange={e => setCurrentContribution({...currentContribution, memberId: e.target.value})}\r\n                    >\r\n                        <option value=\"\" disabled>Sélectionner un membre...</option>\r\n                        {members.map(m => <option key={m.id} value={m.id}>{m.name}</option>)}\r\n                    </select>\r\n                    {selectedMemberInModal && <p style={{fontSize: '12px', color: '#1e3a8a', marginTop: '4px'}}>Solde actuel: {selectedMemberInModal.berryPoints} points</p>}\r\n                </div>\r\n                <ModalInput label=\"Montant (XAF)\" type=\"number\" value={currentContribution.amount} onChange={e => setCurrentContribution({...currentContribution, amount: parseFloat(e.target.value) || 0})} />\r\n                <ModalInput label=\"Date\" type=\"date\" value={currentContribution.date} onChange={e => setCurrentContribution({...currentContribution, date: e.target.value})} />\r\n                <ModalSelect label=\"Méthode de Paiement\" value={currentContribution.paymentMethod} onChange={e => setCurrentContribution({...currentContribution, paymentMethod: e.target.value as Contribution['paymentMethod']})}>\r\n                    <option value=\"Mobile Money\">Mobile Money</option>\r\n                    <option value=\"Virement Bancaire\">Virement Bancaire</option>\r\n                    <option value=\"Espèces\">Espèces</option>\r\n                    <option value=\"Chèque\">Chèque</option>\r\n                </ModalSelect>\r\n            </div>\r\n\r\n            <div style={styles.modalActions}>\r\n              <button onClick={() => setIsModalOpen(false)} style={styles.modalButtonCancel}>Annuler</button>\r\n              <button onClick={handleSave} style={styles.modalButtonSave}>{editingContribution ? 'Enregistrer' : 'Ajouter'}</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- COMPOSANTS D'ASSISTANCE ---\r\ninterface ModalInputProps extends InputHTMLAttributes<HTMLInputElement> { label: string; }\r\nconst ModalInput: React.FC<ModalInputProps> = ({ label, ...props }) => (\r\n    <div>\r\n        <label style={styles.modalLabel}>{label}</label>\r\n        <input style={styles.modalInput} {...props} />\r\n    </div>\r\n);\r\ninterface ModalSelectProps extends SelectHTMLAttributes<HTMLSelectElement> { label: string; children: ReactNode; }\r\nconst ModalSelect: React.FC<ModalSelectProps> = ({ label, children, ...props }) => (\r\n    <div>\r\n        <label style={styles.modalLabel}>{label}</label>\r\n        <select style={styles.modalInput} {...props}>{children}</select>\r\n    </div>\r\n);\r\nconst StatCard: React.FC<{ title: string; value: string }> = ({ title, value }) => (\r\n    <div style={{ backgroundColor: 'white', padding: '20px', borderRadius: '8px', boxShadow: '0 4px 6px rgba(0,0,0,0.1)', flex: '1 1 250px', textAlign: 'center' }}>\r\n      <h4 style={{ margin: 0, color: '#4b5563', fontSize: '16px', fontWeight: '600' }}>{title}</h4>\r\n      <p style={{ margin: '8px 0 0 0', color: '#1e3a8a', fontSize: '28px', fontWeight: 'bold' }}>{value}</p>\r\n    </div>\r\n  );\r\nconst StatusChip: React.FC<{ status: Contribution['status'] }> = ({ status }) => {\r\n    const chipStyle: React.CSSProperties = {\r\n        padding: '4px 12px', borderRadius: '9999px', fontWeight: '600', fontSize: '12px', color: 'white',\r\n        backgroundColor: { 'Validée': '#22c55e', 'En attente': '#f59e0b', 'En retard': '#ef4444', 'Annulée': '#6b7280' }[status]\r\n    };\r\n    return <span style={chipStyle}>{status}</span>\r\n};\r\n\r\n// --- STYLES EN LIGNE --- (inchangé)\r\nconst styles: { [key: string]: React.CSSProperties } = {\r\n  page: { fontFamily: 'Arial, sans-serif', padding: '24px', backgroundColor: '#f3f4f6', minHeight: '100vh' },\r\n  header: { display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '32px', flexWrap: 'wrap', gap: '16px' },\r\n  headerTitle: { fontSize: '28px', fontWeight: 'bold', color: '#1f2937', margin: 0 },\r\n  backButton: { padding: '10px 20px', backgroundColor: '#3b82f6', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600' },\r\n  statSection: { display: 'flex', gap: '24px', flexWrap: 'wrap', marginBottom: '32px' },\r\n  controlsSection: { marginBottom: '24px', display: 'flex', gap: '16px', flexWrap: 'wrap', alignItems: 'center' },\r\n  searchInput: { padding: '10px 12px', border: '1px solid #d1d5db', borderRadius: '8px', flexGrow: 1, minWidth: '300px' },\r\n  filterSelect: { padding: '10px 12px', border: '1px solid #d1d5db', borderRadius: '8px', backgroundColor: 'white' },\r\n  addButton: { padding: '10px 20px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600' },\r\n  tableContainer: { backgroundColor: 'white', borderRadius: '8px', boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)', overflowX: 'auto' },\r\n  table: { width: '100%', borderCollapse: 'collapse' },\r\n  th: { padding: '12px 16px', textAlign: 'left', fontSize: '14px', color: '#4b5563', backgroundColor: '#f9fafb', borderBottom: '1px solid #e5e7eb', fontWeight: '600' },\r\n  td: { padding: '12px 16px', fontSize: '14px', color: '#374151', borderBottom: '1px solid #e5e7eb' },\r\n  actionButtonEdit: { padding: '4px 8px', fontSize: '12px', fontWeight: '600', color: 'white', backgroundColor: '#f59e0b', border: 'none', borderRadius: '6px', cursor: 'pointer' },\r\n  actionButtonDelete: { padding: '4px 8px', fontSize: '12px', fontWeight: '600', color: 'white', backgroundColor: '#ef4444', border: 'none', borderRadius: '6px', cursor: 'pointer' },\r\n  actionSelect: { padding: '4px 8px', fontSize: '12px', border: '1px solid #d1d5db', borderRadius: '6px' },\r\n  modalOverlay: { position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0, 0, 0, 0.5)', display: 'flex', justifyContent: 'center', alignItems: 'center', zIndex: 1000 },\r\n  modalContent: { backgroundColor: 'white', padding: '32px', borderRadius: '12px', width: '90%', maxWidth: '500px', boxShadow: '0 8px 16px rgba(0, 0, 0, 0.2)' },\r\n  modalTitle: { fontSize: '24px', fontWeight: 'bold', marginBottom: '24px', color: '#1f2937' },\r\n  modalForm: { display: 'flex', flexDirection: 'column', gap: '16px' },\r\n  modalLabel: { display: 'block', marginBottom: '8px', fontWeight: '600', color: '#374151' },\r\n  modalInput: { width: '100%', padding: '10px', border: '1px solid #d1d5db', borderRadius: '8px', boxSizing: 'border-box' },\r\n  modalActions: { display: 'flex', justifyContent: 'flex-end', gap: '12px', marginTop: '32px' },\r\n  modalButtonCancel: { padding: '10px 20px', backgroundColor: '#6b7280', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600' },\r\n  modalButtonSave: { padding: '10px 20px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: '8px', cursor: 'pointer', fontWeight: '600' },\r\n};\r\n\r\nexport default Contributions;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}