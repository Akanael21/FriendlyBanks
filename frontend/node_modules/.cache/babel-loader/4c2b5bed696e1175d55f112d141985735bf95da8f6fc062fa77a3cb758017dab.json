{"ast":null,"code":"import React,{useState,useEffect,useMemo}from'react';import{useAuth}from'../context/AuthContext';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const roleLimits={President:1,Treasurer:2,Secrecom:1,Accountant:2,Censor:1,Member:Infinity,Guest:Infinity};// Fonction de calcul des points Berry selon la formule\nconst calculateBerryPoints=(monthlyContributions,attendanceRate,monthsActive)=>{const S=500;// Base points\nconst C=monthlyContributions/1000;// Contributions en milliers\nconst τ=attendanceRate/100;// Taux de présence en décimal\nconst ε=monthsActive;// Nombre de mois d'activité\nconst formula=S*(1+C/10)*(τ/(ε+1))*0.85*τ;return Math.round(formula);};// Fonction de calcul du pouvoir d'emprunt\nconst calculateLoanEligibility=berryPoints=>{if(berryPoints>=500)return 500000;// Selon fonds disponibles (max 500k)\nif(berryPoints>=200)return 300000;if(berryPoints>=100)return 120000;if(berryPoints>=10)return 60000;return 0;};// Fonction de calcul des pénalités\nconst calculatePenalties=daysOverdue=>{return daysOverdue*200;// 200 XAF par jour de retard\n};// Fonction de détermination du niveau d'éligibilité\nconst getEligibilityLevel=berryPoints=>{if(berryPoints>=500)return'Platinum';if(berryPoints>=200)return'Gold';if(berryPoints>=100)return'Silver';return'Bronze';};// Fonction pour mettre à jour les points Berry d'un membre\nconst updateMemberBerryPoints=member=>{const newPoints=calculateBerryPoints(member.berryPoints.monthlyContributions,member.berryPoints.attendanceRate,member.financial.monthlyPenalties);const eligibilityLevel=getEligibilityLevel(newPoints);const loanEligibility=calculateLoanEligibility(newPoints);return{...member,berryPoints:{...member.berryPoints,totalPoints:newPoints,eligibilityLevel,lastUpdate:new Date().toISOString()},financial:{...member.financial,loanEligibility}};};const Members=()=>{const{user,hasPermission}=useAuth();const navigate=useNavigate();const[members,setMembers]=useState([]);const[loading,setLoading]=useState(true);const[searchTerm,setSearchTerm]=useState('');const[roleFilter,setRoleFilter]=useState('');const[statusFilter,setStatusFilter]=useState('');const[isModalOpen,setModalOpen]=useState(false);const[editingMember,setEditingMember]=useState(null);const[formErrors,setFormErrors]=useState({});// New state for country code and local phone number\nconst[selectedCountryCode,setSelectedCountryCode]=useState('+237');const[localPhoneNumber,setLocalPhoneNumber]=useState('');// List of country codes for selection\nconst countryCodes=[{code:'+1',label:'USA (+1)'},{code:'+44',label:'UK (+44)'},{code:'+237',label:'Cameroon (+237)'},{code:'+33',label:'France (+33)'},{code:'+49',label:'Germany (+49)'},{code:'+91',label:'India (+91)'},{code:'+81',label:'Japan (+81)'},{code:'+86',label:'China (+86)'},{code:'+254',label:'Kenya (+254)'},{code:'+27',label:'South Africa (+27)'}];// Helper to split phone into country code and local number\nconst splitPhoneNumber=phone=>{if(!phone)return{countryCode:'+237',localNumber:''};// Sort country codes by length (longest first) to match correctly\nconst sortedCodes=[...countryCodes].sort((a,b)=>b.code.length-a.code.length);for(const c of sortedCodes){if(phone.startsWith(c.code)){return{countryCode:c.code,localNumber:phone.slice(c.code.length)};}}// Default fallback\nreturn{countryCode:'+237',localNumber:phone};};// When editingMember changes, update country code and local phone number states\nuseEffect(()=>{if(editingMember){const{countryCode,localNumber}=splitPhoneNumber(editingMember.personalInfo.phone);setSelectedCountryCode(countryCode);setLocalPhoneNumber(localNumber);}else{setSelectedCountryCode('+237');setLocalPhoneNumber('');}},[editingMember]);useEffect(()=>{const fetchMembers=async()=>{try{// TODO: Replace with actual API call\n// const response = await fetch('/api/members', { headers: { Authorization: `Bearer ${user?.token}` } });\n// const data = await response.json();\n// setMembers(data);\nsetMembers([{id:'1',personalInfo:{firstName:'John',lastName:'Doe',email:'john.doe@example.com',phone:'+237699887766',address:{street:'123 Main St',city:'Yaoundé',postalCode:'12345',country:'Cameroon'},dateOfBirth:'1990-01-01',nationality:'Cameroonian',profession:'Engineer',emergencyContact:{name:'Jane Doe',phone:'+237699887777',relation:'Sister'},profilePhoto:undefined},accountInfo:{role:'President',joinDate:'2022-01-01',membershipNumber:'MEM001',status:'Actif',lastLoginDate:'2023-01-01'},berryPoints:{totalPoints:450,pointsHistory:[{date:'2024-01-01',points:50,reason:'Cotisation mensuelle',type:'gain'},{date:'2024-02-01',points:75,reason:'Participation réunion',type:'gain'},{date:'2024-03-01',points:-25,reason:'Retard cotisation',type:'loss'}],lastUpdate:'2024-01-01',eligibilityLevel:'Gold',monthlyContributions:25000,attendanceRate:85},financial:{totalContributions:100000,currentBalance:50000,loanEligibility:300000,activeLoans:[{loanId:'L001',amount:150000,status:'active',startDate:'2024-01-01',monthlyPayment:15000}],contributionHistory:[{date:'2024-01-01',amount:25000,status:'paid',berryPointsEarned:50},{date:'2024-02-01',amount:25000,status:'paid',berryPointsEarned:50},{date:'2024-03-01',amount:25000,status:'overdue',penalties:2000}],sanctions:[],monthlyPenalties:0},contributionStatus:'à jour',loanHistory:['L001'],isActive:true},{id:'2',personalInfo:{firstName:'Jane',lastName:'Smith',email:'jane.smith@example.com',phone:'+237677665544',address:{street:'456 Elm St',city:'Douala',postalCode:'54321',country:'Cameroon'},dateOfBirth:'1985-05-05',nationality:'Cameroonian',profession:'Doctor',emergencyContact:{name:'John Smith',phone:'+237677665555',relation:'Husband'}},accountInfo:{role:'Treasurer',joinDate:'2022-03-15',membershipNumber:'MEM002',status:'Actif',lastLoginDate:'2023-01-01'},berryPoints:{totalPoints:320,pointsHistory:[{date:'2024-01-01',points:40,reason:'Cotisation mensuelle',type:'gain'},{date:'2024-02-01',points:60,reason:'Participation + bonus',type:'gain'}],lastUpdate:'2024-01-01',eligibilityLevel:'Gold',monthlyContributions:20000,attendanceRate:75},financial:{totalContributions:80000,currentBalance:30000,loanEligibility:300000,activeLoans:[],contributionHistory:[{date:'2024-01-01',amount:20000,status:'paid',berryPointsEarned:40},{date:'2024-02-01',amount:20000,status:'overdue',penalties:1000}],sanctions:[{id:'S001',date:'2024-02-15',type:'penalty',reason:'Retard cotisation',amount:1000,status:'active'}],monthlyPenalties:1000},contributionStatus:'en retard',loanHistory:[],isActive:true},{id:'3',personalInfo:{firstName:'Paul',lastName:'Atanga',email:'paul.atanga@example.com',phone:'+237655443322',address:{street:'789 Pine St',city:'Bamenda',postalCode:'67890',country:'Cameroon'},dateOfBirth:'1992-09-09',nationality:'Cameroonian',profession:'Teacher',emergencyContact:{name:'Mary Atanga',phone:'+237655443333',relation:'Mother'}},accountInfo:{role:'Member',joinDate:'2023-02-10',membershipNumber:'MEM003',status:'Exclu',lastLoginDate:'2023-01-01'},berryPoints:{totalPoints:150,pointsHistory:[{date:'2024-01-01',points:30,reason:'Cotisation mensuelle',type:'gain'},{date:'2024-02-01',points:-50,reason:'Sanction exclusion',type:'loss'}],lastUpdate:'2024-01-01',eligibilityLevel:'Silver',monthlyContributions:15000,attendanceRate:50},financial:{totalContributions:20000,currentBalance:10000,loanEligibility:120000,activeLoans:[],contributionHistory:[{date:'2024-01-01',amount:15000,status:'paid',berryPointsEarned:30}],sanctions:[{id:'S002',date:'2024-02-01',type:'exclusion',reason:'Non-respect des règles',status:'active'}],monthlyPenalties:0},contributionStatus:'absent',loanHistory:[],isActive:false}]);}catch(error){console.error('Failed to fetch members:',error);}finally{setLoading(false);}};fetchMembers();},[]);const filteredMembers=useMemo(()=>{return members.filter(m=>m.personalInfo.firstName.toLowerCase().includes(searchTerm.toLowerCase())||m.personalInfo.lastName.toLowerCase().includes(searchTerm.toLowerCase())).filter(m=>roleFilter?m.accountInfo.role===roleFilter:true).filter(m=>statusFilter?m.accountInfo.status===statusFilter:true);},[members,searchTerm,roleFilter,statusFilter]);const openModal=function(){let member=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(!hasPermission('manage_members'))return;setEditingMember(member);setFormErrors({});setModalOpen(true);};const handleDelete=id=>{if(!hasPermission('manage_members'))return;if(window.confirm('Êtes-vous sûr de vouloir supprimer ce membre ?')){setMembers(prev=>prev.filter(m=>m.id!==id));}};const closeModal=()=>{setModalOpen(false);setEditingMember(null);setFormErrors({});setSelectedCountryCode('+237');setLocalPhoneNumber('');};const validateEmailUnique=(email,id)=>{return!members.some(m=>m.personalInfo.email===email&&m.id!==id);};const validatePhone=phone=>{// Validate full phone number including country code\n// Simple regex to check + followed by digits, min 8 to max 15 digits total\nconst phoneRegex=/^\\+\\d{8,15}$/;return phoneRegex.test(phone);};const validateRoleLimits=(role,id)=>{if(!(role in roleLimits))return true;// Vérifie que le rôle existe dans le dictionnaire\nconst typedRole=role;// Cast sécurisé vers MemberRole\nconst count=members.filter(m=>m.accountInfo.role===typedRole&&m.id!==id).length;return count<roleLimits[typedRole];};const handleSave=async e=>{e.preventDefault();if(!editingMember)return;const errors={};// Combine country code and local phone number for validation\nconst fullPhone=selectedCountryCode+localPhoneNumber;if(!editingMember.personalInfo.firstName.trim())errors.firstName='Le prénom est requis.';if(!editingMember.personalInfo.lastName.trim())errors.lastName='Le nom est requis.';if(!editingMember.personalInfo.email.trim())errors.email='L\\'email est requis.';else if(!validateEmailUnique(editingMember.personalInfo.email,editingMember.id))errors.email='L\\'email doit être unique.';if(!localPhoneNumber.trim())errors.phone='Le téléphone est requis.';else if(!validatePhone(fullPhone))errors.phone='Le téléphone doit être au format valide.';if(!editingMember.accountInfo.role)errors.role='Le rôle est requis.';else if(!validateRoleLimits(editingMember.accountInfo.role,editingMember.id))errors.role=`Limite atteinte pour le rôle ${editingMember.accountInfo.role}.`;setFormErrors(errors);if(Object.keys(errors).length>0)return;// Combine country code and local phone number before saving\nconst memberToSave={...editingMember,personalInfo:{...editingMember.personalInfo,phone:fullPhone}};// Generate a temporary password for new member\nconst generateTempPassword=()=>{const chars='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()';let password='';for(let i=0;i<12;i++){password+=chars.charAt(Math.floor(Math.random()*chars.length));}return password;};let tempPassword='';if(!memberToSave.id){tempPassword=generateTempPassword();}try{if(memberToSave.id){// Update existing member API call\n// await api.updateMember(memberToSave);\nsetMembers(prev=>prev.map(m=>m.id===memberToSave.id?{...memberToSave}:m));}else{// Create new member API call with tempPassword\n// await api.createMember({ ...memberToSave, tempPassword });\nconst newMember={...memberToSave,id:Date.now().toString()};setMembers(prev=>[...prev,newMember]);// Simulate sending email and WhatsApp with tempPassword\n// TODO: Implement backend API to send email and WhatsApp messages\nconsole.log(`Send email and WhatsApp to ${memberToSave.personalInfo.email} and phone ${fullPhone} with password: ${tempPassword}`);}closeModal();}catch(error){console.error('Failed to save member:',error);// Optionally set form error here\n}};const handleInputChange=(field,value)=>{if(editingMember){if(field==='phone'){// We handle phone input separately with localPhoneNumber state\nsetLocalPhoneNumber(value);}else if(field in editingMember.personalInfo){setEditingMember(prev=>prev?{...prev,personalInfo:{...prev.personalInfo,[field]:value}}:null);}else if(field in editingMember.accountInfo){setEditingMember(prev=>prev?{...prev,accountInfo:{...prev.accountInfo,[field]:value}}:null);}}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(!hasPermission('view_members'))return/*#__PURE__*/_jsx(\"p\",{children:\"Vous n'avez pas la permission de voir cette page.\"});return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',minHeight:'100vh',fontFamily:'Arial, sans-serif'},children:[/*#__PURE__*/_jsx(\"aside\",{style:{width:'250px',backgroundColor:'#1e3a8a',color:'white',padding:'24px 16px'}}),/*#__PURE__*/_jsxs(\"main\",{style:{flex:1,backgroundColor:'#f3f4f6',padding:24},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),style:{padding:'8px 16px',backgroundColor:'#3b82f6',color:'white',border:'none',borderRadius:4,cursor:'pointer',display:'flex',alignItems:'center',gap:8},children:\"\\u2190 Retour au Dashboard\"}),/*#__PURE__*/_jsx(\"h1\",{style:{fontSize:28,fontWeight:'bold',marginBottom:24},children:\"Gestion des Membres / Members Management\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:16,marginBottom:24,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Rechercher par nom...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{padding:8,borderRadius:4,border:'1px solid #ccc',flex:1}}),/*#__PURE__*/_jsxs(\"select\",{title:\"Role\",value:roleFilter,onChange:e=>setRoleFilter(e.target.value),style:{padding:8,borderRadius:4},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Tous les r\\xF4les\"}),/*#__PURE__*/_jsx(\"option\",{value:\"President\",children:\"Pr\\xE9sident\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Treasurer\",children:\"Tr\\xE9sorier\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Secrecom\",children:\"Secr\\xE9com\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accountant\",children:\"Comptable\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Censor\",children:\"Censeur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Member\",children:\"Membre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Guest\",children:\"Invit\\xE9\"})]}),/*#__PURE__*/_jsxs(\"select\",{title:\"Status\",value:statusFilter,onChange:e=>setStatusFilter(e.target.value),style:{padding:8,borderRadius:4},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Tous les statuts\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Actif\",children:\"Actif\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Suspendu\",children:\"Suspendu\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Exclu\",children:\"Exclu\"})]}),hasPermission('manage_members')&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>openModal(),style:{padding:'8px 16px',backgroundColor:'#2563eb',color:'white',border:'none',borderRadius:4},children:\"Ajouter Membre\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse',backgroundColor:'white'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:'#3b82f6',color:'white'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"Nom\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"T\\xE9l\\xE9phone\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"R\\xF4le\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"Points Berry\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"Niveau\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"Cotisation\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"Pouvoir d'emprunt\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"P\\xE9nalit\\xE9s\"}),hasPermission('manage_members')&&/*#__PURE__*/_jsx(\"th\",{style:{padding:12,textAlign:'left',borderBottom:'1px solid #ddd'},children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredMembers.map(member=>/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:member.isActive?'white':'#fef2f2'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:8},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:32,height:32,borderRadius:'50%',backgroundColor:'#e5e7eb',display:'flex',alignItems:'center',justifyContent:'center',fontSize:14,fontWeight:'bold'},children:[member.personalInfo.firstName[0],member.personalInfo.lastName[0]]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold'},children:[member.personalInfo.firstName,\" \",member.personalInfo.lastName]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:12,color:'#6b7280'},children:member.accountInfo.membershipNumber})]})]})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:member.personalInfo.email}),/*#__PURE__*/_jsx(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:member.personalInfo.phone}),/*#__PURE__*/_jsx(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:4,fontSize:12,fontWeight:'bold',backgroundColor:member.accountInfo.role==='President'?'#dbeafe':member.accountInfo.role==='Treasurer'?'#dcfce7':'#f3f4f6',color:member.accountInfo.role==='President'?'#1e40af':member.accountInfo.role==='Treasurer'?'#166534':'#374151'},children:member.accountInfo.role})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:4,fontSize:12,fontWeight:'bold',backgroundColor:member.accountInfo.status==='Actif'?'#dcfce7':member.accountInfo.status==='Suspendu'?'#fef3c7':'#fecaca',color:member.accountInfo.status==='Actif'?'#166534':member.accountInfo.status==='Suspendu'?'#92400e':'#dc2626'},children:member.accountInfo.status})}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:member.berryPoints.totalPoints}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,color:'#6b7280'},children:[member.berryPoints.pointsHistory.length>0&&(member.berryPoints.pointsHistory[member.berryPoints.pointsHistory.length-1].type==='gain'?'+':''),member.berryPoints.pointsHistory.length>0&&member.berryPoints.pointsHistory[member.berryPoints.pointsHistory.length-1].points]})]}),/*#__PURE__*/_jsx(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:4,fontSize:12,fontWeight:'bold',backgroundColor:member.berryPoints.eligibilityLevel==='Platinum'?'#f3e8ff':member.berryPoints.eligibilityLevel==='Gold'?'#fef3c7':member.berryPoints.eligibilityLevel==='Silver'?'#f1f5f9':'#fef2f2',color:member.berryPoints.eligibilityLevel==='Platinum'?'#7c3aed':member.berryPoints.eligibilityLevel==='Gold'?'#92400e':member.berryPoints.eligibilityLevel==='Silver'?'#475569':'#dc2626'},children:member.berryPoints.eligibilityLevel})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:4,fontSize:12,fontWeight:'bold',backgroundColor:member.contributionStatus==='à jour'?'#dcfce7':member.contributionStatus==='en retard'?'#fef3c7':'#fecaca',color:member.contributionStatus==='à jour'?'#166534':member.contributionStatus==='en retard'?'#92400e':'#dc2626'},children:member.contributionStatus})}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold'},children:[member.financial.loanEligibility.toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,color:'#6b7280'},children:[member.financial.activeLoans.length,\" pr\\xEAt(s) actif(s)\"]})]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'bold',color:member.financial.monthlyPenalties>0?'#dc2626':'#166534'},children:[member.financial.monthlyPenalties.toLocaleString(),\" XAF\"]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:12,color:'#6b7280'},children:[member.financial.sanctions.length,\" sanction(s)\"]})]}),hasPermission('manage_members')&&/*#__PURE__*/_jsx(\"td\",{style:{padding:12,borderBottom:'1px solid #ddd'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openModal(member),style:{padding:'6px 12px',border:'none',borderRadius:4,cursor:'pointer',backgroundColor:'#3b82f6',color:'white',fontSize:12},children:\"Modifier\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(member.id),style:{padding:'6px 12px',border:'none',borderRadius:4,cursor:'pointer',backgroundColor:'#ef4444',color:'white',fontSize:12},\"aria-label\":`Supprimer ${member.personalInfo.firstName} ${member.personalInfo.lastName}`,children:\"Supprimer\"})]})})]},member.id))})]})}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{style:{position:'fixed',top:0,left:0,right:0,bottom:0,backgroundColor:'rgba(0,0,0,0.5)',display:'flex',alignItems:'center',justifyContent:'center',zIndex:1000},children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:'white',padding:24,borderRadius:8,width:'400px',maxHeight:'80vh',overflowY:'auto'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:16},children:editingMember!==null&&editingMember!==void 0&&editingMember.id?'Modifier Membre':'Ajouter Membre'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSave,children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",children:\"Pr\\xE9nom\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"firstName\",type:\"text\",value:(editingMember===null||editingMember===void 0?void 0:editingMember.personalInfo.firstName)||'',onChange:e=>handleInputChange('firstName',e.target.value),style:{width:'100%',padding:8,borderRadius:4,border:formErrors.firstName?'1px solid red':'1px solid #ccc'}}),formErrors.firstName&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:formErrors.firstName})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",children:\"Nom\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"lastName\",type:\"text\",value:(editingMember===null||editingMember===void 0?void 0:editingMember.personalInfo.lastName)||'',onChange:e=>handleInputChange('lastName',e.target.value),style:{width:'100%',padding:8,borderRadius:4,border:formErrors.lastName?'1px solid red':'1px solid #ccc'}}),formErrors.lastName&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:formErrors.lastName})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",value:(editingMember===null||editingMember===void 0?void 0:editingMember.personalInfo.email)||'',onChange:e=>handleInputChange('email',e.target.value),style:{width:'100%',padding:8,borderRadius:4,border:formErrors.email?'1px solid red':'1px solid #ccc'}}),formErrors.email&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:formErrors.email})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"T\\xE9l\\xE9phone\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"select\",{id:\"countryCode\",value:selectedCountryCode,onChange:e=>setSelectedCountryCode(e.target.value),style:{padding:8,borderRadius:4,border:'1px solid #ccc',minWidth:'120px'},\"aria-label\":\"Code pays\",children:countryCodes.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c.code,children:c.label},c.code))}),/*#__PURE__*/_jsx(\"input\",{id:\"phone\",type:\"text\",value:localPhoneNumber,onChange:e=>setLocalPhoneNumber(e.target.value),placeholder:\"Ex: 699887766\",style:{flex:1,padding:8,borderRadius:4,border:formErrors.phone?'1px solid red':'1px solid #ccc'}})]}),formErrors.phone&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:formErrors.phone})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:12},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"role\",children:\"R\\xF4le\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"select\",{id:\"role\",value:(editingMember===null||editingMember===void 0?void 0:editingMember.accountInfo.role)||'',onChange:e=>handleInputChange('role',e.target.value),style:{width:'100%',padding:8,borderRadius:4,border:formErrors.role?'1px solid red':'1px solid #ccc'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"S\\xE9lectionnez un r\\xF4le\"}),/*#__PURE__*/_jsx(\"option\",{value:\"President\",children:\"Pr\\xE9sident\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Treasurer\",children:\"Tr\\xE9sorier\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Secrecom\",children:\"Secr\\xE9com\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Accountant\",children:\"Comptable\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Censor\",children:\"Censeur\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Member\",children:\"Membre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Guest\",children:\"Invit\\xE9\"})]}),formErrors.role&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',fontSize:12},children:formErrors.role})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'flex-end',gap:8,marginTop:16},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:closeModal,style:{padding:'8px 16px',border:'1px solid #ccc',borderRadius:4,backgroundColor:'white'},children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:'8px 16px',backgroundColor:'#2563eb',color:'white',border:'none',borderRadius:4},children:\"Sauvegarder\"})]})]})]})})]})]});};export default Members;","map":{"version":3,"names":["React","useState","useEffect","useMemo","useAuth","useNavigate","jsx","_jsx","jsxs","_jsxs","roleLimits","President","Treasurer","Secrecom","Accountant","Censor","Member","Infinity","Guest","calculateBerryPoints","monthlyContributions","attendanceRate","monthsActive","S","C","τ","ε","formula","Math","round","calculateLoanEligibility","berryPoints","calculatePenalties","daysOverdue","getEligibilityLevel","updateMemberBerryPoints","member","newPoints","financial","monthlyPenalties","eligibilityLevel","loanEligibility","totalPoints","lastUpdate","Date","toISOString","Members","user","hasPermission","navigate","members","setMembers","loading","setLoading","searchTerm","setSearchTerm","roleFilter","setRoleFilter","statusFilter","setStatusFilter","isModalOpen","setModalOpen","editingMember","setEditingMember","formErrors","setFormErrors","selectedCountryCode","setSelectedCountryCode","localPhoneNumber","setLocalPhoneNumber","countryCodes","code","label","splitPhoneNumber","phone","countryCode","localNumber","sortedCodes","sort","a","b","length","c","startsWith","slice","personalInfo","fetchMembers","id","firstName","lastName","email","address","street","city","postalCode","country","dateOfBirth","nationality","profession","emergencyContact","name","relation","profilePhoto","undefined","accountInfo","role","joinDate","membershipNumber","status","lastLoginDate","pointsHistory","date","points","reason","type","totalContributions","currentBalance","activeLoans","loanId","amount","startDate","monthlyPayment","contributionHistory","berryPointsEarned","penalties","sanctions","contributionStatus","loanHistory","isActive","error","console","filteredMembers","filter","m","toLowerCase","includes","openModal","arguments","handleDelete","window","confirm","prev","closeModal","validateEmailUnique","some","validatePhone","phoneRegex","test","validateRoleLimits","typedRole","count","handleSave","e","preventDefault","errors","fullPhone","trim","Object","keys","memberToSave","generateTempPassword","chars","password","i","charAt","floor","random","tempPassword","map","newMember","now","toString","log","handleInputChange","field","value","children","style","display","minHeight","fontFamily","width","backgroundColor","color","padding","flex","onClick","border","borderRadius","cursor","alignItems","gap","fontSize","fontWeight","marginBottom","flexWrap","placeholder","onChange","target","title","overflowX","borderCollapse","textAlign","borderBottom","height","justifyContent","toLocaleString","position","top","left","right","bottom","zIndex","maxHeight","overflowY","onSubmit","htmlFor","minWidth","marginTop"],"sources":["D:/Projects/FriendlyBanks/frontend/src/components/Members.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface Address {\r\n  street: string;\r\n  city: string;\r\n  postalCode: string;\r\n  country: string;\r\n}\r\ninterface EmergencyContact {\r\n  name: string;\r\n  phone: string;\r\n  relation: string;\r\n}\r\ninterface PointsHistory {\r\n  date: string;\r\n  points: number;\r\n  reason: string;\r\n  type: 'gain' | 'loss';\r\n}\r\ninterface Contribution {\r\n  date: string;\r\n  amount: number;\r\n  status: 'paid' | 'pending' | 'overdue';\r\n  penalties?: number;\r\n  berryPointsEarned?: number;\r\n}\r\ninterface Loan {\r\n  loanId: string;\r\n  amount: number;\r\n  status: 'active' | 'completed' | 'defaulted';\r\n  startDate: string;\r\n  endDate?: string;\r\n  monthlyPayment: number;\r\n}\r\ninterface Sanction {\r\n  id: string;\r\n  date: string;\r\n  type: 'penalty' | 'suspension' | 'exclusion';\r\n  reason: string;\r\n  amount?: number;\r\n  status: 'active' | 'resolved';\r\n}\r\ntype MemberRole = 'President' | 'Treasurer' | 'Secrecom' | 'Accountant' | 'Censor' | 'Member' | 'Guest';\r\ntype MemberStatus = 'Actif' | 'Suspendu' | 'Exclu';\r\ntype EligibilityLevel = 'Bronze' | 'Silver' | 'Gold' | 'Platinum';\r\ninterface Member {\r\n  id: string;\r\n  personalInfo: {\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n    phone: string;\r\n    address: Address;\r\n    dateOfBirth: string;\r\n    nationality: string;\r\n    profession: string;\r\n    emergencyContact: EmergencyContact;\r\n    profilePhoto?: string;\r\n  };\r\n  accountInfo: {\r\n    role: MemberRole;\r\n    joinDate: string;\r\n    membershipNumber: string;\r\n    status: MemberStatus;\r\n    lastLoginDate: string;\r\n  };\r\n  berryPoints: {\r\n    totalPoints: number;\r\n    pointsHistory: PointsHistory[];\r\n    lastUpdate: string;\r\n    eligibilityLevel: EligibilityLevel;\r\n    monthlyContributions: number;\r\n    attendanceRate: number;\r\n  };\r\n  financial: {\r\n    totalContributions: number;\r\n    currentBalance: number;\r\n    loanEligibility: number;\r\n    activeLoans: Loan[];\r\n    contributionHistory: Contribution[];\r\n    sanctions: Sanction[];\r\n    monthlyPenalties: number;\r\n  };\r\n  contributionStatus: 'à jour' | 'en retard' | 'absent';\r\n  loanHistory?: string[];\r\n  isActive?: boolean;\r\n}\r\nconst roleLimits: { [key in MemberRole]: number } = {\r\n  President: 1,\r\n  Treasurer: 2,\r\n  Secrecom: 1,\r\n  Accountant: 2,\r\n  Censor: 1,\r\n  Member: Infinity,\r\n  Guest: Infinity,\r\n};\r\n// Fonction de calcul des points Berry selon la formule\r\nconst calculateBerryPoints = (\r\n  monthlyContributions: number,\r\n  attendanceRate: number,\r\n  monthsActive: number\r\n): number => {\r\n  const S = 500; // Base points\r\n  const C = monthlyContributions / 1000; // Contributions en milliers\r\n  const τ = attendanceRate / 100; // Taux de présence en décimal\r\n  const ε = monthsActive; // Nombre de mois d'activité\r\n\r\n  const formula = S * (1 + C / 10) * (τ / (ε + 1)) * 0.85 * τ;\r\n  return Math.round(formula);\r\n};\r\n\r\n// Fonction de calcul du pouvoir d'emprunt\r\nconst calculateLoanEligibility = (berryPoints: number): number => {\r\n  if (berryPoints >= 500) return 500000; // Selon fonds disponibles (max 500k)\r\n  if (berryPoints >= 200) return 300000;\r\n  if (berryPoints >= 100) return 120000;\r\n  if (berryPoints >= 10) return 60000;\r\n  return 0;\r\n};\r\n\r\n// Fonction de calcul des pénalités\r\nconst calculatePenalties = (daysOverdue: number): number => {\r\n  return daysOverdue * 200; // 200 XAF par jour de retard\r\n};\r\n\r\n// Fonction de détermination du niveau d'éligibilité\r\nconst getEligibilityLevel = (berryPoints: number): EligibilityLevel => {\r\n  if (berryPoints >= 500) return 'Platinum';\r\n  if (berryPoints >= 200) return 'Gold';\r\n  if (berryPoints >= 100) return 'Silver';\r\n  return 'Bronze';\r\n};\r\n\r\n// Fonction pour mettre à jour les points Berry d'un membre\r\nconst updateMemberBerryPoints = (member: Member): Member => {\r\n  const newPoints = calculateBerryPoints(\r\n    member.berryPoints.monthlyContributions,\r\n    member.berryPoints.attendanceRate,\r\n    member.financial.monthlyPenalties\r\n  );\r\n  \r\n  const eligibilityLevel = getEligibilityLevel(newPoints);\r\n  const loanEligibility = calculateLoanEligibility(newPoints);\r\n  \r\n  return {\r\n    ...member,\r\n    berryPoints: {\r\n      ...member.berryPoints,\r\n      totalPoints: newPoints,\r\n      eligibilityLevel,\r\n      lastUpdate: new Date().toISOString(),\r\n    },\r\n    financial: {\r\n      ...member.financial,\r\n      loanEligibility,\r\n    }\r\n  };\r\n};\r\n\r\nconst Members: React.FC = () => {\r\n  const { user, hasPermission } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [members, setMembers] = useState<Member[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [roleFilter, setRoleFilter] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('');\r\n  const [isModalOpen, setModalOpen] = useState(false);\r\n  const [editingMember, setEditingMember] = useState<Member | null>(null);\r\n  const [formErrors, setFormErrors] = useState<{ [key: string]: string }>({});\r\n\r\n  // New state for country code and local phone number\r\n  const [selectedCountryCode, setSelectedCountryCode] = useState<string>('+237');\r\n  const [localPhoneNumber, setLocalPhoneNumber] = useState<string>('');\r\n\r\n  // List of country codes for selection\r\n  const countryCodes = [\r\n    { code: '+1', label: 'USA (+1)' },\r\n    { code: '+44', label: 'UK (+44)' },\r\n    { code: '+237', label: 'Cameroon (+237)' },\r\n    { code: '+33', label: 'France (+33)' },\r\n    { code: '+49', label: 'Germany (+49)' },\r\n    { code: '+91', label: 'India (+91)' },\r\n    { code: '+81', label: 'Japan (+81)' },\r\n    { code: '+86', label: 'China (+86)' },\r\n    { code: '+254', label: 'Kenya (+254)' },\r\n    { code: '+27', label: 'South Africa (+27)' },\r\n  ];\r\n\r\n  // Helper to split phone into country code and local number\r\n  const splitPhoneNumber = (phone: string) => {\r\n    if (!phone) return { countryCode: '+237', localNumber: '' };\r\n    \r\n    // Sort country codes by length (longest first) to match correctly\r\n    const sortedCodes = [...countryCodes].sort((a, b) => b.code.length - a.code.length);\r\n    \r\n    for (const c of sortedCodes) {\r\n      if (phone.startsWith(c.code)) {\r\n        return { countryCode: c.code, localNumber: phone.slice(c.code.length) };\r\n      }\r\n    }\r\n    // Default fallback\r\n    return { countryCode: '+237', localNumber: phone };\r\n  };\r\n\r\n  // When editingMember changes, update country code and local phone number states\r\n  useEffect(() => {\r\n    if (editingMember) {\r\n      const { countryCode, localNumber } = splitPhoneNumber(editingMember.personalInfo.phone);\r\n      setSelectedCountryCode(countryCode);\r\n      setLocalPhoneNumber(localNumber);\r\n    } else {\r\n      setSelectedCountryCode('+237');\r\n      setLocalPhoneNumber('');\r\n    }\r\n  }, [editingMember]);\r\n\r\n  useEffect(() => {\r\n    const fetchMembers = async () => {\r\n      try {\r\n        // TODO: Replace with actual API call\r\n        // const response = await fetch('/api/members', { headers: { Authorization: `Bearer ${user?.token}` } });\r\n        // const data = await response.json();\r\n        // setMembers(data);\r\n\r\n        setMembers([\r\n          { id: '1', personalInfo: { firstName: 'John', lastName: 'Doe', email: 'john.doe@example.com', phone: '+237699887766', address: { street: '123 Main St', city: 'Yaoundé', postalCode: '12345', country: 'Cameroon' }, dateOfBirth: '1990-01-01', nationality: 'Cameroonian', profession: 'Engineer', emergencyContact: { name: 'Jane Doe', phone: '+237699887777', relation: 'Sister' }, profilePhoto: undefined }, accountInfo: { role: 'President', joinDate: '2022-01-01', membershipNumber: 'MEM001', status: 'Actif', lastLoginDate: '2023-01-01' }, berryPoints: { totalPoints: 450, pointsHistory: [ { date: '2024-01-01', points: 50, reason: 'Cotisation mensuelle', type: 'gain' }, { date: '2024-02-01', points: 75, reason: 'Participation réunion', type: 'gain' }, { date: '2024-03-01', points: -25, reason: 'Retard cotisation', type: 'loss' } ], lastUpdate: '2024-01-01', eligibilityLevel: 'Gold', monthlyContributions: 25000, attendanceRate: 85 }, financial: { totalContributions: 100000, currentBalance: 50000, loanEligibility: 300000, activeLoans: [ { loanId: 'L001', amount: 150000, status: 'active', startDate: '2024-01-01', monthlyPayment: 15000 } ], contributionHistory: [ { date: '2024-01-01', amount: 25000, status: 'paid', berryPointsEarned: 50 }, { date: '2024-02-01', amount: 25000, status: 'paid', berryPointsEarned: 50 }, { date: '2024-03-01', amount: 25000, status: 'overdue', penalties: 2000 } ], sanctions: [], monthlyPenalties: 0 }, contributionStatus: 'à jour', loanHistory: ['L001'], isActive: true },\r\n          { id: '2', personalInfo: { firstName: 'Jane', lastName: 'Smith', email: 'jane.smith@example.com', phone: '+237677665544', address: { street: '456 Elm St', city: 'Douala', postalCode: '54321', country: 'Cameroon' }, dateOfBirth: '1985-05-05', nationality: 'Cameroonian', profession: 'Doctor', emergencyContact: { name: 'John Smith', phone: '+237677665555', relation: 'Husband' } }, accountInfo: { role: 'Treasurer', joinDate: '2022-03-15', membershipNumber: 'MEM002', status: 'Actif', lastLoginDate: '2023-01-01' }, berryPoints: { totalPoints: 320, pointsHistory: [ { date: '2024-01-01', points: 40, reason: 'Cotisation mensuelle', type: 'gain' }, { date: '2024-02-01', points: 60, reason: 'Participation + bonus', type: 'gain' } ], lastUpdate: '2024-01-01', eligibilityLevel: 'Gold', monthlyContributions: 20000, attendanceRate: 75 }, financial: { totalContributions: 80000, currentBalance: 30000, loanEligibility: 300000, activeLoans: [], contributionHistory: [ { date: '2024-01-01', amount: 20000, status: 'paid', berryPointsEarned: 40 }, { date: '2024-02-01', amount: 20000, status: 'overdue', penalties: 1000 } ], sanctions: [ { id: 'S001', date: '2024-02-15', type: 'penalty', reason: 'Retard cotisation', amount: 1000, status: 'active' } ], monthlyPenalties: 1000 }, contributionStatus: 'en retard', loanHistory: [], isActive: true },\r\n          { id: '3', personalInfo: { firstName: 'Paul', lastName: 'Atanga', email: 'paul.atanga@example.com', phone: '+237655443322', address: { street: '789 Pine St', city: 'Bamenda', postalCode: '67890', country: 'Cameroon' }, dateOfBirth: '1992-09-09', nationality: 'Cameroonian', profession: 'Teacher', emergencyContact: { name: 'Mary Atanga', phone: '+237655443333', relation: 'Mother' } }, accountInfo: { role: 'Member', joinDate: '2023-02-10', membershipNumber: 'MEM003', status: 'Exclu', lastLoginDate: '2023-01-01' }, berryPoints: { totalPoints: 150, pointsHistory: [ { date: '2024-01-01', points: 30, reason: 'Cotisation mensuelle', type: 'gain' }, { date: '2024-02-01', points: -50, reason: 'Sanction exclusion', type: 'loss' } ], lastUpdate: '2024-01-01', eligibilityLevel: 'Silver', monthlyContributions: 15000, attendanceRate: 50 }, financial: { totalContributions: 20000, currentBalance: 10000, loanEligibility: 120000, activeLoans: [], contributionHistory: [ { date: '2024-01-01', amount: 15000, status: 'paid', berryPointsEarned: 30 } ], sanctions: [ { id: 'S002', date: '2024-02-01', type: 'exclusion', reason: 'Non-respect des règles', status: 'active' } ], monthlyPenalties: 0 }, contributionStatus: 'absent', loanHistory: [], isActive: false }\r\n        ]);\r\n\r\n      } catch (error) {\r\n        console.error('Failed to fetch members:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchMembers();\r\n  }, []);\r\n\r\n  const filteredMembers = useMemo(() => {\r\n    return members\r\n      .filter(m => m.personalInfo.firstName.toLowerCase().includes(searchTerm.toLowerCase()) || m.personalInfo.lastName.toLowerCase().includes(searchTerm.toLowerCase()))\r\n      .filter(m => (roleFilter ? m.accountInfo.role === roleFilter : true))\r\n      .filter(m => (statusFilter ? m.accountInfo.status === statusFilter : true));\r\n  }, [members, searchTerm, roleFilter, statusFilter]);\r\n\r\n  const openModal = (member: Member | null = null) => {\r\n    if (!hasPermission('manage_members')) return;\r\n    setEditingMember(member);\r\n    setFormErrors({});\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const handleDelete = (id: string) => {\r\n    if (!hasPermission('manage_members')) return;\r\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer ce membre ?')) {\r\n      setMembers(prev => prev.filter(m => m.id !== id));\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n    setEditingMember(null);\r\n    setFormErrors({});\r\n    setSelectedCountryCode('+237');\r\n    setLocalPhoneNumber('');\r\n  };\r\n\r\n  const validateEmailUnique = (email: string, id?: string) => {\r\n    return !members.some(m => m.personalInfo.email === email && m.id !== id);\r\n  };\r\n\r\n  const validatePhone = (phone: string) => {\r\n    // Validate full phone number including country code\r\n    // Simple regex to check + followed by digits, min 8 to max 15 digits total\r\n    const phoneRegex = /^\\+\\d{8,15}$/;\r\n    return phoneRegex.test(phone);\r\n  };\r\n\r\n  const validateRoleLimits = (role: string, id?: string) => {\r\n  if (!(role in roleLimits)) return true; // Vérifie que le rôle existe dans le dictionnaire\r\n  const typedRole = role as MemberRole;   // Cast sécurisé vers MemberRole\r\n  const count = members.filter(m => m.accountInfo.role === typedRole && m.id !== id).length;\r\n  return count < roleLimits[typedRole];\r\n};\r\n\r\n  const handleSave = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    if (!editingMember) return;\r\n\r\n    const errors: { [key: string]: string } = {};\r\n    \r\n    // Combine country code and local phone number for validation\r\n    const fullPhone = selectedCountryCode + localPhoneNumber;\r\n    \r\n    if (!editingMember.personalInfo.firstName.trim()) errors.firstName = 'Le prénom est requis.';\r\n    if (!editingMember.personalInfo.lastName.trim()) errors.lastName = 'Le nom est requis.';\r\n    if (!editingMember.personalInfo.email.trim()) errors.email = 'L\\'email est requis.';\r\n    else if (!validateEmailUnique(editingMember.personalInfo.email, editingMember.id)) errors.email = 'L\\'email doit être unique.';\r\n    if (!localPhoneNumber.trim()) errors.phone = 'Le téléphone est requis.';\r\n    else if (!validatePhone(fullPhone)) errors.phone = 'Le téléphone doit être au format valide.';\r\n    if (!editingMember.accountInfo.role) errors.role = 'Le rôle est requis.';\r\n    else if (!validateRoleLimits(editingMember.accountInfo.role, editingMember.id)) errors.role = `Limite atteinte pour le rôle ${editingMember.accountInfo.role}.`;\r\n\r\n    setFormErrors(errors);\r\n    if (Object.keys(errors).length > 0) return;\r\n\r\n    // Combine country code and local phone number before saving\r\n    const memberToSave = { ...editingMember, personalInfo: { ...editingMember.personalInfo, phone: fullPhone } };\r\n\r\n    // Generate a temporary password for new member\r\n    const generateTempPassword = () => {\r\n      const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()';\r\n      let password = '';\r\n      for (let i = 0; i < 12; i++) {\r\n        password += chars.charAt(Math.floor(Math.random() * chars.length));\r\n      }\r\n      return password;\r\n    };\r\n\r\n    let tempPassword = '';\r\n    if (!memberToSave.id) {\r\n      tempPassword = generateTempPassword();\r\n    }\r\n\r\n    try {\r\n      if (memberToSave.id) {\r\n        // Update existing member API call\r\n        // await api.updateMember(memberToSave);\r\n        setMembers(prev => prev.map(m => (m.id === memberToSave.id ? { ...memberToSave } : m)));\r\n      } else {\r\n        // Create new member API call with tempPassword\r\n        // await api.createMember({ ...memberToSave, tempPassword });\r\n        const newMember = { ...memberToSave, id: Date.now().toString() };\r\n        setMembers(prev => [...prev, newMember]);\r\n\r\n        // Simulate sending email and WhatsApp with tempPassword\r\n        // TODO: Implement backend API to send email and WhatsApp messages\r\n        console.log(`Send email and WhatsApp to ${memberToSave.personalInfo.email} and phone ${fullPhone} with password: ${tempPassword}`);\r\n      }\r\n      closeModal();\r\n    } catch (error) {\r\n      console.error('Failed to save member:', error);\r\n      // Optionally set form error here\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (field: keyof Member['personalInfo'] | keyof Member['accountInfo'], value: any) => {\r\n    if (editingMember) {\r\n      if (field === 'phone') {\r\n        // We handle phone input separately with localPhoneNumber state\r\n        setLocalPhoneNumber(value);\r\n      } else if (field in editingMember.personalInfo) {\r\n        setEditingMember(prev => prev ? { ...prev, personalInfo: { ...prev.personalInfo, [field]: value } } : null);\r\n      } else if (field in editingMember.accountInfo) {\r\n        setEditingMember(prev => prev ? { ...prev, accountInfo: { ...prev.accountInfo, [field]: value } } : null);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n  if (!hasPermission('view_members')) return <p>Vous n'avez pas la permission de voir cette page.</p>;\r\n\r\n  return (\r\n    <div style={{ display: 'flex', minHeight: '100vh', fontFamily: 'Arial, sans-serif' }}>\r\n      <aside style={{ width: '250px', backgroundColor: '#1e3a8a', color: 'white', padding: '24px 16px' }}>\r\n        {/* Sidebar content from Dashboard */}\r\n      </aside>\r\n\r\n      <main style={{ flex: 1, backgroundColor: '#f3f4f6', padding: 24 }}>\r\n        {/* Bouton retour*/}\r\n        <button \r\n          onClick={() => navigate('/')} \r\n          style={{ \r\n            padding: '8px 16px', \r\n            backgroundColor: '#3b82f6', \r\n            color: 'white', \r\n            border: 'none', \r\n            borderRadius: 4,\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: 8\r\n          }}\r\n        >\r\n          ← Retour au Dashboard\r\n        </button>\r\n\r\n        <h1 style={{ fontSize: 28, fontWeight: 'bold', marginBottom: 24 }}>Gestion des Membres / Members Management</h1>\r\n\r\n        <div style={{ display: 'flex', gap: 16, marginBottom: 24, flexWrap: 'wrap' }}>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Rechercher par nom...\"\r\n            value={searchTerm}\r\n            onChange={e => setSearchTerm(e.target.value)}\r\n            style={{ padding: 8, borderRadius: 4, border: '1px solid #ccc', flex: 1 }}\r\n          />\r\n          <select title=\"Role\" value={roleFilter} onChange={e => setRoleFilter(e.target.value)} style={{ padding: 8, borderRadius: 4 }}>\r\n            <option value=\"\">Tous les rôles</option>\r\n            <option value=\"President\">Président</option>\r\n            <option value=\"Treasurer\">Trésorier</option>\r\n            <option value=\"Secrecom\">Secrécom</option>\r\n            <option value=\"Accountant\">Comptable</option>\r\n            <option value=\"Censor\">Censeur</option>\r\n            <option value=\"Member\">Membre</option>\r\n            <option value=\"Guest\">Invité</option>\r\n          </select>\r\n          <select title=\"Status\" value={statusFilter} onChange={e => setStatusFilter(e.target.value)} style={{ padding: 8, borderRadius: 4 }}>\r\n            <option value=\"\">Tous les statuts</option>\r\n            <option value=\"Actif\">Actif</option>\r\n            <option value=\"Suspendu\">Suspendu</option>\r\n            <option value=\"Exclu\">Exclu</option>\r\n          </select>\r\n          {hasPermission('manage_members') && (\r\n            <button onClick={() => openModal()} style={{ padding: '8px 16px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: 4 }}>\r\n              Ajouter Membre\r\n            </button>\r\n          )}\r\n        </div>\r\n \r\n        <div style={{ overflowX: 'auto' }}>\r\n          <table style={{ width: '100%', borderCollapse: 'collapse', backgroundColor: 'white' }}>\r\n            <thead>\r\n              <tr style={{ backgroundColor: '#3b82f6', color: 'white' }}>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Nom</th>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Email</th>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Téléphone</th>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Rôle</th>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Statut</th>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Points Berry</th>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Niveau</th>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Cotisation</th>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Pouvoir d'emprunt</th>\r\n                <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Pénalités</th>\r\n                {hasPermission('manage_members') && <th style={{ padding: 12, textAlign: 'left', borderBottom: '1px solid #ddd' }}>Actions</th>}\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredMembers.map(member => (\r\n                <tr key={member.id} style={{ backgroundColor: member.isActive ? 'white' : '#fef2f2' }}>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                      <div style={{ \r\n                        width: 32, \r\n                        height: 32, \r\n                        borderRadius: '50%', \r\n                        backgroundColor: '#e5e7eb', \r\n                        display: 'flex', \r\n                        alignItems: 'center', \r\n                        justifyContent: 'center',\r\n                        fontSize: 14,\r\n                        fontWeight: 'bold'\r\n                      }}>\r\n                        {member.personalInfo.firstName[0]}{member.personalInfo.lastName[0]}\r\n                      </div>\r\n                      <div>\r\n                        <div style={{ fontWeight: 'bold' }}>\r\n                          {member.personalInfo.firstName} {member.personalInfo.lastName}\r\n                        </div>\r\n                        <div style={{ fontSize: 12, color: '#6b7280' }}>\r\n                          {member.accountInfo.membershipNumber}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    {member.personalInfo.email}\r\n                  </td>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    {member.personalInfo.phone}\r\n                  </td>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    <span style={{ \r\n                      padding: '4px 8px',\r\n                      borderRadius: 4,\r\n                      fontSize: 12,\r\n                      fontWeight: 'bold',\r\n                      backgroundColor: member.accountInfo.role === 'President' ? '#dbeafe' : \r\n                                    member.accountInfo.role === 'Treasurer' ? '#dcfce7' : '#f3f4f6',\r\n                      color: member.accountInfo.role === 'President' ? '#1e40af' : \r\n                            member.accountInfo.role === 'Treasurer' ? '#166534' : '#374151'\r\n                    }}>\r\n                      {member.accountInfo.role}\r\n                    </span>\r\n                  </td>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    <span style={{ \r\n                      padding: '4px 8px',\r\n                      borderRadius: 4,\r\n                      fontSize: 12,\r\n                      fontWeight: 'bold',\r\n                      backgroundColor: member.accountInfo.status === 'Actif' ? '#dcfce7' : \r\n                                    member.accountInfo.status === 'Suspendu' ? '#fef3c7' : '#fecaca',\r\n                      color: member.accountInfo.status === 'Actif' ? '#166534' : \r\n                            member.accountInfo.status === 'Suspendu' ? '#92400e' : '#dc2626'\r\n                    }}>\r\n                      {member.accountInfo.status}\r\n                    </span>\r\n                  </td>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    <div style={{ fontWeight: 'bold' }}>{member.berryPoints.totalPoints}</div>\r\n                    <div style={{ fontSize: 12, color: '#6b7280' }}>\r\n                      {member.berryPoints.pointsHistory.length > 0 && \r\n                        (member.berryPoints.pointsHistory[member.berryPoints.pointsHistory.length - 1].type === 'gain' ? '+' : '')\r\n                      }\r\n                      {member.berryPoints.pointsHistory.length > 0 && \r\n                        member.berryPoints.pointsHistory[member.berryPoints.pointsHistory.length - 1].points\r\n                      }\r\n                    </div>\r\n                  </td>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    <span style={{ \r\n                      padding: '4px 8px',\r\n                      borderRadius: 4,\r\n                      fontSize: 12,\r\n                      fontWeight: 'bold',\r\n                      backgroundColor: member.berryPoints.eligibilityLevel === 'Platinum' ? '#f3e8ff' : \r\n                                    member.berryPoints.eligibilityLevel === 'Gold' ? '#fef3c7' : \r\n                                    member.berryPoints.eligibilityLevel === 'Silver' ? '#f1f5f9' : '#fef2f2',\r\n                      color: member.berryPoints.eligibilityLevel === 'Platinum' ? '#7c3aed' : \r\n                            member.berryPoints.eligibilityLevel === 'Gold' ? '#92400e' : \r\n                            member.berryPoints.eligibilityLevel === 'Silver' ? '#475569' : '#dc2626'\r\n                    }}>\r\n                      {member.berryPoints.eligibilityLevel}\r\n                    </span>\r\n                  </td>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    <span style={{ \r\n                      padding: '4px 8px',\r\n                      borderRadius: 4,\r\n                      fontSize: 12,\r\n                      fontWeight: 'bold',\r\n                      backgroundColor: member.contributionStatus === 'à jour' ? '#dcfce7' : \r\n                                    member.contributionStatus === 'en retard' ? '#fef3c7' : '#fecaca',\r\n                      color: member.contributionStatus === 'à jour' ? '#166534' : \r\n                            member.contributionStatus === 'en retard' ? '#92400e' : '#dc2626'\r\n                    }}>\r\n                      {member.contributionStatus}\r\n                    </span>\r\n                  </td>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    <div style={{ fontWeight: 'bold' }}>\r\n                      {member.financial.loanEligibility.toLocaleString()} XAF\r\n                    </div>\r\n                    <div style={{ fontSize: 12, color: '#6b7280' }}>\r\n                      {member.financial.activeLoans.length} prêt(s) actif(s)\r\n                    </div>\r\n                  </td>\r\n                  <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                    <div style={{ \r\n                      fontWeight: 'bold',\r\n                      color: member.financial.monthlyPenalties > 0 ? '#dc2626' : '#166534'\r\n                    }}>\r\n                      {member.financial.monthlyPenalties.toLocaleString()} XAF\r\n                    </div>\r\n                    <div style={{ fontSize: 12, color: '#6b7280' }}>\r\n                      {member.financial.sanctions.length} sanction(s)\r\n                    </div>\r\n                  </td>\r\n                  {hasPermission('manage_members') && (\r\n                    <td style={{ padding: 12, borderBottom: '1px solid #ddd' }}>\r\n                      <div style={{ display: 'flex', gap: 8 }}>\r\n                        <button \r\n                          onClick={() => openModal(member)} \r\n                          style={{ \r\n                            padding: '6px 12px', \r\n                            border: 'none', \r\n                            borderRadius: 4, \r\n                            cursor: 'pointer', \r\n                            backgroundColor: '#3b82f6', \r\n                            color: 'white',\r\n                            fontSize: 12\r\n                          }}\r\n                        >\r\n                          Modifier\r\n                        </button>\r\n                        <button\r\n                          onClick={() => handleDelete(member.id)}\r\n                          style={{ \r\n                            padding: '6px 12px', \r\n                            border: 'none', \r\n                            borderRadius: 4, \r\n                            cursor: 'pointer', \r\n                            backgroundColor: '#ef4444', \r\n                            color: 'white',\r\n                            fontSize: 12\r\n                          }}\r\n                          aria-label={`Supprimer ${member.personalInfo.firstName} ${member.personalInfo.lastName}`}\r\n                        >\r\n                          Supprimer\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  )}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {isModalOpen && (\r\n          <div style={{\r\n            position: 'fixed', top: 0, left: 0, right: 0, bottom: 0,\r\n            backgroundColor: 'rgba(0,0,0,0.5)', display: 'flex',\r\n            alignItems: 'center', justifyContent: 'center',\r\n            zIndex: 1000\r\n          }}>\r\n            <div style={{ backgroundColor: 'white', padding: 24, borderRadius: 8, width: '400px', maxHeight: '80vh', overflowY: 'auto' }}>\r\n              <h2 style={{ marginBottom: 16 }}>{editingMember?.id ? 'Modifier Membre' : 'Ajouter Membre'}</h2>\r\n              <form onSubmit={handleSave}>\r\n                <div style={{ marginBottom: 12 }}>\r\n                  <label htmlFor=\"firstName\">Prénom</label><br />\r\n                  <input\r\n                    id=\"firstName\"\r\n                    type=\"text\"\r\n                    value={editingMember?.personalInfo.firstName || ''}\r\n                    onChange={e => handleInputChange('firstName', e.target.value)}\r\n                    style={{ width: '100%', padding: 8, borderRadius: 4, border: formErrors.firstName ? '1px solid red' : '1px solid #ccc' }}\r\n                  />\r\n                  {formErrors.firstName && <div style={{ color: 'red', fontSize: 12 }}>{formErrors.firstName}</div>}\r\n                </div>\r\n                <div style={{ marginBottom: 12 }}>\r\n                  <label htmlFor=\"lastName\">Nom</label><br />\r\n                  <input\r\n                    id=\"lastName\"\r\n                    type=\"text\"\r\n                    value={editingMember?.personalInfo.lastName || ''}\r\n                    onChange={e => handleInputChange('lastName', e.target.value)}\r\n                    style={{ width: '100%', padding: 8, borderRadius: 4, border: formErrors.lastName ? '1px solid red' : '1px solid #ccc' }}\r\n                  />\r\n                  {formErrors.lastName && <div style={{ color: 'red', fontSize: 12 }}>{formErrors.lastName}</div>}\r\n                </div>\r\n                <div style={{ marginBottom: 12 }}>\r\n                  <label htmlFor=\"email\">Email</label><br />\r\n                  <input\r\n                    id=\"email\"\r\n                    type=\"email\"\r\n                    value={editingMember?.personalInfo.email || ''}\r\n                    onChange={e => handleInputChange('email', e.target.value)}\r\n                    style={{ width: '100%', padding: 8, borderRadius: 4, border: formErrors.email ? '1px solid red' : '1px solid #ccc' }}\r\n                  />\r\n                  {formErrors.email && <div style={{ color: 'red', fontSize: 12 }}>{formErrors.email}</div>}\r\n                </div>\r\n                <div style={{ marginBottom: 12 }}>\r\n                  <label htmlFor=\"phone\">Téléphone</label><br />\r\n                  <div style={{ display: 'flex', gap: 8 }}>\r\n                    <select\r\n                      id=\"countryCode\"\r\n                      value={selectedCountryCode}\r\n                      onChange={e => setSelectedCountryCode(e.target.value)}\r\n                      style={{ padding: 8, borderRadius: 4, border: '1px solid #ccc', minWidth: '120px' }}\r\n                      aria-label=\"Code pays\"\r\n                    >\r\n                      {countryCodes.map(c => (\r\n                        <option key={c.code} value={c.code}>{c.label}</option>\r\n                      ))}\r\n                    </select>\r\n                    <input\r\n                      id=\"phone\"\r\n                      type=\"text\"\r\n                      value={localPhoneNumber}\r\n                      onChange={e => setLocalPhoneNumber(e.target.value)}\r\n                      placeholder=\"Ex: 699887766\"\r\n                      style={{ flex: 1, padding: 8, borderRadius: 4, border: formErrors.phone ? '1px solid red' : '1px solid #ccc' }}\r\n                    />\r\n                  </div>\r\n                  {formErrors.phone && <div style={{ color: 'red', fontSize: 12 }}>{formErrors.phone}</div>}\r\n                </div>\r\n                <div style={{ marginBottom: 12 }}>\r\n                  <label htmlFor=\"role\">Rôle</label><br />\r\n                  <select\r\n                    id=\"role\"\r\n                    value={editingMember?.accountInfo.role || ''}\r\n                    onChange={e => handleInputChange('role', e.target.value)}\r\n                    style={{ width: '100%', padding: 8, borderRadius: 4, border: formErrors.role ? '1px solid red' : '1px solid #ccc' }}\r\n                  >\r\n                    <option value=\"\">Sélectionnez un rôle</option>\r\n                    <option value=\"President\">Président</option>\r\n                    <option value=\"Treasurer\">Trésorier</option>\r\n                    <option value=\"Secrecom\">Secrécom</option>\r\n                    <option value=\"Accountant\">Comptable</option>\r\n                    <option value=\"Censor\">Censeur</option>\r\n                    <option value=\"Member\">Membre</option>\r\n                    <option value=\"Guest\">Invité</option>\r\n                  </select>\r\n                  {formErrors.role && <div style={{ color: 'red', fontSize: 12 }}>{formErrors.role}</div>}\r\n                </div>\r\n                <div style={{ display: 'flex', justifyContent: 'flex-end', gap: 8, marginTop: 16 }}>\r\n                  <button type=\"button\" onClick={closeModal} style={{ padding: '8px 16px', border: '1px solid #ccc', borderRadius: 4, backgroundColor: 'white' }}>Annuler</button>\r\n                  <button type=\"submit\" style={{ padding: '8px 16px', backgroundColor: '#2563eb', color: 'white', border: 'none', borderRadius: 4 }}>\r\n                    Sauvegarder\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Members;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}